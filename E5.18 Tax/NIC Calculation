
Calculate Tax and NIC 2016-17 E (for use with the Main Tax Return) 

Contents
Calculate Tax and NIC 2016-17 E (for use with the Main Tax Return)	1
Version 1.0 changes	3
Version 1.1 changes	5
Version 1.2 changes	5
Version 1.3 changes	5
Version 1.4 changes	7
Version 1.5 changes	7
Version 1.6 changes	8
Version 1.7 changes	8
Version 2.0 changes	8
Version 2.1 changes	9
Version 2.2 changes	10
Version 2.3 changes	12
Version 3.0 changes	12
Version 3.1 changes	13
Version 4.0 changes	14
Version 4.1 changes	14
Version 4.2 changes	14
Version 4.3 changes	15
Version 4.4 changes	17
Version 4.5 changes	17
Version 4.6 changes	17
Version 4.7 changes	17
Version 5.0 changes	18
Version 5.1 changes	21
Version 5.2 changes	22
Version 5.3 changes	22
Version 5.4 changes	22
Version 5.5 changes	23
Version 5.6 changes	23
Version 5.7 changes	24
Version 5.8 changes	24
Version 5.9 changes	24
Version 5.10 changes	25
Version 5.11 changes	25
Version 5.12 changes	26
Version 5.13 changes	27
Version 5.14 changes	28
Version 5.15 changes	28
Version 5.16 changes	29
Version 5.17 changes	29
Version 5.18 changes	29
Stage 1: Collect Non Savings income (c1 boxes)	35
Stage 2: Collect income from Savings (not dividends) (c2 boxes)	38
Stage 3: Collect income from Dividends/ Gains/Non Savings with notional tax (c3 boxes)	40
Stage 4: Calculate Income tax reliefs and allowances	42
Stage 5: Subtract deductions and allowances from income (c5 boxes)	49
Stage 6: Allocate income to tax bands (c6 boxes)	56
Stage 7: Calculate adjustment for Deficiency Relief (c7 boxes)	59
Stage 8: Charge income to tax (c8 boxes)	60
Stage 9: Apply tax adjustments (c9 boxes)	62
Stage 10: Work out non – payable tax credits on dividends (c10 boxes)	65
Stage 11: Accumulate tax paid from Tax Return (c11 boxes)	67
Stage 12: Calculate tax due (c12 boxes)	69
Stage 14: Calculate personal allowance due if your income is £100,000 or more (c14 boxes)	71
Stage 15: Calculate age related married couples allowances (c15 boxes)	72
Stage 16:  Calculate Class 4 NIC (c16 boxes)	74
Stage 17: Calculate Top Slicing Relief (c17 boxes)	77
Stage 18: Calculate Capital Gains Tax due (c18 boxes)	81
Stage 19: Calculate nominated income for remittance basis charge (c19 boxes)	85
Stage 21: Calculate notional tax and tax credits on Lloyds and Trusts dividends (c21 boxes)	86
Stage 22: Calculate notional tax on Trust Income (c22 boxes)	87
Stage 23: Calculate relief on qualifying distributions (c23 boxes)	88
Stage 23: Calculate relief on qualifying distributions (c23 boxes)	88
Stage 24: Calculate UK tax credit on foreign dividends (c24 boxes)	89
Stage 25: Calculate Pension Charges (c25 boxes)	90
Stage 26: Calculate State Retirement Lump sum charge (c26 boxes)	93
Stage 27: Calculate Student Loan repayment (c27 boxes)	94
Stage 28: Calculate Adjusted Net Income for Child Benefit Tax Charge (c28 boxes)	97
Stage 29: Calculate non-residents excluded income (c91 boxes)	98
Annex A: Format SA302 style calculation	101
SA302 layout	104
Notes for printing conditions	108
Annex B – How to Calculate ITF-CEG-INPUT-AMOUNT	111


 
Version 1.0 changes 

Changes Highlighted in yellow
Area of change	Worksheet changed	What was changed
Budget Rates and Allowances Updates.	Parameter changes	numerous items changed and some new items added
Removal of Age-Related Personal Allowance.	Parameter changes	 
 	c4	c4.64
 	c1415	numerous changes
Class 4 Deferment on SA302	SA302	Line87 second line for Class 4 at 2%. No longer required because since 2015-16 unable to defer Class 4 so stand-alone line for Class 4 at 2% obsolete.
Personal Savings Allowance
 
 
 
 
 
 	Parameter changes	new - Personal Savings Allowance £1,000/£500/£0
	c4	c5.30 and c5.31 moved to c4.75 and c4.76 so that they can be used for calculation for PSA
	c4	new box c4.77 for AHR_case
	c4	new box c4.78 for Personal Savings Allowance (PSA) amount
	SA302 interface	new line for data item 'income_Savings_net'
	SA302	new line for data item 'income_Savings_net'
Dividend Taxation Reform
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 	Parameter changes	new - Dividend Allowance DTA £5,000
	c1	c1.43 deleted (FOR7 deleted) and renumbering (but c1.47 split into new c1.46 and c1.47 to stop renumbering run). C1.57 changed because of renumbering.
	c3	changes to c3.3, c3.4, c3.7, c3.8, c3.9, c3.11, c3.12
	 	removed grossing up
	c3	Box c3.61 changed to not include TRU21
	c5	change to c5.13 and changes to other boxes referencing changes to c6
	c6	extensive changes to layout to accommodate new boxes for Dividend Allowance
	c6	c6.27
	c7	Change to c7.4
	c8	changes because of change to c6 numbering + changes to Dividend rates
	c8	c8.15
	c9	deleted c9.22 to c9.28 
	c10	Majority of calculation cells deleted
	c11	c11.17 tax split into new c11.17 and c11.18 to match income. c11.21 and c11.22 deleted. Subsequent renumbering.
	c12	c12.13 changed so from c11.29
	c21c24	Deleted c21, c23 & c24 calculation cells (c22 retained). N.B. c21 reinstated.
	 	c22.11 Rounding added pup
	c91	c91.35, c91.36, c91.37, & c91.38 deleted (dividend etc tax) (+ renumbering)
	c91	Changes to c91.3, c91.18, c91.21, c91.22 & c91.32 
	SA302	Changes to L14, L50, L51, L52, L70, L84 & L69 deleted
	SA302 interface	Changes to L68, L72, L74, L76, L78, L85 & L70 and L84 deleted (formula for L85 changed)
Personal Savings Allowance & Dividend Taxation Reform
 
 
 	c6 & c8	numerous changes
	c4, c5, & c6	Previously, the personal allowance would be used in the order of non-savings, savings, and then dividends. And this would be beneficial for all customers. However, the changes to the dividend allowance and personal savings allowance have caused a change to how the personal allowance could be used in the most tax efficient manner. See c4.75, c4.76. c4.77 (new), & c4.78 (new), c5.8 and c5.11. Update to c6.16 so gets amount from c4.78 (new).
	SA302
 
 	Updated for Pay, pensions, profit etc to match changes to interest, including moving 'title' to new line above amounts, & adding in rate title, e.g. Basic rate
	SA302
 
 
	Updated for Interest received - numerous changes
		Updated for Dividends from companies etc. to match changes to interest
	c20	worksheet deleted (calculation moved to c4 for 2015-16)
Losses	c1	c1.28 changed to “Total all instances (lower of PRO13 and PRO14)”
		c1.31 changed from "From PRO39" to "Lower of PRO38 and PRO39"
Student Loan Reform
 
 
 	Parameter changes	change from SL_limit to SL_limit1 and new data item for SL_limit2
	c12	c12.7 formula changed from …SL_case… to …SL_case<3…
	c27	c27.44 changed from …SL_case… to …SL_case<3… & c27.7 and c27.41 changed to accommodate both thresholds for plan 1 and plan 2
	SA302	L93 changed from Student loan repayments to ="Student loan repayments (plan "&SL_case&")"
	c27	if statement above c27.7 + if statement for c27.41 changed
Student Loan Calculation
 	 c27	Change to c27.20 so picks up c1.37 = FOR30 rather than amount net of losses brought forward
debt_collected v debt_coded	SA302	L96 & L111 formula changed from "…+ debt_collected…" to "…+ debt_coded…"
non-UK resident s811 ITA 2007 relief to be omitted for payments to trade unions	c4 & c5	c4.4 and c5.2 changed so non-UK resident calculation excludes payments to trade unions at stage 4 rather than stage 5
Capital Gains Tax
 
 
 
 	Parameter changes	data items changed for CG to Lower 10% & upper 20%
	 Parameter changes	new data items for CG for residential property and carried interest. Lower 18% & upper 28%
	c18	need to incorporate new CGT boxes for residential property (and carried interest) within calculation
	c18	new calculation to include NRCGT
	SA302	Renumbering of Line (L) numbers in column A and insert 2 new rows for Residential Property and Carried Interest & new row for tax on gains already charged
	SA302 interface	Inserted new data items for Residential Property and Carried Interest amounts of CG and tax and tax on gains already charged
	c12	change to c12.17
Scottish Rate of Income Tax
 
 
 	c8	wording added at start to explain pseudo box + changes to c8.2, c8.4 & c8.6
	c25c26
 	Changes to c25.14, c25.20 & c25.22 for Annual Allowance Charge
		changes to c26.2 to reflect change = STp_signal = TRUE/FALSE
		c26.2 changed to accommodate both STp & rUK rates
	SA302	change to wording for STp "Scottish Income Tax Rate"
Dividend Trust rate	Parameter changes	Trust dividend rate net to gross factor change from 37.5% to 38.1%
Marriage Allowance Transfer	Parameter changes	T_P_A (MAT) updated to £1,100 (PA £11,000 x 10%)
	c5	c5.30 and c5.31 deleted and moved to c4.75 and c4.76 so that they can be used for calculation for PSA
Version 1.1 changes 

Changes Highlighted in yellow

Class 4 calculation	c16	c16.20 changed to make it clear where this information is derived from, particularly with the MORCL1 box being new this year
Scottish Rate of Income Tax	c9, c12, c25 & SA302	SRIT RAS changes – c25.51 to c25.55 to calculate if correct Pension tax Relief at source received. These flow to c9.33 & c12.12.
Student Loan Calculation	c27	c27.7 changed to match JAR name SLRPT
Version 1.2 changes 

Changes Highlighted in yellow

Scottish Rate of Income Tax	c8, and c25/26	For consistency, and to match JAR, all changes in stage 8 and stage 25/26 should be YPDTR = S. I have changed all references in the BCP and Word doc.
Student Loan Calculation	c27	Stage 27 other calculation box has been changed to SLRPT = 01/SLRPT = 02 to match JAR.


Version 1.3 changes 

Changes Highlighted in yellow

Scottish Rate of Income Tax	c8	c8.2, c8.4, & c8.6 if statement changed for logic structure.  There was an unnecessary "If" which caused the “else” and “end if” statements to not line up – the change should clarify intent of if statement
	c25	c25.14, c25.20, c25.22 & c25.53 if statement changed for logic structure.  There was an unnecessary "If" which caused the “else” and “end if” statements to not line up – the change should clarify intent of if statement
	c26	Above c26.2 & Calc box c26.2 changed to include Calculation type = Resident + calc logic changed to make it clearer what intention is i.e. if they are Scottish and resident work out which Scottish rate to use, else work out which UK rate to use.
Student Loan	c27	27.7 if statement changed for logic structure.  
Capital Gains	c17	If statement above c17.21 changed to <= 0 (zero) to account for customers with no Gains that have overall losses + typo in If statement – CGT53 changed to CGT35.
Removal of Age-Related Personal Allowance.	c14	Box number change not updated when referenced elsewhere. c14.6 changed from “c14.4 minus c14.15” to “c14.4 minus c14.5”
Personal Savings Allowance & Dividend Taxation Reform	c6	c6.6 was = lower of c6.4 + c6.5. It has been changed to lower of c6.4 and c6.5.
	c6	c6.27 changes to formulae to produce correct Dividend calculation
	c6	c6.30 changes to formulae to produce correct Dividend calculation
	c6	c6.31 changes to formulae to produce correct Dividend calculation
	c6	c6.39 changes to formulae to produce correct PSA & Dividend calculation 
	c6	c6.47 -there was no change therefore there should not have been highlighting.
	c6	c6.48 -there was no change therefore there should not have been highlighting.
	c6	c6.49 -there was no change therefore there should not have been highlighting.
	c6	c6.52 was = “(lower of c6.48 + c6.49) minus c6.51”. It has been changed to “(lower of c6.48 and c6.49) minus c6.51”.
	c11	c11.12 was SPS29 + SPS30 + SPS31 but SPS29 removed from Return so now SPS30 + SPS31.
Enhancement	Tax rates…	'POA_limit' is used for the payments on account in E stage 13 which was decoupled from the main calc requirements. The parameter does not need to be in the requirements - please ignore.
Enhancement	c1	Initial bracket missing for c1.45. (TRU3 + TRU7 + TRU16) x NS_gross
Enhancement	c14	c14.5 we should use rate reference AA_Excess
Enhancement	c16	Rounding of pdown moved from c16.27 to c16.28 where it was placed for equivalent box in previous year
Enhancement	c26	Calc box c26.1 was highlighted as a change whereas it was not – highlighting removed.
Enhancement	c26	There were 2 ‘End If’ after c26.3 when there should only have been 1.
Enhancement	c27	Calc box c27.44 was changed in error – changed back to previous year and highlighting removed.
Version 1.4 changes 

Changes Highlighted in yellow

Enhancement	c6	Box c6.24 typo"c6.21 minus c6.13" corrected to"c6.12 minus c6.13".
Enhancement	c6	Boxes c6.27 and c6.52 should have been updated in v1.3 but corrections were not completed. 
- c6.27 - Should be "(BR_band + c4.59) minus (c6.1 + c6.11)" but remained unchanged as: "c6.25 minus (c6.17 + c6.18)"
- c6.52 - Should be "(lower of c6.48 and c6.49) minus c6.51" but remained "(lower of c6.48 + c6.49) minus c6.51
Enhancement	c6	Boxes c6.47, c6.48 and c6.49 should have been updated in v1.3 to remove highlighting but not updated.
Enhancement	c6	Boxes c6.30 not updated correctly in v1.3. Corrected to “(lower of c6.23 and c6.27) minus c6.29”
Enhancement	c6	Boxes c6.31 not updated correctly in v1.3. Corrected to “c6.23 minus (c6.29 + c6.30)”
Enhancement	c6	Boxes c6.39 shown as change in v1.3 but no change from previous version still “c6.27 minus c6.30” (2015-16 was “c6.29 minus c6.30”).
Enhancement	c17	If statements changed for logic structure (second if removed) above c17.1 & above c17.21 “If boxes ((CGT6…” now “boxes ((CGT6…”
Version 1.5 changes 

Changes Highlighted in yellow

Enhancement	c1	Box c1.44 £down deleted. Box c1.45 £down added.
Enhancement	c91	c91.15 referred to box c3.6 in error because of renumbered. c91.15 changed to c3.5 (Total foreign dividends)
Enhancement	Rates and Allowances	DivBR_rate changed to 0.075 (7.5%)
Enhancement	c9	box c9.35 changed to "Higher of boxes c9.27 and c9.34"?
Enhancement	c9	box c9.37 changed to "c9.36 x BR_rate" 
Enhancement	c9	box c9.38 changed to "c9.35 + c9.37"
Version 1.6 changes 

Changes Highlighted in yellow

Enhancement	Rates and Allowances	DivBR_rate changed to 0.075 (7.5%) – change missed from v1.5
Enhancement	SA302 layout	L52 changed from 31.1 to 38.1%
Version 1.7 changes 

Changes Highlighted in yellow

Capital Gains	Annex B	CGT53 typo – changed to CGT35
Version 2.0 changes 

Changes Highlighted in green

Scottish Rate of Income Tax	SA302 Layout	L43 to L44a changed so e.g. 20% becomes data item BR-rate or SBR-rate.
	Annex A	Changes to numbering in c9 not reflected in Annex A – now amended
	Annex A	SRIT RAS change - new line for Additional tax due on pension payments (L79C) for restricting Gift Aid tax
	SA302 Layout	SRIT RAS change - new line for Additional tax due on pension payments (L79C) for restricting Gift Aid tax
Highlighting not removed in error	SA302 Layout	L90 or lines – highlighting had not been removed from previous year
Capital Gains	c18	Change of ordering of calculation boxes so basic rate already used taken into account - changes to c18.31 to c18.45 with total at c18.50 changing as a result
	SA302 Layout	L115 to L116a – names added and highlighting removed where no changes from previous year
Enhancement	data	SB_rate which was added for 2016-17 but not used in calculation is not required and has been deleted
Enhancement	SA302 layout	L36 changed so prints either "Total income on which tax due" or "Total income"
Personal Savings Allowance & Dividend Taxation Reform	Rates and Allowances	Dividend Allowance “DTA” changed to “DA” to avoid possible confusion with Double Taxation Agreement DTA
	c2	c2.1 descriptor changed from 'taxed' to 'untaxed' following change to SPS28 on Return
	c4	c4.76 changed to accommodate the effects of PSA/DTR on MAT. This now identifies if Higher Rate for purposes of Marriage Allowance Transfer MAT
	c4	new box c4.77 specifically to identify if Higher Rate for purposes of PSA/DTR. Subsequent box renumbering now c4.78 & c4.79
	c4	New Box c4.80 for Dividend Allowance changed to (references new name  “DA”)
	c5	Box c5.9 – “copy to c6.11” deleted
	c5	new boxes c5.28, c5.29 & c5.30 to ensure correct amount of Savings income less allowances is used in c6.11 (change to c6.11). Subsequent box number changes so c5.28 now c5.31 & c5.29 now c5.32. These boxes referenced in c17.1, c18.36, c25.11 & above c26.2 (allocation of PA)
	c6	Box c6.11 changed to “from c5.30”
	c6	c6.16 referenced c4.78 which is now box c4.79
	c6	C6.28 changed from “DA” to “from c4.80”
	c8	Calculation boxes c8.9 & c8.10, and, after renumbering, c8.17 & c8.18 added for Nil rate for Savings and for Dividends for visibility. Subsequent box renumbering.
	c11	c11.12 was SPS29 + SPS30 + SPS31 but SPS29 removed from Return so now SPS30 + SPS31.
	Annex A: Format SA302 style calculation	L74 'relief-on-qual-distn' deleted and highlighted as change
	SA302 layout	L74 'relief-on-qual-distn' deleted and highlighted as change
	Annex A: Format SA302 style calculation	L69 for notional-other was struck through and highlighted as change but this was reinstated and so strikethrough removed
	SA302 layout	L69 for notional-other was struck through and highlighted as change but this was reinstated and so strikethrough removed
	SA302 layout	Row L52 showed Taxable-divs-AHR as 31.1%, changed to 38.1%
Version 2.1 changes 

Changes Highlighted in green

Enhancement - Marriage Allowance Transfer – changes in v2.0 that were not reflected in changes log	c9	Boxes c9.20 & c9.21 new boxes for Marriage Allowance Transfer In. Subsequent box renumbering
 	c9	Box number c9.27 now includes c9.21 in sum
 	c9	Box number changes resulted in changes to calc for new box numbers c9.24, c9.27, c9.29, c9.31, c9.36, c9.37, c9.39 & c9.40
 	c12	Box c12.1 changed because of box renumbering in c9
 		
 	c12	Boxes c12.21, c21.22, c21.23, & c21.24 deleted (cross through in v2.0 & deleted in v2.1)
 	c12	Boxes c12.25 renumbered as c12.21 and formula changed
 		
 		
 		
 		
 		
 	CRC_template	Box c96.8
Enhancement - Marriage Allowance Transfer – changes that were omitted in error from v2.0	c12	Box c12.1 changed because of box renumbering in c9
	c12	Above c12.19 changed to “…3 boxes…” and references c12.21 following renumbering
	Annex A	L66 added. 
	Annex A	L125a & L125b deleted
	Annex A	Changes to the following because of renumbering in stage 9: L68, L69, L72, L76, L78, L79C, L80, L81, & L83
	SA302 layout	L125a & L125b deleted + L66 added. Formula for printing L126 changed to remove reference to MAT “Total-tax-NIC-due”
Enhancement – Capital Gains Tax – changes that were omitted in error from v2.0	Annex A	Changes to the following because of renumbering in stage 18: L116 & L116a - Lower-rate-CGT-RP-CI, CG-at-higher-rate-RP-CI, CG-at-lower-rate-RP-CI, Higher-rate-CGT-RP-CI
Enhancement – Personal Savings Allowance/Dividend Allowance – changes that were omitted in error from v2.0	Annex A	Changes to the following because of renumbering in stage 8: L11, L36, L46b, L47, L48, L48a, L50a, L51, L52, L53, L55, L56.
Version 2.2 changes 

Changes Highlighted in green

Enhancement – Personal Savings Allowance/Dividend Allowance – change log v1.5 updated but document was not updated, in error.	c1	Box c1.44 £down deleted. Box c1.45 £down added.
Enhancement – Personal Savings Allowance/Dividend Allowance 	c4	Box C4.77 was referring to AHR_case in error. Now changed to HR_case.
Enhancement – Personal Savings Allowance/Dividend Allowance	c5	Box C5.8 was using C4.78 but this has now been re-numbered to C4.79
Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box C8.10 was “C8.9 x SR_rate” now “C8.9 x SNil_rate” plus “pdown” added.
Enhancement – Personal Savings Allowance/Dividend Allowance – change that was in document but omitted in error from v2.0 changes log	c8	C8.19 (was c8.15) was “c6.25 + c6.30”, now “from c6.30”
Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box c8.12 4th column (notes) changed from box c8.9 to box c8.11 to match change to 2nd column.
Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box c8.14 4th column (notes) changed from box c8.11 to box c8.13 to match change to 2nd column.
Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box c8.16 4th column (notes) changed from box c8.13 to box c8.15 to match change to 2nd column.
Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box c8.18 4th column (notes) changed from box c8.15 to box c8.17 to match change to 2nd column.
DivBR rate changed to DivNil rate in 2nd column
7.5% changed to 0% in 4th column (notes)
Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box c8.20 4th column (notes) changed from box c8.15 to box c8.19 to match change to 2nd column.
Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box c8.22 4th column (notes) changed from box c8.17 to box c8.21 to match change to 2nd column.
Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box c8.24 2nd & 4th columns changed from box c8.19 to box c8.23 to match change to 2nd column.
Enhancement – Personal Savings Allowance/Dividend Allowance	c9	Box c9.1 was showing “from c8.22” in 2nd column.  Changed to ”from c8.26”
Enhancement – Personal Savings Allowance/Dividend Allowance	c9	Box c9.26 was showing as c9.24 + c9.24. Changed to c9.24 + c9.25
Enhancement – Capital Gains Tax	SA302 layout	Update to typo to numbering for L116a – L16a now L116a
Student Loan Reform	SA302 layout	L93 changed from "Student loan repayments (plan SL_case)" to "Student loan repayments (plan SLRPT)" to match JAR
Enhancement – Marriage Allowance Transfer	c9	New box c9.23 second column was updated to “c9.22 x BR_rate” but 4th column change missed - now updated from “c9.20 x 20%” to “c9.22 x 20%”
	c9	New box c9.31 second column was updated to “c9.30 x BR_rate” but 4th column change missed - now updated from “c9.28 x 20%” to “c9.30 x 20%”
	c9	New box c9.39 second column was updated to “c9.38 x BR_rate” but 4th column changed missed - now updated from “c9.35 x 20%” to “c9.38 x 20%”
Enhancement - Marriage Allowance Transfer – changes that were omitted in error from v2.0	c12	Above c12.19 changed as it still incorrectly referred to c12.25
Enhancement – Capital Gains Tax	c18	Above box c18.37 “Annualised gain” removed.
Enhancement – Capital Gains Tax	c18	box c18.45   changed from “C18.39 minus (c18.27 + c18.37) to “C18.39 minus c18.27
Enhancement – Personal Savings Allowance/Dividend Allowance 	c26	Box c26.2 changed to reflect renumbering to section 8
Enhancement – Personal Savings Allowance/Dividend Allowance 	c91	Box c91.19 changed “from C91.19” to “from c91.18
Enhancement	SA302 layout	L34 changed “Total” is on one line
Enhancement	SA302 notes for printing conditions	L36 – printing condition added
Enhancement	SA302 notes for printing conditions	L77 – printing condition changed to add “& 79c” 
Enhancement	Annex A	“pens-tax-due” stated twice because it appears in the SA302 layout twice at L79c & L93e – 2nd entry deleted.
(one was from C9.35 & the other from C25.54 but C9.35 gets its value from C25.54)
Enhancement	Changes log V2.1	Reference to the CRC template & C96.8 deleted as not appropriate for this document.
Enhancement	c91	Rounding on boxes c91.29 changed from £down to pup (in customers favour) and Box c91.33 pup added
Version 2.3 changes 

Changes Highlighted in green

Enhancement – Marriage Allowance Transfer 	Overview of the tax calculation process	Note for stage 12 (starts “set calculation type = resident….”) now updated to refer to “c12.21” instead of “c12.25” (3 updates)
Enhancement – Marriage Allowance Transfer	Overview of the tax calculation process	Note for stage 12 (starts “If a digital Marriage Allowance transfer…”) reference to box c12.21 changed to refer to box C9.20
Enhancement – Class 4	Overview of the tax calculation process	Note for stage 16 (starts “For Class 2…”) reference to box c16.34 changed to refer to box c16.32
Enhancement – Class 4	Overview of the tax calculation process	Note for stage 16 (starts “for Class 4…”) reference to last line “and c16.21” deleted so now just refers to “..to populate c16.20”)
Enhancement – Marriage Allowance Transfer
	c5	Note below Box c5.21 changed from “copy to c9.20 to “copy to box c9.22”
Enhancement – Marriage Allowance Transfer
	c9	Box c9.21 4th column updated to refer to box c9.20 instead of c12.21” 
Enhancement – Marriage Allowance Transfer
Change log v2.2 updated but document was not updated, in error.	c9	New box c9.23 2nd column was updated to “c9.22 x BR_rate” but 4th column change missed - now updated from “c9.20 x 20%” to “c9.22 x 20%”
Enhancement – Personal Savings Allowance/Dividend Allowance
Change log v2.2 updated but document was not updated, in error.	c12	Note above c12.19 was updated to remove reference to c12.25 but change missed. 
Now updated to “c12.21 is used in the calculation at Payments on Account c13.10” from “c12.21 and c12.25 is used in the calculation at Payments on Account c13.10”

Enhancement – Marriage Allowance Transfer	c91	Note number 2 at the start of this stage changed to “Recalculate boxes c5.1 to c12.21…” from “Recalculate boxes c5.1 to c12.25…”

Enhancement – Personal Savings Allowance/Dividend Allowance
Change log v2.2 updated but document was not updated, in error.	c91	Box c91.19 changed “from C91.19” to “from c91.18 but change missed.  Now updated.



Version 3.0 changes 

Changes Highlighted in turquoise

Enhancement	Annex A	taxable-income was shown twice – both corrected to show c5.32 in previous version but for Requirements this is only required once so second entry deleted.
Enhancement – Class 2	c16	At start of requirements inserted new line to ensure where NIC Exception that “Calculate c16.1 to c16.12” takes place in addition to “Set c16.13 to c16.31 to 0 (zero)”
Personal Savings Allowance & Dividend Taxation Reform
 
 	Tax rates table	Dividend net to gross factor divs_gross changed from “100/90” to “100/92.5”. Decimal changed to 1.08108108108109.
	Tax rates table	Trust dividend rate net to gross factor trust_div_gross decimal places increased to match others
	c3	Boxes c3/6, c3.7 & c3.8 changed to gross up for tax
	c6	Box c6.33 changed from "lower of c6.31 and c6.32" to "lower of (c6.31 and c6.32) minus c6.29". This was reducing the additional rate dividends by the £5,000 dividend tax allowance rather than reducing the higher rate dividends. The change addresses this.
	c11	New boxes c11.22 & c11.23 (these were deleted in error from "Changes for v1.0 to v1.2"). Subsequent renumbering after reinstated. Changes to new boxes c11.25 & c11.31
	Annex A	Renumbering resulted in changes to: tax-paid-Trust, tax-paid-Overseas, tax-paid-Case3, tax-paid-CEG, tax-paid-Other
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	Changes to c5.2, c5.5, c5.8 & c5.11
Version 3.1 changes 

Changes Highlighted in turquoise

Enhancement - SRIT	SA302 layout	Names changed to numbers for L43 to ‘L44A or’ line
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	c5.2 & c5.5 changed
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	c5.32 changed to "c3.21 minus c4.70"
Dividend Taxation Reform	c6	Box c6.33 changed from "lower of (c6.31 and c6.32) minus c6.29" to "lower of (c6.31) and (c6.32 minus c6.29)". changed to incorrect formula in v3.1
Dividend Taxation Reform	c11	Box c11.23 - Notes column was correct but first column only referenced TRU18 – now (TRU5 + TRU9 + TRU18)
Enhancement – Marriage Allowance Transfer	SA302 layout	L30 Or line changed from AllceIn-TPA to AllceOut-TPA
Enhancement	SA302 layout	L56 Income Tax due (A) added. This was in TCG but not in these Requirements or SA302 Requirements
Enhancement	SA302 layout	L89B “paid” removed from end
Enhancement	SA302 layout	L94 - 3 instances changed to end with "due" to match “Income tax due”
Enhancement	SA302 layout	L113A "Taxable capital gain" changed to "Taxable capital gains"
Enhancement Capital Gains	SA302 layout	L115 to L116a – names added
Enhancement	SA302 layout Notes for printing conditions	L6 Print rule changed
Enhancement	SA302 layout Notes for printing conditions	L56 Print rule changed
Enhancement - Student Loan	SA302 layout	Additional condition and “or” line for L93.
Enhancement - Student Loan	c27	c27.42 returned to £down from pdown. It has been established that the SL amount should not include pence
Enhancement – Dividend Taxation Reform	SA302 layout	L69 reinstated (required for Trusts and partnerships where accounts period covers pre April 2016.
Version 4.0 changes 

Changes Highlighted in pink

Enhancement – Personal Savings Allowance/Dividend Allowance	c8	Box c8.19 changed so crossed out “c6.25 +” deleted rather than crossed through and “from “ added
Enhancement – Personal Savings Allowance/Dividend Allowance	c12	Box 12.13 changed because of renumbering to stage 11
Enhancement – Personal Savings Allowance/Dividend Allowance	c91	Box 91.32 changed because of renumbering to stage 11
Enhancement _ MAT	Annex A – Notes for printing	L125a, L125b & L126 deleted/updated
Enhancement - Student Loan	SA302 layout	L93 “Plan 01” changed to “plan 02” & “Plan 01” changed to “plan 02”

Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	New section inserted at beginning of stage 5 and existing c5.1 to c5.32 moved to end. Existing section also reordered and new boxes inserted.
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c6	Change to box numbers from c5 (c6.1, c6.11, c6.23, c6.35, & c6.45
Version 4.1 changes 

Changes Highlighted in pink

Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	Annex A	Taxable-income changed to c5.67
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c9	Box c9.22 changed from “from c5.21” to from c5.63”
Version 4.2 changes 

Changes Highlighted in pink

Enhancement	Tax rates, rate bands and parameters	Gross_by_22 was in table twice – second entry deleted
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	Boxes c.2 & c5.5 now have closing brackets
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	The following (old numbers) were referencing the wrong box c5.3, c5.11, c5.17, c5.24, c5.26, c5.27, c5.28, c5.29, c5.31, c5.32. Now referencing calculation box.
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	New boxes added to simplify stage by splitting old boxes c5.12, c5.14, c5.18, c5.20, c5.22, c5.42, & c5.44. Subsequent renumbering.
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	New boxes c5.79 & c5.80 - removed notes from 4th column & retained in c5.81 to avoid confusion
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c5	New boxes c5.76 & c5.77 - removed notes from 4th column & retained in c5.83 & c5.84 to avoid confusion
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c6	Change to box numbers from c5 (c6.1, c6.11, c6.23, c6.35, & c6.45
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c9	Box c9.22 changed from “from c5.63” to “from c5.86”. N.B. this should have been changed to “from c5.82” – see changes log v4.3.
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	Annex A	Taxable-income changed from c5.67 to c5.82.  N.B. this should have been changed to “c5.86” – see changes log v4.3.
Enhancement Marriage Allowance	Annex A	Allce_TPA_relief changed from “c9.21” to “c9.20 x 20%” for consistency within and across documents
Enhancement SRIT Pension RAS	Annex A	The data item pens-tax-due is at L79c and L93e but 1st was getting item from c9.35 & 2nd c25.54. Box c9.35 gets its value from c25.54 so for consistency both changed to c25.54 and Annex A updated
Version 4.3 changes 

Changes Highlighted in pink

Enhancement	c5	Box c5.16 was "...c5.2 minus (c5.4 + c5.8))" now "...c5.2 minus (c5.4 + c5.8 + c5.15))"
Enhancement	c5	Box c5.59 was "lower of…" but there was only argument. The "lower of" removed
Enhancement	c5	Box c5.60 was "larger of c5.56 and c5.59" - changed to "lower of c5.4 and c5.59"
Enhancement	c5	Box c5.61 was "larger of c5.4 and c5.60" - changed to "larger of c5.56 and c5.60"
Enhancement	c5	Box c5.38  changed so if non-UK resident calc = 0 (zero)
Enhancement	c5	Box c5.39  changed so if non-UK resident calc = 0 (zero)
Enhancement	c5	Box c5.42 changed as both non-res & UK calc returned c3.19
Enhancement	c5	Box c5.43 changed as both non-res & UK calc returned c3.20
Enhancement	c4	Note against c4.70 changed from "Copy to c5.2 to "Copy to c5.1"
Enhancement	c17	Box c17.1 
Enhancement	c18	Box c18.31 
Enhancement	c21	Box c21.8 
Enhancement	c22	Box c22.1 
Enhancement	c22	Box c22.9 
Enhancement	c25	Box c25.11 
Enhancement	c26	If statement above c26.1 
Enhancement	c91	Box c91.6 Note changed from c5.1 to c5.35
Enhancement	c91	Box c91.7 Note deleted
Enhancement	c91	Box c91.14 Note changed from c5.7 to c5.37
Enhancement	c91	Box c91.17 Note deleted
Enhancement	c91	Box c91.20 Note deleted
Enhancement	c91	Box c91.23 Note changed from c5.16 to c5.40
Enhancement	c91	Box c91.24 Note deleted
Enhancement	c91	Box c91.25 Note deleted
Enhancement	c91	Box c91.26 Note deleted
Enhancement	c91	Box c91.28 Note changed from c5.28 to c5.85
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	c9	Changes log for v4.2 had “Box c9.22 changed from “from c5.63” to “from c5.86”” but this should have been “to “from c5.82””.
Personal Savings Allowance & Dividend Taxation Reform - Order of allowances & deductions	Annex A	Changes log for v4.2 had “Taxable-income changed from c5.67 to c5.82” but this should have been “to “to c5.86””.
Enhancement	Annex A	The order the following appear changed and they now match correct calc box:
CG-at-lower-rate-RP-CI	c18.41
Lower-rate-CGT-RP-CI	c18.42
CG-at-higher-rate-RP-CI c18.43
Higher-rate-CGT-RP-CI	c18.44

 
Version 4.4 changes 

Changes Highlighted in pink

Enhancement	c5	Box c5.14 was "larger of (c4.79 and (SR_band minus (c5.4 + c5.8 minus c5.1)))”. Changed to “larger of (c4.79 and
(SR_band minus (c5.4 + c5.8) minus c5.1))”
Enhancement	c5	Box c5.28 was “lower of (c5.27 and (c4.79 minus c5.24))”. Changed to “lower of (c5.27 and (c4.80 minus c5.24))”.
Enhancement Capital Gains	c18	Box c18.45 changed from "c18.39 minus c18.27" and "c18.40 minus c18.27"
Version 4.5 changes 

Changes Highlighted in pink

Enhancement PSA DTR	c5	Box c5.53 was "c5.2 minus (c5.3 + c5.7 + (c5.11 minus c4.79))" now "c5.1 minus (c5.47 + c5.48 + c5.52)"
Version 4.6 changes 

Changes Highlighted in pink

Enhancement	SA302 layout	L56 Income Tax due (A) added. This was in TCG but not in these Requirements or SA302 Requirements. Changes Log noted in v3.1 but change not highlighted in SA302 layout.
Enhancement PSA DTR	c5	Box c5.2 changed to reflect c5.1 from previous year for non-resident excluding trade union etc.
Enhancement PSA DTR	c5	Box c5.86 changed to overcome ordering of allowances but now superseded and causing issue where always showing resident income. Box c5.86 changed to show resident or non-UK resident income.
Enhancement PSA DTR	c5	Box c5.70 changed so if allowances cover all taxable income and excess allowances those excess allowances are set off against the Dividend income in Dividend nil rate.
Rounding	c4	Box c4.50 added rounding of £up
Enhancement Capital Gains	c18	Changes log 4.4 - Box c18.45 changed from "c18.39 minus c18.27" and "c18.40 minus c18.27" – this should have been - Box c18.45 changed from "c18.39 minus c18.27" to "c18.40 minus c18.27"   
Version 4.7 changes 

Changes Highlighted in pink

Enhancement PSA DTR	c5	c5.14 changed from "larger of (c4.79 and (SR_band (£5,000) minus (c5.4 + c5.8) minus c5.1))" to "larger of (c4.79 and (SR_band (£5,000) minus ((c5.4 + c5.8) minus c5.1)))"
Enhancement PSA DTR	c5	c5.54 changed from "c5.53 minus c5.51" to "c5.53 minus c5.30"
Version 5.0 changes 

Changes Highlighted in red

Enhancement	c16	c16.30 Changed from "If c16.24 > 0 and c16.24 > (c16.21 + c16.32 + c16.16)" to "If c16.24 > 0 and c16.24 > (c16.21 + c16.32 + (c16.13 x NIC_rate (9%)))"
c16.30 Changed from "If c16.24 > 0 and c16.24 <= (c16.21 + c16.32 + c16.16)" to "If c16.24 > 0 and c16.24 <= (c16.21 + c16.32 + (c16.13 x NIC_rate (9%)))"
Enhancement	c5	c5.13 changed from "lower of (c5.12 and (c5.2 minus c5.4))" to "lower of c5.12 and (c5.2 minus (c5.4 + c5.8))
Enhancement – the amount of up to PSA_HR £500 was not being allocated where the customer was liable at AHR but after reliefs and allowances was liable at below AHR	c5	c5.20a New calculation box "HR_band (£118,000) minus (c5.6 + c5.10)"  
	c5	c5.20b New calculation box "lower of c5.11 minus (c5.15 + c5.16 + c5.19 + c5.20) and c4.79 minus (c5.15 + c5.19)"  
	c5	c5.20c New calculation box "lower of c5.20a and c5.20b"
Enhancement	c5	c5.21 changed from "c5.11 minus (c5.15 + c5.16 + c5.19 + c5.20)" to "c5.11 minus (c5.15 + c5.16 + c5.19 + c5.20 + c5.20c)"
Enhancement	c5	c5.30 changed from "lower of (c5.22 minus (c5.24 + c5.25 + c5.29) and c5.26)" to "lower of (c5.22 minus (c5.24 + c5.25 + c5.29) and c5.26 minus c5.29)"
Enhancement	c5	c5.48 changed from "lower of c5.1 minus (c5.5 + c5.9 + c5.20 + c5.6 + c5.10 + c5.21) and c5.34" to "lower of c5.1 minus (c5.5 + c5.9 + c5.20 + c5.6 + c5.10 + c5.21) and c5.34 minus ((c5.2 + HR_band (£118,000)) minus c4.74)"
Enhancement – the amount of relief and allowances in the calculation was being increased	c5	c5.57 changed from "lower of (c5.56 and (c5.2 + c5.4 + c5.8)) minus (c5.47 + c5.48)" to "lower of (c5.56 and (c5.4 + c5.8 + c5.16))"
	c5	c5.58 changed from "lower of (c5.1 minus (c5.52 + c5.57) and c5.30)" to "lower of (c5.1 minus (c5.47 + c5.48 + c5.52 + c5.57) and c5.30)"
Enhancement	c5	c5.1 changed from "c5.1 = c4.70" to "c5.1 = c4.70 minus c4.63b"
Enhancement	c5	c5.85 changed from "c5.85 = c3.21" to "c5.85 = c3.21 minus c4.63b"
Enhancement – calculation already performed at c5.3	c5	c5.35 changed from "If calculation type = non-resident
c5.35 = c91.6
else
c5.35 = c1.57"
to "from c5.3"
Enhancement – calculation already performed at c5.11	c5	c5.37 changed from "If calculation type = non-resident
c5.37 = c91.14
else
c5.37 = c2.19" 
to "from c5.11
Enhancement – Losses brought forward deducted from non-savings income before stage 5.	c4	c4.63a New calculation box "from c1.57"  

	c4	c4.63b New calculation box "c4.5 + c4.7 + c4.13 + c4.19 + c4.27 + c4.28 + c4.33 + c4.35"  
	c4	c4.63c New calculation box "c4.63a minus c4.63b"  
Enhancement – changes to address SR_band and BR_band issues.	c6	c6.3 Box changed to not used
	c6	c6.4 Box changed to not used
	c6	c6.6 changed from "lower of c6.4 and c6.5" to "lower of c6.1 and (BR_band (£32,000) + c4.59)"
	c6	c6.7 changed from "c6.4 minus c6.6" to "c6.1 minus c6.6"
	c6	c6.10 changed from "c6.7 minus c6.9" to "c6.1 minus (c6.6 + c6.9)"
	c6	c6.12 changed from "c6.2 minus c6.3" to "(c5.1 + SR_band (£5,000)) minus (c5.3 + c5.42)"
	c6	c6.14 changed from "c6.11 minus c6.13" to "lower of SR_band (£5,000) and c6.13"
	c6	c6.15 Box changed to not used

	c6	c6.17 changed from "lower of (c6.11 minus c6.13) and c6.16" to "lower of (c6.11 minus c6.14) and c6.16"
	c6	c6.18 changed from "(lower of c6.14 and c6.15) minus c6.17" to "lower of (c6.11 minus (c6.14 + c6.17)) and ((BR_band (£32,000) + c4.59) minus (c6.6 + c6.14 + c6.17))"
	c6	c6.19 changed from "c6.14 minus (c6.17 + c6.18)" to "c6.11 minus (c6.14 + c6.17 + c6.18)"
	c6	c6.20 changed from "c6.8 minus c6.9" to "HR_band (£118,000) minus c6.9"
	c6	c6.22 changed from "c6.19 minus c6.21" to "c6.11 minus (c6.14 + c6.17 + c6.18 + c6.21)"
	c6	c6.24 changed from "c6.12 minus c6.13" to "from c4.80"
	c6	c6.25 changed from "lower of c6.23 and c6.24" to "lower of c6.23 and c6.24
	c6	c6.26 changed from "c6.23 minus c6.25" to "lower of c6.23 and ((BR_band (£32,000) + c4.59) minus (c6.6 + c6.9 + c6.14 + c6.17 + c6.18))
	c6	c6.27 changed from "(BR_band + c4.59) minus (c6.1 + c6.11)" to "lower of c6.25 and c6.26"
	c6	c6.28 changed from "From c4.80" to "c6.26 minus c6.27"
	c6	c6.29 changed from "lower of c6.23 and c6.28" to "c6.23 minus c6.26"
	c6	c6.30 changed from "(lower of c6.23 and c6.27) minus c6.29" to "HR_band (£118,000) minus (c6.9 + c6.21)
	c6	c6.31 changed from "c6.23 minus (c6.29 + c6.30)" to "lower of c6.29 and c6.30
	c6	c6.32 changed from "c6.20 minus c6.21" to "lower of (c6.25 minus c6.26) and c6.30"
	c6	c6.33 changed from "lower of (c6.31) and (c6.32 minus c6.29)" to "c6.31 minus c6.32"
	c6	c6.34 changed from "c6.31 minus c6.33" to "c6.23 minus (c6.25 + c6.28 + c6.33)"
	c6	c6.36 Box changed to not used
	c6	c6.37 Box changed to not used
	c6	c6.38 Box changed to not used
	c6	c6.39 Box changed to not used
	c6	c6.40 changed from "lower of c6.38 and c6.39" to "lower of c6.35 and ((BR_band (£32,000) + c4.59) minus (c6.6 + c6.14 + c6.17 + c6.18 + c6.26))"
	c6	c6.41 changed from "c6.38 minus c6.40" to "c6.35 minus c6.40"
	c6	c6.42 changed from "c6.32 minus c6.33 " to "HR_band (£118,000) minus (c6.9 + c6.21 + c6.33)"
	c6	c6.44 changed from "c6.41 minus c6.43" to "c6.35 minus (c6.40 + c6.43)"
	c6	c6.45 changed from "from c5.82" to "from c5.82"
	c6	c6.46 changed from "c6.36 minus c6.37" to "(c5.1 + SR_band (£5,000)) minus (c5.3 + c5.42 + c5.11 + c5.22 + c5.7 + c5.43)"
	c6	c6.47 changed from "lower of c6.45 and c6.46" to "lower of c6.45 and c6.46"
	c6	c6.48 changed from "c6.45 minus c6.47" to "lower of SR_band (£5,000) and c6.47"
	c6	c6.49 Box changed to not used
	c6	c6.52 changed from "(lower of c6.48 and c6.49) minus c6.51" to "lower of (c6.45 minus (c6.48 + c6.51)) and ((BR_band (£32,000) + c4.59) minus (c6.6 + c6.14 + c6.17 + c6.18 + c6.26 + c6.40 + c6.48 + c6.51))"
	c6	c6.53 changed from "c6.48 minus (c6.51 + c6.52)" to "c6.45 minus (c6.48 + c6.51 + c6.52)"
	c6	c6.54 changed from "c6.42 minus c6.43 " to "HR_band (£118,000) minus (c6.9 + c6.21 + c6.29 + c6.43)"
	c6	c6.56 changed from "c6.53 minus c6.55" to "c6.45 minus (c6.48 + c6.51 + c6.52 + c6.55)"
	c8	c8.1 changed from "c6.3 + c6.6 + c6.37 + c6.40" to "c6.6 + c6.40"
	c8	c8.7 changed from "c6.13 + c6.47" to "c6.14 + c6.48"
	c8	c8.17 changed from "From c6.29 " to "c6.25"

	c8	c8.19 changed from "From c6.30 " to "c6.28"
Enhancement – to include LUN9 + LUN10 tax credits	c12	c12.1 changed from c9.40 to c9.41 minus c10.4
Enhancement	c16	c16.30 #1 Changed from "If c16.24 > 0 and c16.24 > (c16.21 + c16.32 + c16.16)" to "If c16.24 > 0 and c16.24 > (c16.21 + c16.32 + (c16.13 x NIC_rate (9%)))"
Enhancement	c16	c16.30 #2 Changed from "If c16.24 > 0 and c16.24 <= (c16.21 + c16.32 + c16.16)" to "If c16.24 > 0 and c16.24 <= (c16.21 + c16.32 + (c16.13 x NIC_rate (9%)))"
Enhancement – the If statement for calculating Capital Gains should include CGT18 Attributed Gains so that if they are the only taxable Gain the CGT calculation will run	c17	c17 If statement Changed from "CGT51 is not zero or Null" to "CGT51 is not zero or Null or (box CGT18 is not zero or null)"
	c17	c17 if statement Changed from "(CGT51 = 0 (zero) or null)) no Top Slicing relief is due" to "(CGT51 = 0 (zero) or null) and (box CGT18 = zero or null)) no Top Slicing relief is due"
	c18	A change to the If statement at the start of stage 18 for calculating Capital Gains Tax (CGT). This should include reference to 'Attributed gains where personal losses' (CGT18). 
Enhancement	c19	c19.1 Changed from "Copy to c9.30 and to c12.11" to "Copy to c9.33 and to c12.11"
Enhancement	c21	c21.10 Changed from "Copy to box c9.22" to "Copy to box c9.24"
Enhancement	c22	c22.2 Changed from "lower of c6.44 and c22.1" to "lower of c6.31 and c22.1"
Enhancement	c22	c22.5 Changed from "lower of c6.43 and c22.4" to "lower of c6.30 and c22.4"
Enhancement	c22	c22.12 Changed from "Copy to box c9.23" to "Copy to box c9.25"
Enhancement	c28	c28.14 Changed from "copy to box 9.31" to "Copy to box c9.34"
Enhancement	c5	c5.78 Changed from "copy to box c6.11" to "Copy to box c6.7"
Enhancement	c5	c5.84 Changed from "copy to box c6.35" to "Copy to box c6.26"
Enhancement	c5	c5.81 Changed from "copy to box 6.23" to "Copy to box c6.18"
Enhancement	c5	c5.81 Changed to "Copy to box c6.32"

Enhancement	c7	c7.2 Changed from c6.33 to c6.24"

Enhancement	c7	c7.6 Changed from c6.9+c6.21+c6.43+c6.55 to c6.5+c6.16+c6.30+c6.41
Enhancement - Relief claimed on a qualifying distribution AOR9
 
 	c23	Reintroduction of stage 23 - previously removed in error
	c9	New box c9.26a
	c9	c9.27 changed from c9.1 minus (c9.14 + c9.19 + c9.21 + c9.23 + c9.26) to c9.1 minus (c9.14 + c9.19 + c9.21 + c9.23 + c9.26 + c9.26a)
Version 5.1 changes 

Changes Highlighted in red

Amendment	Change log	c6.45 not changed so removed from log
Amendment	c6.50 and c6.51	Not changed, incorrect highlighting removed
Amendment	Change log	8.1/c8.7/c8.17/c8.19 entry in v6.0 log amended
Amendment	Change log	c5.81 changed to c5.82
Enhancement	c7	C7.2 Changed from c6.33 to c6.24"

Enhancement	c7	C7.6 Changed from c6.9+c6.21+c6.43+c6.55 to c6.5+c6.16+c6.30+c6.41

Version 5.2 changes

Changes Highlighted in red

Amendment	c6	c6.3 c6.4 c6.15 c6.36 c6.37 c6.38 c6.39 and c6.49 are no longer in use but  set to zero to accommodate an in year change
Version 5.3 changes

Changes Highlighted in red

Amendment	c6	C6.48 changed from 'lower of SR_band (£5,000) and c6.47 to 'lower of SR_band (£5,000) minus c6.14 and c6.47
Version 5.4 changes

Changes Highlighted in red

Amendment	c5	c5.3 changed from “c5.3 = c1.57” to “c5.3 = 4.63c”
Amendment	c5	c5.78 changed back “copy to c6.11” (had been changed to “copy to 6.7”)
Amendment	c5	c5.81 changed back to “copy to c6.23” (had been changed to “copy to c6.18”)
Amendment	c5	c5.82 changed back to “copy to c6.45” (had been changed to “copy to c6.32”)
Amendment	c5	c5.84 changed back to “copy to c6.35” (had been changed to “copy to c6.26”)
Amendment	c6	Text changed above c6.8 “Higher rate band & Basic rate band”
Amendment	c6	Text reinstated above c6.9 “Income in higher rate band”
Amendment	c6	New description added above c6.21 “Income in higher rate band”
Amendment	c6	New description added above c6.22 “Income in additional rate band”
Amendment	c6	Highlighting removed from text above c6.45 as no change
Amendment	c6	Highlighting removed from text above c6.51 as no change
Amendment	c6	Highlighting removed from text above c6.52 as no change
Amendment	c7	c7.2 changed back to “from c6.33” (had been changed to “from c6.24”)
Amendment	c12	c12.1 changed from “c9.41 minus c10.4” to “c9.40 minus c10.4”
Amendment	c22	c22.2 changed back from “lower of c6.31 and c22.1” to “lower of c6.44 and c22.1”
Amendment	c23	c23.1 changed back to “from c6.34” (stage 23 was reinstated but c23.1 had been changed to “from c6.25” 
Amendment	c23	c23.5 changed back to “from c6.33” (stage 23 was reinstated but c23.1 had been changed to “from c6.24”)
Amendment	c7	c7.6 changed from “c6.5+c6.16+c6.30+c6.41” to “c6.9+c6.21+c6.43+c6.55”
Amendment	c6	c6.55 Not changed, incorrect highlighting removed
Amendment	16	Correct brackets included for c16.30
Amendment	c6	Extra zero deleted at end of BR_band at c6.26, c6.6, c6.40 and c6.52
Amendment (for E version only)	Annex B	CGT51 is not zero or Null changed to CGT51 is not zero or Null or (box CGT18 is not zero or null)
Version 5.5 changes

Changes Highlighted in red

Amendment	c25	c25.51 to c25.55 reinstated as it was accidently deleted in v5.0
Version 5.6 changes

Changes Highlighted in red

Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions	c5	c5.48 changed from "lower of c5.1 minus (c5.5 + c5.9 + c5.20 + c5.6 + c5.10 + c5.21) and c5.34 minus ((c5.2 + HR_band (£118,000)) minus c4.74)" to "lower of c5.1 minus (c5.4 + c5.8 + c5.16 + c5.5 + c5.9 + c5.20 + c5.6 + c5.10 + c5.21) and c5.34 minus ((c5.2 + HR_band (£118,000)) minus c4.74)"
Amendment	c22	Change made in v5.4 not noted in log. c22.5 changed from "lower of c6.30 and c22.4", to "lower of c6.43 and c22.4".  
Amendment	c5	“lc5.1” changed to “c5.1”  
Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions
 
 
 
 
 	c5	c5.7, c5.8, c5.9 & c5.10 not in use
	c5	New boxes c5.34a, c5.34b, c5.34c & c5.34d
	c5	c5.45 changed from "lower of (c5.1 minus c5.44) and c5.10" to "lower of (c5.1 minus c5.44) and c5.34d"
	c5	c5.50 changed from "lower of (c5.1 minus (c5.47 + c5.49) and c5.9)" to "lower of (c5.1 minus (c5.47 + c5.49) and c5.34c)"
	c5	c5.63 changed from "lower of (c5.1 minus (c5.47 + c5.48 + c5.52 + c5.58 + c5.62) and c5.8)" to "lower of (c5.1 minus (c5.47 + c5.48 + c5.52 + c5.58 + c5.62) and c5.34b)"
	c5	Other calculation boxes referencing c5.8, c5.9 & c5.10 not changed as these 3 calculation boxes should now be returning 0 (zero)
Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions
 
 	c5	New box c5.48a "if c5.15 minus c4.79 > 0 (zero) /  c5.48a =  lower of c5.1 and c5.4 / else / c5.48a = 0 (zero) / end if"
	c5	New box c5.48b "lower of (c5.1 minus c5.47) and c5.5"
	c5	c5.49 changed from lower of ((c5.1 minus c5.47) and c5.5)" to " "larger of c5.48a and c5.48b "
Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions	c5	c5.55 changed from "2 x (c5.29 minus (c5.19 + c5.54))" to "2 x (c5.29 minus c5.54)"
Version 5.7 changes

Changes Highlighted in red

Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions
 
 	c5
Int £3,780, Div £378, Pension £10,196 - allowance was not reducing amount of interest	c5.60 changed from "lower of c5.4 and c5.59" to "lower of c5.4 minus c5.48a and c5.59"
	Changes to c5.48a,  c5.48b &  c5.49 caused BUG with allowances being used again against non-savings income already covered	c5.68a New "c5.1 minus (c5.47 + c5.52 + c5.48 + c5.58 + c5.65 + c5.66)"
		c5.69 changed from "c5.46 + c5.51 + c5.64" to "c5.46 + c5.51 + c5.64 + c5.68a"
Enhancement	Notes for printing conditions	L56 ‘Total-IT-NIC-due’ changed to ‘Total-tax-NIC-due’ to match HMRC requirements. (‘Total-IT-NIC-due is not defined anywhere within the document.)
Enhancement	SA302 layout section	L92 & L108 changed to reflect the update to the years.
Enhancement	Notes for printing conditions	L42 ‘Residency-Status-in-UK = STp’ changed to ‘pseudo box YPDTR = S’ for consistency with stage 8.
Enhancement	Notes for printing conditions	L93 printing condition added to determine when ‘Student Loan repayments (plan 01)/(plan 02) printed
Version 5.8 changes

Changes Highlighted in red

Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions 	c5
Int £2,000, Div £36,000, Emp £10,000 – the £11,000 allowance was all set against £10,000 non-savings	c5.62 changed from "lower of c5.4 and c5.61" to "lower of c5.4 minus c5.48a and c5.61"
Version 5.9 changes

Changes Highlighted in red

Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions
 
 	c5
 
 	New boxes c5.45a, 7 c5.45b & change to c5.46 from "lower of (c5.1 minus (c5.44 + c5.45) and c5.21" to "if c5.3 minus c5.1 < c5.2 / c5.46 = c5.45a / else / c5.46 = c5.45b"
		New boxes c5.50a, c5.50b, & c5.50c & change to c5.51 from "lower of (c5.1 minus (c5.47 + c5.49 + c5.50) and c5.20)" to "if c5.3 minus c5.1 < c5.2 / c5.51 = c5.50a / else / c5.51 = c5.50c"
		c5.56 changed from "If c5.53 larger than c5.55 and / c5.30 larger than c5.55 / c5.56 = c5.53 / else / c5.56 = 0 (zero)" to "If c5.53 larger than c5.55 and / c5.30 larger than c5.55 / c5.56 = c5.53 minus c5.48a / else / c5.56 = 0 (zero)"

Version 5.10 changes

Changes Highlighted in red

Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions 	c5
	c5.51 changed from "if c5.3 minus c5.1 < c5.2" to "if c5.3 minus c5.1 < SR_band (£5,000)"
Version 5.11 changes

Changes Highlighted in red

Incorrect log/highlighting	c6
	c6.25 incorrectly noted/highlighted as a change in v5.0
Incorrect log/highlighting	c6
	c6.47 incorrectly noted as a change in v5.0
	c5	c5.34d changed from “c53.4a minus (5.34b + c5.34c)” to “c5.34a minus (5.34b + c5.34c)”
Brackets included to clarify ordering and extra box (c5.15) removed	c5	c5.34b changed to “lower of c5.34a and
(c5.2 minus (c5.4 + c5.15 + c5.16 + c5.24 + c5.25))”
Brackets included to clarify ordering	c5	c5.34c changed to “lower of c5.34a minus c5.34b and
(HR band minus (c5.5 + c5.20 + c5.30))”
Brackets included to clarify ordering	c5	c5.45a changed to “lower of c5.21 and
(c5.11 minus (c4.79 + SR_band))”
Brackets included to clarify ordering	c5	c5.50a changed to “lower of c5.20 and
(c5.11 minus (c4.79 + SR_band + c5.46))
Brackets included to clarify ordering	c5	c5.50c changed to “lower of c5.50b and
(c5.11 minus (c4.79 + SR_band))”
	c5	c5.2 changed to BR_band + c4.59 and BR_band £32,000 added to notes column
	c4	Missing letter from box number – c4.46 changed to c4.2 + c4.4 + c4.26 + c4.27 + c4.28 + c4.32 + c4.33 + c4.35
	c4	c4.76 PSA_HR £500 added to notes
	c5	AR 0% heading added above c5.20a
	c11.3	Word “Minister” added above heading
	c12.20	Hanging “end if” removed
Brackets deleted to clarify ordering	c16	Extra brackets removed
	c12	c12.18 closing bracket added
Version 5.12 changes

Changes Highlighted in red

Enhancement - Class 4 for non-UK resident	c16
Exclusion 48 - if liable to income tax on UK profit that profit should be subject to Class 4 NIC	If statement at start of stage 16 changed to remove mention of non-resident calculation. 
Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions 
 
 
 
 
 
 	c5
Empt £10,000, Int £36,000 
 
 
 
 
 	c5.45b changed from "lower of c5.1 minus (c5.44 + c5.45 + c5.20c) and c5.21" to "lower of c5.45a and (c5.1 minus (c5.44 + c5.45 + c5.20c))"
		New c5.45c "lower of c5.21 and (c5.1 minus (c5.44 + c5.45 + c5.20c))"
		c5.46 changed from "…c5.46 = c5.45a else c5.46 = c5.45b…" to "…c5.46 = c5.45b else c5.46 = c5.45c…"
		c5.50b changed from "lower of c5.1 minus (c5.47 + c5.49 + c5.50) and c5.20" to "lower of c5.50a and (c5.1 minus (c5.44 + c5.45 + c5.49 + c5.50))"
		c5.50c changed from "lower of c5.50b and c5.11 minus (c4.79 + SR_band (£5,000)" to "lower of c5.20 and (c5.1 minus (c5.47 + c5.49 + c5.50))

		New c5.50d "lower of c5.50c and (c5.11 minus c4.79)"
		c5.51 changed from "…c5.51 = c5.50a else c5.51 = c5.50c..." to "…c5.51= c5.50b else c5.51 = c5.50d…"
Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 	c5
tc217 - the changes for ensuring allowances were allocated against non-savings to make full use of SR_band resulted in BUG for calculating if beneficial to transfer allcs to Dividends 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 	c5.48a deleted - removed from live fix requirements   
		c5.48b deleted - removed from live fix requirements   
		c5.49 changed from "larger of c5.48a and c5.48b" to "lower of (c5.1 minus c5.47) and c5.5"
		c5.56 changed from "…c5.56 = c5.53 minus c5.48a…" to "…c5.56 = c5.53"
		c5.58a New calculation box "lower of (c5.1 minus c5.58) and c5.4"  
		c5.58b New calculation box "if c5.15 minus c4.79 > 0 (zero) c5.58b = c5.58a else c5.58b = c5.49 end if"  
		c5.58c New calculation box "lower of (c5.1 minus (c5.47 + c5.58b) and c5.34c)"
		c5.58d New calculation box "c5.51 minus c5.58b"
		c5.58e New calculation box "if c5.15 minus c4.79 > 0 (zero) c5.58e = c5.58d else c5.58e = c5.51 end if"
		c5.58f New calculation box "c5.58b + c5.58c + c5.58e"
		c5.59 changed from "c5.1 minus (c5.47 + c5.48 +  c5.52 + c5.58)" to "c5.1 minus (c5.47 + c5.48 +  c5.58f + c5.58)"
		c5.63 changed from "lower of (c5.1 minus (c5.47 + c5.48 + c5.52 + c5.58 + c5.62) and c5.34b)" to "lower of (c5.1 minus (c5.47 + c5.48 + c5.58f + c5.58 + c5.62) and c5.34b)"
		c5.64 changed from "lower of (c5.1 minus (c5.47 + c5.48 + c5.52 + c5.58 + c5.62 + c5.63) and c5.16)" to "lower of (c5.1 minus (c5.47 + c5.48 + c5.58 + c5.58f + c5.62 + c5.63) and c5.16)"
		c5.66 changed from "lower of (c5.1 minus (c5.47 + c5.52 + c5.48 + c5.58 + c5.65) and c5.25)" to "lower of (c5.1 minus (c5.47 + c5.48 + c5.58 + c5.58f + c5.65) and c5.25)"
		c5.60 changed from "lower of c5.4 minus c5.48a and c5.59" to "lower of c5.4 minus c5.58b and c5.59"
		c5.61 changed from "larger of (c5.56 and c5.60" to "larger of (c5.56 minus c5.58b) and c5.60"
		c5.62 changed from "lower of c5.4 minus c5.48a and c5.61" to "lower of c5.4 minus c5.58b and c5.61"
		c5.67 changed from "c5.44 + c5.49 + c5.62" to "c5.44 + c5.58b + c5.62"
		c5.68 changed from "c5.45 + c5.50 + c5.63" to "c5.45 + c5.58c + c5.63"
		c5.69 changed from "c5.46 + c5.51 + c5.64 + c5.68a" to "c5.46 + c5.58d + c5.64 + c5.68a"
c5.69 = c5.46 + c5.58e + c5.64 + c5.68a
Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions 	c5
Gains £10,000 (no other income. C5.68a is there to ensure unused allowances are set against savings income to reduce amount in nil band and/or SR band. It now only withholds amount up to maximum of saving.	c5.68a changed from "lower of (c5.1 minus (c5.47 + c5.52 + c5.48 + c5.58 + c5.65 + c5.66) and c5.11)" to "lower of c5.1 minus (c5.47 + c5.48 + c5.58 + c5.58f + c5.65 + c5.66) and c5.11"
Personal Savings Allowance/Dividend Taxation Reform effect on ordering of allowances and deductions 
 	c5
Gains £50,000 Div UK £5,100 UK Pension £9,000. Now ensures allowances set against Gain band leaves £5,000 at dividend nil rate
 	c5.70 changed from "larger of (c5.1 minus (c5.67 + c5.68 + c5.69) and c5.48 + c5.58 + c5.66)" to "larger of (c5.1 minus (c5.67 + c5.68 + c5.69 + c5.41) and c5.48 + c5.58 + c5.66)"
		c5.73 changed from "c5.72 minus c5.40" to "larger of c5.1 minus (c5.67 + c5.68 + c5.69 + c5.70) and c5.72 minus c5.40"
Enhancement	c5	c5.1 changed - the relief is restricted at c4.4 so no need to restrict here as well.
Enhancement	c6
AOI4 = £12,000, AOI5 = 4	c6.51 changed (to mirror c6.17) from "lower of c6.45 and c6.50" to "lower of (c6.45 minus c6.48) and c6.50"
Enhancement - Relief claimed on a qualifying distribution AOR9	Annex A: Format SA302 style calculation	‘relief-on-qual-distn’ has been re-instated and calculation cell reference changed
	SA302 layout	Line 74 relating to ‘Relief on a qualifying distribution’ has not been re-instated
Version 5.13 changes

Changes Highlighted in red

Typo in requirements	c5
Box c5.50c – change log v6.11 correct but the requirements are incorrect – it should be c5.50c = lower of c5.20 and (c5.1 minus (c5.47 + c5.49 + c5.50))
Typo in requirements	c5
Box c5.69 – change log v6.11 correct but the requirements are incorrect – it should be c5.69 = c5.46 + c5.58e + c5.64 + c5.68a
Clarification of formula	c5
Box c5.73 – for clarification, it should be Larger of c5.1 minus (c5.67 + c5.68 + c5.69 + c5.70) and (c5.72 minus c5.40)
Clarification of formula 	c5
Box c5.20b for clarification, it should be lower of c5.11 minus (c5.15 + c5.16 + c5.19 + c5.20) and (c4.79 minus (c5.15 + c5.19))
Typo in requirements	c5
Box c5.58c – change log v6.11 correct but the requirements are incorrect – it should be c5.58c = lower of (c5.1 minus (c5.47 + c5.58b) and c5.34c)
Version 5.14 changes

Changes Highlighted in red

Typo in requirements	c5
Box c5.50c – this should not have been in the change log for v5.13 (and it should not have referred to ‘changes log v6.11’). There was no change.
Typo in requirements	c5
Box c5.69 – in changes log v5.13 it incorrectly referenced change log v6.11 instead of v5.13 and the change log was incorrect as well as the requirements – it should be c5.69 = c5.46 + c5.58e + c5.64 + c5.68a
Typo in requirements	c5
Box c5.58c – this should not have been in the change log for v5.13 (and it should not have referred to ‘changes log v6.11’). There was no change.
Version 5.15 changes

Changes Highlighted in red

Enhancement	c5
tc198 was incorrectly showing £32,000 pay at basic rate	c5.55 changed to allow a negative (also changes to c5.60 & c5.62)
Enhancement - ensure reliefs and allowances allocated correctly to allow Savings Starting rate available	c5
c5.56a New calculation box "lower of c5.1 and c5.4"
	changed in v5.18	c5.56b New calculation box "if c5.15 minus c4.79 > 0 (zero), c5.56b = c5.56a, else, c5.56b = c5.44, end if"
	changed in v5.18	c5.56c New calculation box "c5.1 minus c5.56b"
		c5.57a New calculation box "lower of (c5.1 minus (c5.47 + c5.48 + c5.52 + c5.57) and c5.30)"
	changed in v5.18	c5.58 changed from "lower of (c5.1 minus (c5.47 + c5.48 + c5.52 + c5.57) and c5.30)" to "lower of c5.56b and c5.57a"
		c5.58a changed to not in use
		c5.58b changed to not in use
	changed in v5.18	c5.58c changed from "lower of (c5.1 minus (c5.47 + c5.58b) and c5.34c)" to "lower of (c5.1 minus (c5.47 + c5.56b) and c5.34c)"
	changed in v5.18	c5.58d changed from "c5.51 minus c5.58b" to "c5.51 minus c5.56b"
	changed in v5.18	c5.58f changed from "c5.58b + c5.58c + c5.58e" to "c5.56b + c5.58c + c5.58e"
	changed in v5.18	c5.60 changed from "lower of c5.4 minus c5.58b and c5.59" to "lower of ((c5.4 + c5.5) minus c5.56b) and c5.59"
	changed in v5.18	c5.61 changed from "larger of (c5.56 minus c5.58b) and c5.60" to "larger of (c5.56 minus c5.56b) and c5.60"
	changed in v5.18	c5.62 changed from "lower of (c5.4 minus c5.58b) and c5.61" to "lower of ((c5.4 + c5.5) minus c5.56b) and c5.61"
	changed in v5.18	c5.67 changed from "c5.44 + c5.58b + c5.62" to "c5.44 + c5.56b + c5.62"
Version 5.16 changes

Changes Highlighted in red

Enhancement – incorrect calculation formula	c6
c6.42 changed from "HR_band minus (c6.9 + c6.21 + c6.33)" to "HR_band minus (c6.9 + c6.21 + c6.29)"
Version 5.17 changes

Changes Highlighted in red

Enhancement – incorrect calculation formula	c5 
changed in v5.18	c5.56b changed from "if c5.15 minus c4.79 > 0 (zero), c5.56b = c5.56a, else, c5.56b = c5.44, end if" to "if c5.15 minus c4.79 > 0 (zero), c5.56b = c5.56a, else, c5.56b = c5.49, end if"
Enhancement – incorrect calculation formula	c5 
changed in v5.18	c5.58 changed from "lower of c5.56b and c5.57a" to "lower of c5.56c and c5.57a"
Version 5.18 changes

Changes Highlighted in red

Enhancement	c5
c5.54a New calculation box "lower of (((c5.3 + c5.11 + c5.24 + c5.25 + c5.29 + c5.30) minus c5.1) minus (BR_band (£32,000) + c4.75)) and c5.29"
		c5.55 changed from "2 x (c5.29 minus c5.54)" to "2 x (c5.54a minus c5.54)"
		c5.56 changed from "If c5.53 larger than c5.55 and, c5.30 larger than c5.55, c5.56 = c5.53, else, c5.56 = 0 (zero)" to "If c5.53 larger than c5.55 and, c5.30 larger than c5.55, c5.56 = c5.53, else, c5.56 = 0 (zero)"
		c5.56a changed from "lower of c5.1 and c5.4" to "(c5.53 minus c5.56) x DivHR_rate 32.5%)"
		c5.56b changed from "if c5.15 minus c4.79 > 0 (zero), c5.56b = c5.56a, else, c5.56b = c5.49, end if" to "lower of SR_band (£5,000) and ((c5.1 + SR_band (£5,000)) minus c5.3)"
		c5.56c changed from "c5.1 minus c5.56b" to "lower of SR_band (£5,000) and (c5.49 + SR_band (£5,000)) minus c5.4"
		c5.56d New calculation box "(c5.56b minus c5.56c) x (2 x BR_rate (2 x 20%)"
		c5.56e New calculation box "if c5.56d > c5.56a, c5.56e = lower of c5.1 and c5.4, else, c5.56e = c5.49, end if"
		c5.56f New calculation box "c5.1 minus c5.56e"
		c5.58 changed from "lower of c5.56c and c5.57a" to "lower of c5.56f and c5.57a"
		c5.58c changed from "lower of (c5.1 minus (c5.47 + c5.56b) and c5.34c)" to "lower of (c5.1 minus (c5.47 + c5.48 + c5.56e + c5.58) and c5.34c)"
		c5.58d changed from "c5.51 minus c5.56b" to "Set to zero"
		c5.58e changed from "if c5.15 minus c4.79 > 0 (zero), c5.58e = c5.58d, else, c5.58e = c5.51, end if" to "lower of (c5.1 minus (c5.47 + c5.48 + c5.56e + c5.58 + c5.58c) and c5.20"
		c5.58f changed from "c5.56b + c5.58c + c5.58e" to "c5.56e + c5.58c + c5.58e"
		c5.60 changed from "lower of ((c5.4 + c5.5) minus c5.56b) and c5.59" to "lower of ((c5.4 + c5.5) minus c5.56e) and c5.59"
		c5.61 changed from "larger of (c5.56 minus c5.56b) and c5.60" to "larger of (c5.56 minus c5.56e) and c5.60"
		c5.62 changed from "lower of ((c5.4 + c5.5) minus c5.56b) and c5.61" to "lower of ((c5.4 + c5.5) minus c5.56e) and c5.61"
		c5.67 changed from "c5.44 + c5.56b + c5.62" to "c5.44 + c5.56e + c5.62"
		c6.12 changed from "(c5.1 + SR_band (£5,000)) minus (c5.3 + c5.42)" to "SR_band (£5,000) minus c6.1"
		c6.46 changed from "(c5.1 + SR_band (£5,000)) minus (c5.3 + c5.42 + c5.11 + c5.22 + c5.7 + c5.43)" to "SR_band (£5,000) minus (c6.1 + c6.11 + c6.23 + c6.35)"
 
Overview of the tax calculation process 

The main body of the calculation is contained within stages 1 to 12. Stages 14 to 29 may be required, depending on the taxpayer’s circumstances.  They are cross-referenced with various points within stages 1 to 12. Only the end result of processing in stages 14 to 28 (13 is not currently used) are used within stages 1 to 12 but all boxes leading to the end result need to be calculated. 

For example: c9.16 requires a figure from box c15.20 or c15.21. To calculate box c15.20 or c15.21 not only requires calculating c15.1 onwards but also c14.1 through c14.6, as these are referenced in c15.6 and c15.7.

The annexes contain associated processing that is dependent on the calculation stages.

Note where a box contains all instances then the rounding should be done on each instances.

set calculation type = resident
Calculate boxes c1.1 through c12.21
resident-result = c12.18
If NON UK RESIDENT (box NRD1 = Y)  
set calculation type = non-resident
Calculate boxes c91.1 through c91.35
Calculate boxes c4.64 through c12.21
non-resident-result = c12.18
If resident-result < non-resident-result
set calculation type = resident
Calculate boxes c1.1 through c12.21
end if
end if

Format SA302 and view screens (see Annex A)

If a digital Marriage Allowance transfer claim is in place and they are a Transferor or a Recipient MAT_OUT or MAT_IN amount will be set and c4.68 or c9.20 will be completed with the MAT amount unless the customer is not entitled to transfer or receive the allowance because they are liable to .tax above the Basic Rate or are claiming the Married Couple’s Allowance.

For Class 2 there are no boxes on the SA Return. A pseudo box or boxes will be required to populate c16.32. The NIC API will supply one figure for Class 2 based on the information at that time. You may decide it is more efficient to centralise and have one box for the Class 2 amount to be populated than have multiple pseudo boxes. See Stage 16. Where the SA110 is completed the amount should be added to CAL 4.1.

For Class 4 there are no boxes for Class 1 on the Return for the Reg 100 Class 4 calculation. 
Pseudo Return boxes will be required to populate c16.20 and c16.21.  
 
Tax rates, rate bands and parameters 

Grossing up factors		Fraction	Decimal
Dividend net to gross factor	divs_gross	100/92.5	1.08108108108109
Savings net to gross factor	savings_gross	100/80	1.25
Non-savings net to gross factor	NS_gross	100/80	1.25
Non-savings net to gross factor at old BR rate	Gross_By_22	100/78	1.28205128205128
Higher rate net to gross factor	HR_gross	100/60	1.66666666666667
Higher dividend rate net to gross factor	HDR_gross	100/67.5	1.48148148148148
Non-savings net to gross old factor	Gross_By_22	100/78	1.28205128205128
Trust rate net to gross factor	trust_gross	100/55	1.81818181818182
Trust dividend rate net to gross factor	trust_div_gross	100/61.9	1.61550888529888
Gift aid	Gift_aid	100/80	1.25

Employees’ rate between threshold and upper earnings limit	NIC1_rate	0.12
Class 4 rate between lower profits limit and upper profits	NIC_rate	0.09
Class 4 rate above upper profits limit	NIC_supp_rate	0.02
Student Loan deduction rate	Sloan_rate	0.09
Starting rate for savings	SR_rate	0.00
Savings Nil rate	SNil_rate	0.00
Old Basic rate 	OLD_BR	0.22
Basic rate UK rate for England, Wales and Northern Ireland	BR_rate	0.20
Higher rate UK rate for England, Wales and Northern Ireland	HR_rate	0.40
Additional Rate UK rate for England, Wales and Northern Ireland	AHR_rate	0.45
Basic rate UK rate for Scotland	SBR_rate	0.20
Higher rate UK rate for Scotland	SHR_rate	0.40
Additional rate UK rate for Scotland	SAHR_Rate 	0.45
Service Benefit Rate (Minister of Religion)	SB_rate	0.10
Lower Dividend rate 	Ldiv_rate	0.10
Higher Dividend rate	Hdiv_rate	0.325
Additional Dividend rate	AHdiv_rate	0.375
Dividend Nil rate	DivNil_rate	0.00
Dividend Investment rate	DivBR_rate	0.075
Dividend Higher rate	DivHR_rate	0.325
Dividend Additional rate	DivAR_rate	0.381
Venture Capital Trust shares rate	VCT_rate	0.30
Enterprise Investment Scheme rate	EIS_rate	0.30
Seed Enterprise Investment Scheme Relief rate	SEIS_rate	0.5
Community Investment Tax Relief rate	CITR_rate	0.05
Social Investment Tax Relief rate	SITR_rate	0.30
Seed Enterprise Investment Scheme Relief rate	SEIS_rate	0.50
Reducing Allowances rate for MCA, Alimony etc.	A_rate	0.10
Capital Gains at Entrepreneurs rate 	ER_CGT_rate	0.10
Capital Gains Lower rate	Lower_CGT_rate	0.10
Capital Gains Higher rate 	Upper_CGT_rate	0.20
Capital Gains Lower rate Residential Property & Carried Interest	lower_CGT_rate_RP_CI	0.18
Capital Gains Higher rate Residential Property & Carried Interest	upper_CGT_rate_RP_CI	0.28

Rate Bands
Savings Starting band limit	SR_band	5,000
Band between Savings rate & Basic rate 	SBR_band	27,000
Basic rate band	BR_band	32,000
Higher rate threshold	HR_threshold 	32,000
Band between Basic rate & Higher rate 	HR_band 	118,000
Additional rate band 	AHR_band  	150,000
Class 2 amount, per week	NIC2_weekamt	2.80
Class 2 annual limit	NIC2_annual_limit	148.40
Class 2 amount, per week for Share fishermen	NIC2SF_weekamt	3.45
Class 2 annual limit for Share fishermen	NIC2SF_annual_limit	182.85
Class 2 NIC small profit threshold	NIC2_SPT	5,965.00
Class 4 NIC upper profit limit	NIC_UEL	43,000
Class 4 NIC lower profit limit	NIC_LEL	8,060
NIC rate band	NIC_Band	34,940
Max Class 4 NIC charge	Max_NIC	3,144.60
Student Loan Threshold Plan 1	SL_limit1	17,495
Student Loan Threshold Plan 2	SL_limit2	21,000
Student Loan Unearned Income Threshold	SL_UIT	2000

Allowances		
Personal Allowance	P_A	11,000
Lower Age Allowance	L_AA	10,600
Higher Age Allowance	H_AA	10,660
Age Allowance Income limit	AA_limit	27,700
Tapered PA limit 	PA_taper_limit	100,000
Personal Allowance Income limit excess	AA_excess	0.5
Personal Savings Allowance Basic Rate	PSA_BR	1,000
Personal Savings Allowance Higher Rate	PSA_HR	500
Personal Savings Allowance Additional Higher Rate	PSA_AHR	0
Dividend Allowance	DA	5,000
Transferable personal allowance	T_P_A	1,100
Minimum MCA	MCA	3,220
Half MCA	MCA_2	1,610
Higher MCA	H_MCA	8,355
Blind Person's Allowance	BPA	2,290
Maintenance & Alimony	SMP	3,220
Capital Gains annual exempt amount	CG_exempt	11,100
Deductions Cap	Dedn_cap	50,000
Deductions taper	Dedn_taper	0.25


Pension Charges		
LTA charge - Lump sum	LTA_lump	0.55
LTA charge - Pension	LTA_pension	0.25
Annual Allowance charge threshold	Pen_AA_limit	40,000
Money Purchase Annual Allowance charge threshold (lower allowance)	Pen_MPAA_limit	10,000
Annual Allowance charge Rate	Pen_AA_rate	0.40
Unauthorised payments 	Pen_Upayts	0.40
Unauthorised payments -surcharge	Upayts_surcharge	0.55
Short service refund Lower Rate	SSR_lower_rate	0.2
Short service refund Lower Rate band	SSR_lower_band	20,000
Short service refund charge Higher Rate	SSR_higher_rate	0.50
Special lump sum death benefit Rate	SLSDB_rate	0.45
Minimum Relevant Earnings	Min-relevant-earns	3,600

Dates
Year taxpayer is 65	A65_year	1948
Year taxpayer is 75	A75_year	1938
Year MCA due	MCA_year	1935

Misc
POA threshold	POA_limit	1,000
Resident Non-domicile Lower charge	Res_non_dom_ch	30,000
Resident Non-domicile Higher  charge		Res_non_dom_High_ch	60,000
Resident Non-domicile Additional charge	RBC_Additional_ch	90,000
Non-domicile remittance basis allowance limit	ND_limit	2,000
Coded out limit	Coded_out_limit	3,000
Child Benefit Higher Rate Threshold	CBC_HR_threshold	50,000
Child Benefit Taper	CBC_taper	0.01



Key to Tax Return box numbers

Each Tax Return box has been given a section or page ID (ID used in Calculation). The ID plus the box number from that section or page is used to identify the Return box used in the Tax Calculation.

Return form number	ID used in Calculation	Section /Schedule name
SA100	SLR	Student Loan Repayments 
	INC	Income
	REL	Tax Reliefs
	CBC	High income Child Benefit charge
	FIN	Finishing your Tax Return
	MAT	Marriage Allowance Transfer
SA101	AOI	Additional other income
	ASE	Additional Share Schemes (etc)
	AOR	Additional tax reliefs
	MCA	Married couples allowance
	AIL	Income Tax losses (etc)
SA102	EMP	Employment
SA102M	MOR	Minister of Religion
SA103S	SSE	Short Self employment
SA103F	FSE	Full Self employment
SA103L	LUN	Lloyds Underwriters
SA104S	SPS	Short Partnership pages
SA104F	FPS	Full Partnership pages
SA105	PRO	UK Property
SA106	FOR	Foreign
SA107	TRU	Trusts
SA108	CGT	Capital Gains 
SA109	NRD	Residence, Remittance Basis etc.
SA110	CAL	Tax Calculation
 
Stage 1: Collect Non Savings income (c1 boxes)
If any box in this stage is negative substitute zero
£down – truncate pence to leave integer pounds
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)

 Employment
c1.1	Total all instances (EMP1 + EMP3)	£down (for each EMP)	
c1.2	Total all instances (MOR38)	£down (for each MOR)	
c1.3	ASE3 + ASE4	£down	
c1.4	c1.1 + c1.2 + c1.3		

Employment benefits
c1.5	Total all instances (EMP9 to EMP16)	£down (for each EMP)	

Complete c1.5A to c1.5C for each instance of employment
c1.5A	(EMP1 + EMP3) + (EMP9 to EMP16)	£down	
c1.5B	Total EMP17 to EMP20	£up	
c1.5C	Smaller of c1.5A and c1.5B		

Employment expenses
c1.6	Sum of all boxes c1.5C	£up	
c1.7	Total all boxes ASE11 to ASE13	£up	
c1.8	c1.6 + c1.7		

Total from all employments
c1.9	(c1.4 + c1.5)  minus c1.8		

Share Schemes
c1.10	from ASE1	£down	

 Profits from Self-Employment (as a sole trader)
Losses brought forward
 
c1.11	Total all instances (SSE29) 	£up (for each SSE)	

Total taxable profits without losses 
c1.12	Total all instances (SSE31)	£down (for each SSE) 	
c1.13	c1.12 + c1.11		

Losses brought forward 
c1.14	Total all instances (FSE74)	£up (for each FSE)	

Total taxable profits without losses 
c1.15	Total all instances (FSE76)	£down (for each FSE)	
c1.16	c1.15 + c1.14		

Total from self-employment 
c1.17	c1.13 + c1.16		
 

Lloyds Underwriter
Losses brought forward 
c1.18	From LUN51	£up	
 
Total taxable profits without losses 
c1.19	From LUN52	£down	
c1.20	c1.19 + c1.18		

 Profit from partnerships  
Losses brought forward 
c1.21	Total all instances (SPS17)	£up (for each SPS) 	

Share of total taxable profits without losses 
c1.22	Total all instances (SPS20)	£down (for each SPS)	
c1.23	c1.22 + c1.21		

Losses brought forward
c1.24	Total all instances (FPS17 + FPS38 + FPS47 + FPS58) 	£up (for each FPS)	

 
Share of total taxable profits without losses
c1.25	Total all instances (FPS76)	£down (for each FPS)	
c1.26	C1.25 + c1.24		

Profit from partnerships minus losses brought forward
c1.27	c1.23 + c1.26		

Profit from UK land and property
Furnished holiday lettings
Losses brought forward used against this year’s profits 
c1.28	Total all instances (lower of PRO13 and PRO14)	£up (for each PRO)	

Taxable profit for the year net of losses 
c1.29	Total all instances (PRO15)	£down (for each PRO)	
c1.30	c1.29 + c1.28		

Property income
Losses brought forward used against this year's profits 
c1.31	lower of PRO38 and PRO39	£up	

Taxable profit for the year net of losses
c1.32	PRO40	£down	
c1.33	c1.32 + c1.31		

 Profit from UK land and property
c1.34	c1.30 + c1.33		

Foreign income
Dividends + other income + Gains + benefit
c1.35	FOR9 + FOR13 + FOR41 + FOR42	£down	

Losses brought forward
c1.36	from FOR26	£up	


Foreign Income net of losses
c1.37	From FOR30	£down	
c1.38	From FOR31	£up	
c1.39	From FOR32	£up	
c1.40	C1.37 + c1.36 minus (c1.38 + c1.39)		

If Remittance Basis Claim
Savings & Dividends
If NRD28 = Y
c1.41	From INC6	£down	
c1.42	from FOR4	£down	
c1.43	from FOR7	£down	
c1.43	from FOR6	£down	
else c1.41 to c1.43 = 0
                        end if

c1.44	c1.41 + c1.42 + c1.43		

c1.45	(TRU3 + TRU7 + TRU16) x NS_gross	£down	Boxes (TRU3 + TRU7 + TRU16) x (100/80)

Trusts and estates
c1.46	TRU1 x trust_gross	£down	Box (TRU1 x 100/55
c1.47	TRU10 x trust_gross	£down	Box TRU10) x 100/55
c1.48	from TRU22	£down	
c1.49	TRU20 x Gross_By_22	£down	TRU20 x 100/78
c1.50	from TRU13	£down	

 
c1.51	c1.45 + c1.46 + c1.47 + c1.48 + c1.49 + c1.50		

UK pensions and state benefits 
c1.52	INC8 + INC11 + INC13 + INC15 + INC16	£down	
 
 
Other income 
c1.53	INC17 minus INC18	£down	
c1.54	from INC20	£down	
c1.55	From AIL1	£up	
 
c1.56	(C1.53 + c1.54) minus c1.55		
 
Total non-savings Income 
c1.57	c1.9 + c1.10 + c1.17 + c1.20 + c1.27 + c1.34 + c1.35 + c1.40 + c1.44 + c1.51 + c1.52 + c1.56		
 
Lump sum payments 
c1.58	from ASE5	£down	
 
Stage 2: Collect income from Savings (not dividends) (c2 boxes)
If any box in this stage is negative substitute zero
£down – truncate pence to leave integer pounds

Partnerships 

Your share of untaxed interest etc
c2.1	Total all instances (SPS28) 	£down (for each SPS)	

Total untaxed savings income taxable at 20% (box 30 + box 34)
+ Taxed income taxable at 20% (box 71 minus box 72)
c2.2	Total all instances (FPS35 + FPS73)	£down (for each FPS)	

c2.3	C2.1 + c2.2		

Foreign income

Tax treated as paid (grossed up)
c2.4	FOR45 divided by BR_rate	£down	box FOR45  x 100/20
 
Lower of Gains on foreign life insurance policies and Tax treated as paid (grossed up)  
 
c2.5	Lower of FOR43 and c2.4	£down	add to c3.16
 
Amount of Gains on foreign life insurance policies where no tax treated as paid 
c2.6	If FOR43 minus c2.5  > 0 then
	c2.6 = FOR43 minus c2.5
else
	c2.6 = 0 (zero)
end if	£down	
 
If No Remittance Basis Claim 
Interest and other income from overseas savings  
c2.7	If NRD28 = N then
	c2.7 = FOR4 
else
	c2.7 = 0 (zero)
end if	£down	

Untaxed foreign interest
c2.8	From INC3	£down	
c2.9	c2.6 + c2.7 + c2.8		

Trusts and estates

Net amount of savings income – after tax taken off
+ Net amount of savings income taxed at basic rate
+ Savings income – after tax taken off
c2.10	(TRU4 + TRU8 + TRU17 ) x savings_gross	£down	Boxes (TRU4 + TRU8+TRU17)
 x 100/80

Net amount of savings income taxed at trust rate
c2.11	TRU11 x trust_gross	£down	Box TRU11 x 100/55
c2.12	from TRU14	£down	

c2.13	c2.10 + c2.11 + c2.12		

Savings Interest received

Taxed UK interest etc
c2.14	from INC1 x savings_gross	£down	Box INC1  x 100/80

Untaxed UK interest etc
c2.15	from INC2	£down	

Interest from gilt-edged and other UK securities
c2.16	from AOI3	£down	

Total interest from UK banks and building societies
c2.17	c2.14 + c2.15 + c2.16		

Gains on life insurance policies etc.
UK life insurance policy etc gains where no tax was treated as paid
+ UK life insurance policy etc gains from voided ISAs
c2.18	AOI6 + AOI8	£down	

Total Savings income and gains from life policies etc. (not dividends)
c2.19	c2.3 + c2.9 + c2.13 + c2.17 + c2.18 		

 
Stage 3: Collect income from Dividends/ Gains/Non Savings with notional tax (c3 boxes)
If any box in this stage is negative substitute zero
£down – truncate pence to leave integer pounds	
Partnerships dividends 
c3.1	Total all instances (FPS70)	£down	

Foreign dividends
c3.2	from FOR11	£down	

If No Remittance Basis Claim 
If NRD28 = N then
c3.3	From INC6 	£down	
c3.4	from FOR7	£down	
c3.4	from FOR6	£down	
Else
C3.3 to c3.4 = 0 (zero)
end if

Total Foreign dividends
c3.5	c3.2 + c3.3 + c3.4 		

Trust and estates 
Trust dividend income
c3.6	(TRU5 + TRU9) x divs_gross (100/92.5)	£down	
c3.7	TRU18 x divs_gross (100/92.5)	£down	
c3.8	TRU12 x trust_div_gross (100/61.9)	£down	

Total Trust and estates dividends
c3.9	c3.6+ c3.7 + c3.8		

Dividends from UK companies
c3.10	From INC4 	£down	
c3.11	From INC5	£down	
c3.12	from AOI12	£down	
c3.13	from AOI13	£down	

Total dividends from UK companies
c3.14	c3.10 + c3.11 + c3.12 + c3.13 		

Total Dividend Income
c3.15	c3.1 + c3.5 + c3.9 + c3.14		

Foreign Gains on life insurance policies etc.
c3.16	from c2.5		

Gains on life insurance policies etc.
c3.17	from AOI4	£down	

Total Gains on life insurance policies etc.
c3.18	c3.16 + c3.17 		

Trust non-savings income etc. with notional tax
c3.19	TRU19 x savings_gross	£down	TRU19 x 100/80
c3.20	from TRU2	£down	



Total Income
c3.21	c1.57 + c1.58 + c2.19 + c3.15 + c3.18 + c3.19 + c3.20		

Calculate miscellaneous values
Double Taxation Agreement Income 

Amount of Double Taxation Agreement income for which partial relief is claimed
c3.22	from NRD20	£down	

Total Income + DTA Income
c3.23	c3.21 + c3.22		

plus Payroll Giving
c3.24	from AIL6	£down	
minus Pension payments
c3.25	From REL1 + REL2 + REL3 + REL4	£up	
Adjusted Total Income used for calculating the limit on Relief
c3.26	(c3.23 + c3.24) minus c3.25		
 
Stage 4: Calculate Income tax reliefs and allowances
If any box in this stage is negative substitute zero unless otherwise stated
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)

Income Tax Reliefs

Share Loss Relief
Capital Gains	
Share loss relief used against income
Relief subject to Limit
c4.1	From CGT41	£up	

Share loss relief to which Enterprise Investment Scheme/
Seed Enterprise Investment Scheme relief is attributable
                                       Less exclusions
c4.2	From CGT42	£up	

Relief Limited to £50,000, or if more 25% of adjusted income 
c4.3	c4.1 minus c4.2 		

Payments to trade unions or police organisations.
Trade Union or friendly society death benefit payments
                                         Relief not subject to Limit
c4.4	If calculation type = non-resident
c4.4 = 0 (zero)
else
c4.4=AOR8
end if	£up	

Trading loss relief for sole traders and partnerships
Sole Traders
Loss brought forward from earlier years 
set off against this year’s profits
                  Relief Limited to £50,000, or if more 25% of adjusted income                   
c4.5	From c1.11		Total all instances (SSE29) 

Loss from this year set off against other income
Relief Limited to £50,000, or if more 25% of adjusted income                   
c4.6	Total all instances (SSE33)	£up For each SSE	
 
Loss brought forward from earlier years
set off against this year’s profit
		Relief Limited to £50,000, or if more 25% of adjusted income     
c4.7	From c1.14		Total all instances (FSE74) 
 
		Relief subject to  Limit
Loss from this tax year 
 
c4.8	Total all instances (FSE78)	£up For each FSE
	
 
		Less exclusions 
Business Premises  Renovation Allowance
 
c4.9	Total all instances (FSE54)	£up For each FSE	

Overlap relief used this year
c4.10	Total all instances (FSE69)	£up For each FSE	
 
Relief Limited to £50,000, or if more 25% of adjusted income 
 
Capped & uncapped Relief element of c4.8
 
c4.11	C4.8 minus (c4.9 + c4.10)		
 
Relief not subject to limit 
c4.12	smaller of c4.8 and (c4.9 + c4.10)		

Partnerships
Loss brought forward from earlier years set off against this year’s profit
Relief not subject to limit 
c4.13	From c1.21		Total all instances (SPS17)

 
Relief  subject to Limit
Loss from this tax year
 
c4.14	Total all instances (SPS22)	£up For each SPS	

Less exclusions
Business Premises Renovation Allowance
c4.15	Total all instances (SPS15)	£up For each SPS	

Overlap relief used this year
c4.16	Total all instances (SPS13)	£up For each SPS	

Relief Limited to £50,000, or if more 25% of adjusted income
Capped & uncapped Relief element of c4.14
c4.17	C4.14 minus (c4.15 + c4.16)		

Relief not subject to Limit
c4.18	Smaller of c4.14 and (c4.15 + c4.16)		

Loss brought forward from earlier year
Set off against this year’s profits
Relief Limited to £50,000, or if more 25% of adjusted income 
c4.19	From c1.24		Total all instances (FPS17 + FPS38 + FPS47 + FPS58)  

Losses from this tax year set off against other income 
Relief subject to Limit
c4.20	Total all instances (FPS22 + FPS39)	£up For each FPS	

Business Premises Renovation Allowance
Less exclusions
c4.21	Total all instances (FPS15)	£up For each FPS	

Overlap relief used this year
Less exclusions
c4.22	Total all instances (FPS13)	£up For each FPS	

Capped & uncapped Relief element of c4.20
Relief Limited to £50,000, or if more 25% of adjusted income 
c4.23	C4.20 minus (c4.21 + c4.22)		

Relief not subject to Limit
c4.24	Smaller of c4.20 and (c4.21 + c4.22)		

Totals for trading loss relief for sole traders and partnerships
Relief Limited to £50,000, or if more 25% of adjusted income 
c4.25	c4.6 + c4.11 + c4.17 + c4.23 		

Relief not subject to Limit
c4.26	c4.5 + c4.7 + c4.12 + c4.13 + c4.18 + c4.19 + c4.24		

Land & property
Loss brought forward used against this year’s profits
Relief not subject to Limit
c4.27	From c1.28		Total all instances (lower of PRO13 and PRO14)

Loss brought forward used against this year’s profits
Relief not subject to Limit
c4.28	From c1.31		Lower of PRO38 and PRO39

Relief subject to Limit
Loss set off against total income
c4.29	from PRO42	£up	

Less exclusions
Business Premises Renovation Allowance
c4.30	From PRO33	£up	
Relief Limited to £50,000, or if more 25% of adjusted income
Capped Relief element of c4.29
c4.31	C4.29 minus c4.30 		

Relief not subject to Limit
c4.32	Smaller of c4.29 and c4.30		

Foreign Property
Total loss brought forward from earlier years
Relief not subject to Limit
c4.33	c1.36 minus (c1.38 + c1.39)	£up	

Loss set against total income
Relief Limited to £50,000, or if more 25% of adjusted income 
c4.34	from FOR31	£up	

Lloyd’s Underwriters
Lloyd’s losses brought forward from earlier years
Used against this year’s profits
Relief Limited to £50,000, or if more 25% of adjusted income 
c4.35	From c1.18		from LUN51

Loss set off against other income
Relief Limited to £50,000, or if more 25% of adjusted income 
c4.36	from LUN56	£up	

Other tax reliefs
Post cessation trade relief and certain other losses
Relief Limited to £50,000, or if more 25% of adjusted income 
c4.37	from AOR6	£up	

Loan Interest
Qualifying loan interest payable in the year
Relief Limited to £50,000, or if more 25% of adjusted income 
c4.38	from AOR5	£up	

Total Relief
c4.39	C4.1 + C4.4 + C4.5 + c4.6 + c4.7 + c4.8 + c4.13 + c4.14 + c4.19 + c4.20 + c4.27 + c4.28 + c4.29 + c4.33 + c4.34 + c4.35 + c4.36 + c4.37 + c4.38		

Relief amount limited to £50,000, or if more 25% of adjusted income 
Relief amount subject to limit
c4.40	c4.3  + c4.25 + c4.31 + c4.34 + c4.36 + c4.37 + c4.38		

Adjusted Total Income used for calculating the limit 
Relief amount limited to £50,000, or if more 25% of adjusted income 
c4.41	from c3.26		
c4.42	c4.41 x Dedn_taper	£up	c4.41 x 25%

Limit on Relief Deduction Cap 
Relief amount limited to £50,000, or if more 25% of adjusted income 
c4.43	Dedn_cap		Dedn_cap = £50,000
c4.44	larger of c4.42 and c4.43		

Capped Relief Limit
c4.45	Lower of c4.40 and c4.44		

Uncapped Relief
c4.46	c4.2 + c4.4 + c4.26 + c4.27 + c4.28 + c4.32 + c4.33 + c4.35			V5.11

Total allowable relief 
Relief amount limited to £50,000, or if more 25% of adjusted income 

c4.47	c4.45 + c4.46		

Pension Payments paid gross without tax relief
c4.48	REL2 + REL3 + REL4	£up	

Gift of qualifying investments & real property to charities
c4.49	REL9 + REL10	£up	Copy to c17.7

Annual payments
c4.50	From AOR4	£up	
c4.51	C4.50 x NS_gross	£up	C4.50 x 100/80

Lower of
Foreign tax for which FTCR not claimed
c4.52	From TRU24	£up	

& Trusts and estates Income
c4.53	c1.51 + c2.13 + c3.9 + c3.19 + 3.20		

c4.54	Lower of c4.52 and c4.53	£up	

Net Income
Used for calculating the election to transfer personal allowance
c4.55	C3.23 minus (c4.47 + c4.48 + c4.49 + c4.51 + c4.54)		

Deduct
Gift Aid
c4.56	(REL5 minus REL7) + REL8 	£up	

c4.57	C4.56 x gift_aid	£up	c4.56 x 100/80 Copy to c9.32

Pension payments made net (grossed up)
c4.58	From REL1	£up	

Amount for Extending Basic Rate Band
c4.59	C4.57 + c4.58		

c4.60	Box not used		

Add back
Trade Union or friendly society death benefit payments
c4.61	From AOR8	£up	

Deductions and additions
c4.62	C4.59 minus c4.61		This box can be negative

Adjusted Net Income
Adjusted Total Income minus Reliefs
c4.63	C4.55 minus c4.62		Copy to  c14.1 and
Copy to c15.2, and copy to box c28.7

c4.63a	from c1.57			V5.0
c4.63b	c4.5 + c4.7 + c4.13 + c4.19 + c4.27 + c4.28 + c4.33 + c4.35			V5.0
c4.63c	c4.63a minus c4.63b		copy to box c5.3	V5.0


Personal allowances
If (box_NRD28 = Y and box_NRD29 = N and box_NRD16 = N)
Or (box_NRD1 = Y and box_NRD15 = N and box_NRD16 = N)   
Or calculation type = non-resident
Set boxes c4.64 to c4.69 to zero
Else
Personal allowance 
c4.64	from c14.6		

Blind person’s allowance
c4.65	If REL13 = Y
c4.65 = BPA
else
c4.65 = 0 (zero)
end if		BPA = £2,290

Blind person’s surplus allowance from spouse
c4.66	from CAL12	£up	

Total Allowances
c4.67	Total boxes c4.64 to c4.66 		

Election to reduce personal allowance (Marriage Allowance transfer)

if (box_NRD1 = Y and box_NRD15 = Y and box_NRD16 = N)
c4.68 = 0 (zero)
else
Marriage Allowance transferred out
c4.68	If MAT_OUT = FALSE (No Digital Claim AND MAT1 to MAT5 = null)
OR ((c9.16 + c9.17) > 0 (zero))
     OR (box_NRD16 = Y and c4.64 <= c4.55)
       Then c4.68 = 0 (zero)
else
if MAT_OUT = TRUE (Digital Claim OR MAT1 to MAT5 <> null)
c4.68 = T_P_A
end if
end if		T_P_A = £1,100

Reduced Personal Allowance
c4.69	C4.67 minus c4.68		
end if
end if

Total Deductions and Allowances
c4.70	c4.47 + c4.48 + c4.49 + c4.51 + c4.54 + c4.69		Copy to c5.1

Total disregarded income
c4.71	If calculation type = non-resident
c4.71 = c91.27 
	else
c4.71 = 0 (zero) 
	end if		

c4.72	If calculation type = non-resident
c4.72 = c4.70 + c4.71
		else
c4.72 = c4.70
	End if		

Total income
c4.73	If Calculation type = non-resident
	c4.73 = c91.28 
else
	c4.73 = c3.21
end if		

Total taxable income
c4.74	c4.73 minus c4.70		

Amount for extending basic rate band
c4.75	From c4.59		

Election to reduce personal allowance (Marriage Allowance transfer)
Calculate if, after the personal allowance is reduced, you are liable to tax at a rate other than the basic rate, the dividend ordinary rate or the starting rate for savings	
Where you are liable to tax at the dividend nil rate, and if the dividend nil rate were omitted would you be liable to tax at the dividend upper rate or additional rate? If yes, the transfer is invalid.
Where you are liable to tax at the savings nil rate the savings nil rate applies.

HR_case
c4.76	If c4.74 minus (lower of c2.19 and PSA_HR) > (BR_band + c4.75)
c4.76 = 1 (HR_case? 'Y’)
else
	c4.76 = 0 (HR_case? ‘N’)
End if		BR_band = £32,000
PSA_HR £500

if c4.68 = T_P_A £1,100 and c4.76 = 1 (HR_case? YES)
c4.68 = 0 (zero)	
Calculate boxes c4.69 through c4.76	
else	
Retain calculation from c4.68 to c4.76	
end if	



Personal savings allowance
Boxes c4.77 and c4.78 are used to calculate the amount of personal savings allowance

HR_case
c4.77	If c4.74 > (BR_band + c4.75)
	c4.77 = 1 (HR_case? 'Y')
else
	c4.77 = 0 (HR_case? 'N')
End if		BR_band = £32,000

AHR Case
c4.78	If c4.74 > (AHR_band + c4.75)
	c4.78 = 1 (AHR_case? 'Y')
else
	c4.78 = 0 (AHR_case? 'N')
End if		AHR_band =  £150,000

Personal Savings Allowance
c4.79	if c4.78 = 1 (Y)
	c4.79 = PSA_AHR
else
      if c4.77 = 1 (Y)
	c4.79 = PSA_HR
else
	c4.79 = PSA_BR
      End if
End if		PSA_AHR = £0
PSA_HR = £500
PSA_BR = £1,000

Dividend Allowance
c4.80	If calculation type = non-resident
c4.80 = 0 (zero)
Else
c4.80 = DA
End if		DA = £5,000

 
Stage 5: Subtract deductions and allowances from income (c5 boxes)
If any box in this stage is negative substitute zero

Calculate taxable income 

Step 1

Total allowances and deductions
c5.1	If calculation type = non-resident
c5.1 = c4.70 minus c4.4
else
c5.1 = c4.70 minus c4.63b
End if

c4.70 minus c4.63b			V5.0, V5.12

Extended basic rate band
c5.2	BR_band + c4.59	BR_band (£32,000)		V5.11

Non-savings income etc
c5.3	If Calculation type = non-resident
	c5.3 = c91.6
else
	c5.3 = c4.63c
end if 			V5.4
BR_rate (20%)
c5.4	lower of c5.3 and c5.2			
HR_rate (40%)
c5.5	lower of (c5.3 minus c5.4) and
(HR_band (£118,000))			
AHR_rate (45%)
c5.6	c5.3 minus (c5.4 + c5.5)			

Lump sum payments
c5.7	Set to zero			V5.6
BR_rate (20%)
c5.8	Set to zero			V5.6
HR_rate (40%)
c5.9	Set to zero			V5.6
AHR_rate (45%)
c5.10	Set to zero			V5.6

Savings income etc.
c5.11	If Calculation type = non-resident
	c5.11 = c91.14 
else
	c5.11 = c2.19
end if 			

c5.12	lower of (c5.11 and (SR_band (£5,000) + c4.79))			
c5.13	lower of c5.12 and (c5.2 minus (c5.4 + c5.8))			V5.0
c5.14	larger of (c4.79 and
(SR_band (£5,000) minus
((c5.4 + c5.8) minus c5.1)))			

SNil_rate 0%
c5.15	lower of c5.13 and c5.14			
BR_rate (20%)
c5.16	lower of
(c5.11 minus c5.15) and
(c5.2 minus (c5.4 + c5.8 + c5.15))			

c5.17	(HR_band (£118,000) minus (c5.5 + c5.9))			
c5.18	lower of (c5.17 and (c4.79 minus c5.15))			

HR 0%
c5.19	lower of (c5.18 and
(c5.11 minus (c5.15 + c5.16))			
HR_rate (40%)
c5.20	lower of
(c5.11 minus (c5.15 + c5.16 + c5.19) and
c5.17)			

AR0%
c5.20a	HR_band minus (c5.6 + c5.10)		HR_band = £118,000	V5.0
c5.20b	lower of c5.11 minus
(c5.15 + c5.16 + c5.19 + c5.20) and
(c4.79 minus (c5.15 + c5.19))			V5.0, V5.13
c5.20c	lower of c5.20a and c5.20b			V5.0

AHR_rate (45%)
c5.21	c5.11 minus
(c5.15 + c5.16 + c5.19 + c5.20 + c5.20c)			V5.0


Dividends income
c5.22	If Calculation type = non-resident
	c5.22 = c91.23 
else
	c5.22 = c3.15
end if 			

c5.23	lower of (c5.22 and c4.80)			

DivNil_rate 0%
c5.24	lower of (c5.23 and
(c5.2 minus (c5.4 + c5.8 + c5.15 + c5.16)))			

DivBR_rate (7.5%)
c5.25	lower of
((c5.22 minus c5.24) and
(c5.2 minus 
(c5.4 + c5.8 + c5.15 + c5.16 + c5.24)))			

c5.26	(HR_band (£118,000) minus (c5.5 + c5.9 + c5.20))			
c5.27	lower of (c4.80 and c5.26)			
c5.28	lower of (c5.27 and (c4.80 minus c5.24))			

HR 0%
c5.29	lower of (c5.28 and
(c5.22 minus (c5.24 + c5.25))			
DivHR_rate (32.5%)
c5.30	lower of
(c5.22 minus (c5.24 + c5.25 + c5.29) and
c5.26 minus c5.29)				V5.0

c5.31	HR_band (£118,000) minus (c5.6 + c5.10 + c5.21)			
c5.32	lower of c5.22 minus
(c5.24 + c5.25 + c5.29 + c5.30) and
c4.80 minus (c5.24 + c5.29)			

AR 0%
c5.33	lower of c5.31 and c5.32			
DivAR_rate (38.1%)
c5.34	c5.22 minus 
(c5.24 + c5.25 + c5.29 + c5.30 + c5.33)			

Lump sum payments
c5.34a	from c1.58			V5.6
BR_rate (20%)
c5.34b	lower of c5.34a and
(c5.2 minus (c5.4 + c5.15 + c5.16 + c5.24 + c5.25))			V5.6,v5.11
HR_rate (40%)
c5.34c	lower of c5.34a minus c5.34b and
(HR band minus (c5.5 + c5.20 + c5.30))		HR band (£118,000)	V5.6,v5.11
AHR_rate (45%)
c5.34d	c5.34a minus (5.34b + c5.34c)			V5.6

Step 2

Non-savings income etc
c5.35	If Calculation type = non-resident
	c5.35 = c91.6
else
	c5.35 = c1.57
end if 

from c5.3			V5.0

Lump sum payments
c5.36	from c1.58		

Savings income etc.
c5.37	If Calculation type = non-resident
	c5.37 = c91.14 
else
	c5.37 = c2.19
end if 

from c5.11			V5.0

Foreign dividends 
c5.38	If Calculation type = non-resident
	c5.38 = 0 (zero)
else
	c5.38 = c3.5
end if 		

Stock dividends
c5.39	If Calculation type = non-resident
	c5.39 = 0 (zero)
else
	c5.39 = c3.12 + c3.13
end if	£down	


UK dividends
c5.40	If Calculation type = non-resident
	c5.40 = c91.23 
else
	c5.40 = c3.15 minus (c5.38 + c5.39)
end if		
Gains on life policies etc.
c5.41	From c3.18		

Non-savings income with notional tax
c5.42	from c3.19		

Settlor Interested Trust income.
c5.43	from c3.20		

Additional rate
c5.44	lower of c5.1 and c5.6			
c5.45	lower of (c5.1 minus c5.44) and 
c5.34d			V5.6
c5.45a	lower of c5.21 and
(c5.11 minus (c4.79 + SR_band))		SR_band = £5,000	V5.9, V5.11
c5.45b	lower of c5.45a and (c5.1 minus (c5.44 + c5.45 + c5.20c))			V5.9, V5.12
c5.45c	lower of c5.21 and (c5.1 minus (c5.44 + c5.45 + c5.20c))			V5.12
c5.46	if c5.3 minus c5.1 < c5.2
c5.46 = c5.45b
else
c5.46 = c5.45c
end if			V5.9, V5.12
c5.47	c5.44 + c5.45 + c5.46			
c5.48	lower of
c5.1 minus (c5.4 + c5.8 + c5.16 + c5.5 + c5.9 + c5.20 + c5.6 + c5.10 + c5.21) and
c5.34 minus ((c5.2 + HR_band) minus c4.74)		HR_band = £118,000	V5.0, v5.6

Higher rate
c5.48a	Set to zero			V5.6, V5.12
c5.48b	Set to zero			V5.6, V5.12
c5.49	lower of (c5.1 minus c5.47) and 
c5.5			V5.6, V5.12
c5.50	lower of
(c5.1 minus (c5.47 + c5.49) and
c5.34c)			V5.6
c5.50a	lower of c5.20 and
(c5.11 minus (c4.79 + SR_band + c5.46))		SR_band = £5,000	V5.9,v5.11
c5.50b	lower of c5.50a and (c5.1 minus (c5.44 + c5.45 + c5.49 + c5.50))			V5.9, V5.12
c5.50c	lower of c5.20 and (c5.1 minus (c5.47 + c5.49 + c5.50))		SR_band = £5,000	V5.9,v5.11, V5.12, V5.13, V5.14
c5.50d	lower of c5.50c and (c5.11 minus c4.79)			V5.12
c5.51	if c5.3 minus c5.1 < SR_band
c5.51 = c5.50b
else
c5.51 = c5.50d
end if		SR_band = £5,000	V5.9, V5.10, V5.12
c5.52	c5.49 + c5.50 + c5.51			
c5.53	c5.1 minus (c5.47 + c5.48 + c5.52)			
c5.54	c5.53 minus c5.30			
c5.54a	lower of (((c5.3 + c5.11 + c5.24 + c5.25 + c5.29 + c5.30) minus c5.1) minus (BR_band + c4.75)) 
and c5.29		BR_band = £32,000	V5.18
c5.55	2 x (c5.54a minus c5.54)		This box can be negative	V5.6, V5.15, V5.18
c5.56	if c5.53 larger than c5.55 and
c5.30 larger than c5.55
c5.56 = c5.53
else
c5.56 = 0 (zero)			V5.9, V5.12
c5.56a	(c5.53 minus c5.56) x DivHR_rate		DivHR_rate = 32.5%	V5.15, V5.18
c5.56b	lower of SR_band and
((c5.1 + SR_band) minus c5.3)		SR_band = £5,000	V5.15, V5.17, V5.18
c5.56c	(c5.49 + SR_band) minus c5.4		SR_band = £5,000	V5.15, V5.18
c5.56d	(c5.56b minus c5.56c) x (2 x BR_rate) 		(c5.56b minus c5.56c) x 40%	V5.18
c5.56e	if c5.56d > c5.56a
c5.56e = lower of c5.1 and c5.4
else
c5.56e = c5.49
end if			V5.18
c5.56f	c5.1 minus c5.56e			V5.18
c5.57	lower of (c5.56 and (c5.4 + c5.8 + c5.16))			V5.0
c5.57a	lower of 
(c5.1 minus (c5.47 + c5.48 + c5.52 + c5.57) and 
c5.30)			V5.15
c5.58	lower of c5.56f and c5.57a			V5.0, V5.15, V5.17
c5.58a	Not in use			V5.12, V5.15
c5.58b	Not in use			V5.12, V5.15
c5.58c	lower of (c5.1 minus (c5.47 + c5.48 + c5.56e + c5.58) and c5.34c)			V5.12, V5.13, V5.14, V5.15
c5.58d	Set to zero			V5.12, V5.15
c5.58e	lower of (c5.1 minus (c5.47 + c5.48 + c5.56e + c5.58 + c5.58c) 
and c5.20			V5.12
c5.58f	c5.56e + c5.58c + c5.58e			V5.12, V5.15

Basic rate
c5.59	c5.1 minus (c5.47 + c5.48 +  c5.58f + c5.58)			V5.12
c5.60	lower of ((c5.4 + c5.5) minus c5.56e) and 
c5.59			V5.7, V5.12, V5.15, V5.18
c5.61	larger of (c5.56 minus c5.56e) and c5.60			V5.12, V5.15, V5.18
c5.62	lower of ((c5.4 + c5.5) minus c5.56e) and c5.61			V5.8, V5.12, V5.15, V5.18
c5.63	lower of
(c5.1 minus (c5.47 + c5.48 + c5.58f + c5.58 + c5.62) and 
c5.34b)			V5.6, V5.12
c5.64	lower of
(c5.1 minus (c5.47 + c5.48 + c5.58 + c5.58f + c5.62 + c5.63) and 
c5.16)			V5.12
c5.65	c5.62 + c5.63 + c5.64			
c5.66	lower of
(c5.1 minus (c5.47 + c5.48 + c5.58 + c5.58f + c5.65) and
c5.25)			V5.12

Allowances and deductions
c5.67	c5.44 + c5.56e + c5.62			V5.12, V5.15, V5.18
c5.68	c5.45 + c5.58c + c5.63			V5.12
c5.68a	lower of 
c5.1 minus (c5.47 + c5.48 + c5.58 + c5.58f + c5.65 + c5.66) and 
c5.11			V5.7, V5.12
c5.69	c5.46 + c5.58e + c5.64 + c5.68a			V5.7, V5.12, V5.13, V5.14
c5.70	larger of
(c5.1 minus (c5.67 + c5.68 + c5.69 + c5.41) and
c5.48 + c5.58 + c5.66)			V5.12
c5.71	c5.70 minus c5.38			
c5.72	c5.71 minus c5.39			
c5.73	Larger of 
c5.1 minus (c5.67 + c5.68 + c5.69 + c5.70) and (c5.72 minus c5.40)			V5.12, V5.13
c5.74	c5.73 minus c5.41			
c5.75	c5.74 minus c5.42			

Taxable income
c5.76	c5.35 minus c5.67		Add to c5.83 and copy to c6.1	
c5.77	c5.36 minus c5.68		Add to c5.84 and copy to c6.35	
c5.78	c5.37 minus c5.69		Copy to c6.11	V5.4
c5.79	c5.38 minus c5.70			
c5.80	c5.39 minus c5.71			
c5.81	c5.40 minus c5.72		add c5.79 + c5.80 + c5.81 and copy to c6.23	V5.4
c5.82	c5.41 minus c5.73		copy to c6.45 and copy to c9.22	V5.4
c5.83	c5.42 minus c5.74		Add c5.76 + c5.83 and copy to c6.1	
c5.84	c5.43 minus c5.75		Add c5.77 + c5.84 and copy to c6.35	V5.4

Total income
c5.85	If Calculation type = non-resident
	c5.85 = c91.28 
else
	c5.85 = From c3.21 minus c4.63b
end if			V5.0

Total taxable income
c5.86	c5.85 minus c5.1		

Amount for extending basic rate band
c5.30	From c4.59		
   
HR_case
c5.31	If c5.29 > (BR_band + c5.30)
c5.31 = 1 (HR_case? Y)
Else
c5.31 = 0 (HR_case? N)
End if		BR_band = £31,785
End if

calculate if, after the personal allowance is reduced, you are liable to tax at a rate other than the
basic rate, the dividend ordinary rate or the starting rate for savings	
if c4.68 = T_P_A £1,060 and c5.31 = 1
c4.68 = 0 (zero)	
Calculate boxes c4.69 through c5.31	
else	
Retain calculation from c4.68 to c5.31	
end if	
 
 

Stage 6: Allocate income to tax bands (c6 boxes)
If any box in this stage is negative substitute zero
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)

The first £5,000 of savings income is taxed at 0%; but only if non-savings and savings income is less than £16,000 (the personal allowance – £11,000 plus the savings starting rate band of £5,000).
Savings income in excess of the savings starting rate band, up to the lower of the amount of the excess or the individual's savings allowance, is charged at the savings nil rate.

Allocate Non-savings Income etc.
c6.1	c5.76 + c5.83			

Starting rate band for savings
c6.2	SR_band		SR_band = £5,000	

Income in starting rate band
c6.3	Set to zero			V5.2

Income above starting rate band
c6.4	Set to zero			V5.2


Band between Savings rate & Basic rate + relevant earnings adjustment 
c6.5	SBR_band + c4.59		SBR_band = £27,000	
 
Income in basic rate band 
c6.6	lower of c6.1 and (BR_band + c4.59)		BR_band = £32,000	V5.0

Income above basic rate band
c6.7	c6.1 minus c6.6			V5.0

Higher rate band & Basic rate band
c6.8	HR_band		HR_band = £118,000	

Income in higher rate band 
c6.9	Lower of c6.7 and c6.8			

Income in additional rate band 
c6.10	c6.1 minus (c6.6 + c6.9)			V5.0
 
 
Allocate Savings etc. (except Dividends) and gains on life policies without notional tax
c6.11	From c5.78			

Personal savings allowance used	
c6.12	SR_band minus c6.1		SR_band = £5,000	V5.0, V5.18

Income in starting rate band	
c6.13	lower of c6.11 and c6.12			

Income in starting rate band
c6.14	lower of SR_band and c6.13		SR_band = £5,000	V5.0

c6.15	Set to zero			V5.2

Personal Savings Allowance
c6.16	PSA from c4.79			


Personal Savings Allowance used
c6.17	lower of (c6.11 minus c6.14) and c6.16			V5.0

Income in basic rate band 
c6.18	lower of (c6.11 minus (c6.14 + c6.17)) and ((BR_band (£32,000) + c4.59) minus (c6.6 + c6.14 + c6.17))			V5.0

Income above basic rate band 
c6.19	c6.11 minus (c6.14 + c6.17 + c6.18)			V5.0

Higher rate band available
c6.20	HR_band minus c6.9		HR_band = £118,000	V5.0

Income in higher rate band
c6.21	Lower of c6.19 and c6.20			

Income in additional rate band
c6.22	c6.11 minus (c6.14 + c6.17 + c6.18 + c6.21)			V5.0

Allocate Dividends etc.
c6.23	c5.79 + c5.80 + c5.81			

Dividend Allowance
c6.24	DA from c4.80			V5.0

Dividend Allowance used
c6.25	lower of c6.23 and c6.24			

Income in basic rate band before Dividend Allowance	
c6.26	lower of (c6.23 and (BR_band + c4.59) minus (c6.6 + c6.9 + c6.14 + c6.17 + c6.18))		BR_band = £32,000	V5.0

Dividend Allowance set against Dividend income in basic rate
c6.27	lower of c6.25 and c6.26			V5.0

Income in basic rate band
c6.28	c6.26 minus c6.27			V5.0

Income above basic rate band
c6.29	c6.23 minus c6.26			V5.0

Income above basic rate band
c6.30	HR_band minus (c6.9 + c6.21)		HR_band = £118,000	V5.0

Income in higher rate band before Dividend Allowance
c6.31	lower of c6.29 and c6.30			V5.0

Dividend Allowance set against Dividend income in higher rate
c6.32	lower of (c6.25 minus c6.26) and c6.30			V5.0

Income in higher rate band
c6.33	c6.31 minus c6.32			V5.0

Income in additional rate band
c6.34	c6.23 minus (c6.25 + c6.28 + c6.33)			V5.0

Allocate lump sum payments etc.
c6.35	c5.77 + c5.84			

c6.36	Set to zero			V5.2
Income in starting rate band
c6.37	Set to zero			V5.2
c6.38	Set to zero			V5.2
c6.39	Set to zero			V5.2

Income in basic rate band
c6.40	lower of c6.35 and ((BR_band + c4.59) minus (c6.6 + c6.14 + c6.17 + c6.18 + c6.26))		BR_band = £32,000	V5.0

Income above basic rate band
c6.41	c6.35 minus c6.40			V5.0

Higher rate band available
c6.42	HR_band minus (c6.9 + c6.21 + c6.29)		HR_band = £118,000	V5.0, V5.16

Income in higher rate band
c6.43	lower of c6.41 and c6.42 			

Income in additional rate band
c6.44 	c6.35 minus (c6.40 + c6.43)			V5.0

Allocate gains on life policies (with notional tax) etc.
c6.45 	from c5.82			
c6.46	SR_band minus (c6.1 + c6.11 + c6.23 + c6.35)		SR_band = £5,000	V5.0, V5.18
c6.47	lower of c6.45 and c6.46			

Income in starting rate band
c6.48	lower of (SR_band (£5,000) minus c6.14) and c6.47			V5.3

c6.49	Set to zero			V5.2

Personal Savings Allowance
c6.50	c6.16 minus c6.17			

Personal Savings Allowance used
c6.51	lower of (c6.45 minus c6.48) and c6.50			V5.12

Income in basic rate band 
c6.52 	lower of (c6.45 minus (c6.48 + c6.51)) and ((BR_band + c4.59) minus (c6.6 + c6.14 + c6.17 + c6.18 +  c6.26 + c6.40 + c6.48 + c6.51))		BR_band = £32,000	V5.0

Income above basic rate band
c6.53	c6.45 minus (c6.48 + c6.51 + c6.52)			V5.0
Higher rate band available
c6.54	HR_band minus (c6.9 + c6.21 + c6.29 + c6.43)		HR_band = £118,000	V5.0
Income in higher rate band
c6.55	lower of c6.53 and c6.54			
Income in additional rate band
c6.56	c6.45 minus (c6.48 + c6.51 + c6.52 + c6.55)			
Stage 7: Calculate adjustment for Deficiency Relief (c7 boxes)
If any box in this stage is negative substitute zero
pdown – truncate to two decimal places (to leave pounds and pence)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)
£down – truncate pence to leave integer pounds

Allocate Deficiency Relief (DR) to dividends in higher rate band 
c7.1	from AOI11	£up		
c7.2 	from c6.33		Amount in higher rate band 	V5.4
c7.3 	lower of c7.1 and c7.2 		Amount moved to lower rate band 	
c7.4 	c7.3 x (DivHR_rate minus DivBR_rate)	pup	c7.3 x (32.5% minus 7.5%) (25%)	

Allocate DR to savings & non savings in higher rate band 
c7.5	c7.1 minus c7.3 		remaining deficiency relief 	
c7.6	c6.9 + c6.21 + c6.43 + c6.55		amount in higher rate  band 	V5.4
c7.7	lower of c7.5 and c7.6 		amount moved to lower rate band 	
c7.8	c7.7 x  (HR_rate minus BR_rate)	pup 	c7.7 x (40% minus 20%) (20%)	
c7.9	c7.4 + c7.8 		Copy to box c9.2	

 
Stage 8: Charge income to tax (c8 boxes)
If any box in this stage is negative substitute zero
pdown – truncate to two decimal places (to leave pounds and pence)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)
£down – truncate pence to leave integer pounds
The pseudo box at YPD STp is for the Scottish taxpayer signal
STp_signal = TRUE = Scottish taxpayer

Non-savings income
Income in BR band
c8.1	c6.6 + c6.40			V6.0
c8.2	If pseudo box YPDTR = S, and
  calculation type = Resident 
    c8.2 = c8.1 x SBR_rate 
else 
    c8.2 = c8.1 x BR_rate
  end if 	pdown	SBR_rate = 20%
BR_rate = 20%	

Income in HR band
c8.3	c6.9 + c6.43 		
c8.4	If pseudo box YPDTR = S, and
  calculation type = Resident 
    c8.4 = c8.3 x SHR_rate 
else 
    c8.4 = c8.3 x HR_rate
  end if 	pdown	SHR_rate = 40%
HR_rate = 40%

Income in AHR band
c8.5	c6.10 + c6.44 		
c8.6 	If pseudo box YPDTR = S, and
  calculation type = Resident 
     c8.6 = c8.5 x SAHR_rate
else 
     c8.6 = c8.5 x AHR_rate
  end if 	pdown 	SAHR_rate = 45%
AHR_rate = 45%

Savings income
Income in SRB band
c8.7	c6.14 + c6.48			V5.0
c8.8	c8.7 x SR_rate	pdown	c8.7 x 0%	

Income in Nil band
c8.9	c6.17 + c6.51		
c8.10	c8.9 x SNil_rate	pdown	c8.9 x +0%

Income in BR band
c8.11	c6.18 + c6.52		
c8.12	c8.11 x BR_rate	pdown	c8.11 x 20%


Income in HR band
c8.13	c6.21 + c6.55		
c8.14	c8.13 x HR_rate	pdown	c8.13 x 40%

Income in AHR band
c8.15	c6.22 + c6.56		income in AR band 
c8.16	c8.15 x AHR_rate	pdown	c8.15 x 45% 


Dividend income

Income in Nil band
c8.17	from c6.25			V5.0
c8.18	c8.17 x DivNil_rate	pdown	c8.17 x 0%	

Income in BR band
c8.19	from c6.28			V5.0
c8.20	c8.19 x DivBR_rate	pdown	c8.19 x 7.5%	

Income in HR band
c8.21	from c6.33		
c8.22	c8.21 x DivHR_rate	pdown	c8.21 x 32.5%

Income in AHR band
c8.23	from c6.34		
c8.24 	c8.23 x DivAR_rate	pdown	c8.23 x 38.1%

Non residents tax
c8.25 	If Calculation type = non-resident
c8.25 = c91.35
else
c8.25 = 0 (zero)
end if 		

Income Tax Due
c8.26	c8.2 + c8.4 + c8.6 +  c8.8 + c8.12 + c8.14 + c8.16 + c8.20 + c8.22 + c8.24 + c8.25 		copy to c9.1

 
Stage 9: Apply tax adjustments (c9 boxes)
If any box in this stage is minus substitute zero, unless otherwise stated
pdown – truncate to two decimal places (to leave pounds and pence)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
£down – truncate pence to leave integer pounds.

Calculate Income Tax due after adjustments

Income Tax Due
c9.1	from c8.26		

Reliefs
Deficiency relief 
c9.2	from c7.9		

Top Slicing Relief
c9.3	from c17.48		

Venture Capital Trust shares
c9.4	from AOR1	£up	
c9.5	c9.4 x VCT_rate	pup	c9.4 x 30%

Enterprise Investment Schemes
c9.6	from AOR2	£up	
C9.7	c9.6 x EIS_rate	pup	c9.6 x 30%

SEED Enterprise Investment Scheme 
c9.8	from AOR10	£up	
C9.9	c9.8 x SEIS_rate	pup	c9.8 x 50%

Community Investment Tax Relief
c9.10	from AOR3	£up	
C9.11	c9 10 x CITR_rate	pup	c9.10  x 5%

Social Investment Tax Relief
c9.12	from AOR11	£up	
C9.13	c9 12 x SITR_rate	pup	c9.12  x 30%
C9.14 	C9.2 + C9.3 + C9.5 + C9.7 + C9.9 + C9.11 + C9.13		

Allowances
Maintenance and Alimony
c9.15	lower of AOR7 and Maintenance and Alimony Limit SMP	£up	lower of box AOR7 and £3,220


Married Couples Allowance & Married couples surplus allowance
If (box NRD28 = “Y” and NRD29 = “N” and NRD16 = “N”) 
OR (NRD1 = “Y” and NRD15 = “N” and NRD16 = “N”) 
OR (Calculation type = non-resident) Married Couples Allowance & Married couples surplus allowance not due.
set boxes c9.16 & c9.17 to zero
    else
  Married Couples Allowance
c9.16	If MCA1 present 
c9.16 = c15.21
else  
If box MCA8 present
c9.16 = c15.20
else
c9.16 = 0
end if
end if		

Married couples surplus allowance
c9.17	from CAL13	£up	
end if

total allowances
c9.18	c9.15 + c9.16 + c9.17		
c9.19	c9.18 x A_rate	pup	c9.18 x 10%

Marriage Allowance transferred in
The Marriage Allowance Transfer for the recipient is not claimed on the SA Return but it is included in the SA302 tax calculation.
OTRSA and 3rd party submissions will get this data from the Data Cache during the return completion process.

If (box_NRD28 = Y and box_NRD29 = N and box_NRD16 = N)
OR (box_NRD1 = Y and box_NRD15 = N and box_NRD16 = N)
OR Calculation type = non-resident 
Set boxes c9.20 to c9.21 to 0 (zero)
Else

c9.20	If MAT_IN
AND c4.76 = 0 (zero)
AND (c9.16 + c9.17) = 0 (zero)
c9.20 = T_P_A
Else
c9.20 = 0 (zero)
end if		T_P_A = £1,100
c9.21	c9.20 x BR_rate  (20%)		C9.20 x 20%

End if

Notional Tax 

on Gains on life policies
c9.22	from c5.82		
c9.23	c9.22 x BR_rate	pup	c9.22  x 20%

Notional Tax on stock dividends
c9.22	from c5.15		
c9.23	 If Calculation type = non-resident
c9.23  = (c9.22 x L_Div rate) + c91.35 
 else 
c9.23  = c9.22 x  L_Div rate
end if 	pup	c9.22 x10% + c91.35 
else
c9.22 x10%

on Lloyds dividends
c9.24	from c21.10		

on Trusts (TRU2 and TRU3) and Estates (TRU19)
c9.25	from c22.12		

Total Notional tax
c9.26	c9.24 + c9.25		



Tax Credits on foreign dividends
c9.27	from c24.7		

Relief on qualifying distributions
c9.28 	from c23.11 		

Relief on qualifying distributions
c9.26a 	from c23.11 			V5.0

UK liability for FTCR purposes 
c9.27	c9.1 minus (c9.14 + c9.19 + c9.21 + c9.23 + c9.26 + c9.26a)			V5.0

Foreign Tax Credit Relief 
c9.28	from FOR2		

Income tax due after tax reductions
c9.29	c9.27 minus c9.28		

Gift Aid Payments 
c9.30	from c4.57		
c9.31	c9.30 x BR_rate	£down	c9.30 x 20%

Capital Gains Tax
c9.32	from c18.58		

Remittance basis charge for non-domiciles
c9.33	from c19.1		

Tax charge on Child Benefit 
c9.34	from c28.14		

Additional tax due for pension payments
c9.35	from c25.54		

c9.36	c9.31 minus (c9.32 + c9.33 + c9.34 + c9.35)		

Income Tax Due 
c9.37	Higher of boxes c9.29 and c9.36		

Tax due on annuity and royalty payments 
c9.38	(AOR4 + ASE15)  x NS_gross/80)	£down	(AOR4 + ASE15)  x 100/80
c9.39	c9.38 x BR_rate	pdown	c9.38 x 20%

Income tax due
c9.40	c9.37 + c9.39		
 
Stage 10: Work out non – payable tax credits on dividends (c10 boxes)
If any box in this stage is minus substitute zero, unless otherwise stated
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
£down – truncate pence to leave integer pounds

Non-payable tax credits on dividends - calculate maximum tax credit available
Share of Partnership tax credits
c10.1 	total all instances (FPS80)	£down	
 
 
Dividends for share of Partnership tax credits
 
c10.2	c10.1 divided by Ldiv_rate	£up	c10.1  divided by 10%
 
 
Dividends from UK Co’s + Other Dividends
 
c10.3	From c3.11		(INC4 + INC5) x 100/90

 
Dividends from Trusts and estates 
c10.4	C3.7 + c3.9		((TRU5 + TRU9 + TRU21) x 100/90) + (TRU12 x100/62.5)
 
 
Total Dividends
 
c10.5	c10.2 + c10.3 + c10.4		
c10.6	c10.5 x Ldiv_rate	pdown	c10.5  x 10%
 

Taxable UK Dividends
 
c10.7	from c5.18		
 
 
Non-UK Dividends
 
c10.8	c10.5 minus c10.7		
If c10.8 = 0 (zero)
boxes c10.9 to c10.17 = 0 (zero)
and c10.18 = c10.6  and continue 
else
calculate c10.9 onwards (calculate whether tax due on Gift Aid reduces restriction
By reallocating allowances
By restricting allowances


Income tax due after allowances, reliefs & adjustments
minus UK liability for FTCR purposes
c10.9	c9.38 minus c9.29		
 
 
Notional Tax
on Gains on life policies + on Trusts and Estates
 
c10.10	c9.21 + c9.26		
c10.11	lower of c10.9 and c10.10		
c10.12	c10.11 divided by Ldiv_rate		c10.11 divided by 10%
 
c10.13	c10.8 minus c10.12		
 
 
Adjustments for Gift Aid tax minus (Capital gains tax +
 Remittance basis charge + Tax charge on Child Benefit)
  Minus Income Tax Due 
c10.14	c9.37 minus c9.1		
c10.15	c10.14 divided by Ldiv_rate		c10.14 divided by 10%
c10.16	c10.13 minus c10.15		
c10.17	c10.16 x Ldiv_rate	pdown	c10.16 x 10%
C10.18	If Calculation type = non-resident, lesser of
       c10.18 = lower of c10.6 or (c91.36 + (c10.6 minus c10.17)) 
else
c10.18 = c10.6 minus c10.17
end if		

Lloyds dividends

Other dividends and qualifying distributions from UK companies
c10.1	LUN9 + LUN10	£down	
Notional tax and tax credits
c10.2	from c21.12		

Non-payable tax credits on dividends
c10.3	lower of c10.1 and c10.2		
c10.4	c10.3 x  Ldiv_rate	pdown	c10.3 x 10%

c10.23	c10.18 + c10.22		

 
Stage 11: Accumulate tax paid from Tax Return (c11 boxes)
If any box in this stage is minus substitute zero, unless otherwise stated
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)

Calculate Tax Paid

Employment
c11.1	Total all instances (EMP2)		From each employment 

Lump Sums
c11.2	from ASE6 		

Minister of religion
c11.3	Total all instances (MOR39)		For each MOR

UK pensions
c11.4	INC10 + INC12 + INC14		This box can be negative 

Total tax deducted under PAYE
c11.5	c11.1 + c11.2 + c11.3 + c11.4  		

Outstanding Debt in tax code 
c11.6	from CAL9		

Amount of coded outstanding debt collected
c11.7	 lower of c11.5 and c11.6 		

PAYE tax available to SA 
c11.8	c11.5 minus c11.7		

Self-employment
c11.9	Total all instances (SSE38)		
c11.10	Total all instances (FSE81 + FSE82) 		

Lloyds
c11.11	LUN4 + LUN14 + LUN17		

Partnerships
c11.12	Total all instances (SPS30 + SPS31)		
c11.13	Total all instances (FPS77 + FPS78 + FPS79)		

UK Land and Property
c11.14	From PRO21		

Foreign income
c11.15	FOR3 + FOR5 + FOR8 + FOR10 + FOR12 + FOR29 + FOR40		

Trusts and Estates
c11.16	(TRU3 + TRU7 + TRU16) x savings_gross x BR_rate	pup	(TRU3 + TRU7 + TRU16) x 100/80 x 20%
c11.17	TRU1 x trust_gross x AHR_rate	pup	TRU1 x 100/55 x 45%
c11.18	TRU10 x trust_gross x AHR_rate	pup	TRU10 x 100/55 x 45%
c11.19	TRU20 x GROSS_By_22 x OLD_BR	pup	TRU20 x 100/78 x 22%
c11.20	(TRU4 + TRU8 + TRU17) x savings_gross x BR_rate	pup	(TRU4 + TRU8 + TRU17) x 100/80 x 20%
c11.21	TRU11 x trust_gross x AHR_rate	pup	TRU11 x 100/55 x 45%
c11.21	TRU12 x trust_div_gross x (AHdiv_rate minus  L_Div rate)	pup	TRU12 x 100/62.5 x 27.5%
c11.22	TRU18 x divs_gross x  L_Div rate	pup	TRU18 x 100/90 x  10%
c11.22	TRU12 x trust_div_gross x DivAR_rate	pup	TRU12 x 100/61.9 x 38.1%
c11.23	(TRU5 + TRU9 + TRU18) x divs_gross x  DivBR_rate	pup	(TRU5 + TRU9 + TRU18) x 100/92.5 x 7.5%
c11.24	From TRU15		

Total from Trusts and Estates
c11.25	c11.16 + c11.17 + c11.18 + c11.19 + c11.20 + c11.21 + c11.22 + c11.23 + c11.24		

Non-residence etc.
c11.26	NRD21 + NRD22		

Investments 
c11.27	INC1 x savings_gross x BR_rate	pup	INC1 x 100/80 x 20%

Gilt Edge Securities
c11.28	from AOI2		

Chargeable Event Gains etc.
c11.29	from AOI10		

Other income
c11.30	from INC19		

Total Tax paid at source
c11.31	 c11.8 to c11.15 + c11.25 to c11.30		copy to c12.13
 
Stage 12: Calculate tax due (c12 boxes)
If any box in this stage is minus substitute zero, unless otherwise stated

Income Tax due
c12.1	c9.40 minus c10.4			V5.4

Class 4 National Insurance contributions
c12.2	From c16.31		

Class 2 National Insurance contributions
c12.3	From c16.32		

Class 2 & Class 4 National Insurance contributions
c12.4	c12.2 + c12.3		

Income Tax Class 2 and Class 4 National Insurance contributions
c12.5	c12.1 + c12.4		

Underpaid tax for earlier years included in 2015-16 tax code
c12.6	from CAL7		

Repayment of student loans
c12.7	from c27.44		

Tax Charge on Child Benefit 
c12.8 	from c28.14		

Pension savings charges
c12.9	from c25.48 		

State Pension Lump sum
c12.10	from c26.3		

Remittance basis charge for non-domiciles
c12.11	from c19.1		

Income Tax, Student Loan repayment and Class 2 and Class 4 National Insurance contributions
c12.12	c12.5 + c12.6 + c12.7 + c12.8 + c12.9 + c12.10 + c12.11 + (c25.54 minus c25.55)	This box can be negative	

Total tax paid at source
c12.13	from c11.31		

2015-16 underpaid tax included in 2016-17 tax code
c12.14	from CAL8		

c12.15	c12.13 + c12.14		

Total Income Tax, Class2 and Class 4 NIC due
c12.16	c12.12 minus c12.15	This box can be negative	

Capital Gains Tax
c12.17	from c18.58		

Total Tax and NIC due (if positive = CAL1, if negative = (absolute value) CAL2)
c12.18	c12.16 + c12.17	This box can be negative	

The following 3 boxes are only used on the SA302 (c12.21 is used in the calculation of Payments on Account c13.10).

tax already refunded in the year
c12.19	from FIN1		Only used for display

unpaid tax for earlier years
c12.20	from CAL14		Only used for display

End if

Total Due
c12.21	c12.18 + c12.19 + c12.20	This box can be negative	Only used for display

 
Stage 14: Calculate personal allowance due if your income is £100,000 or more (c14 boxes) 
If any box in this stage is minus substitute zero
£down – truncate pence to leave integer pounds
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4).

Boxes c14.1 to c14.6 not used

Adjusted Net income for Allowances
c14.1	from c4.63		

Income Limit for Personal Allowance
c14.2	PA_taper_limit		PA_taper_limit = £100,000
c14.3	c14.1 minus c14.2		

If c14.7 is > PA_taper_limit (£100,000) 
set c14.10 to P_A (£10600)
Else 
Personal Allowance
c14.4	P_A		P_A = £11,000

End if 

c14.5	c14.3 x AA_Excess	£down	AA_Excess = 50%

Personal Allowance/Reduced Personal allowance 
c14.6	c14.4 minus c14.5		Copy to box c4.64

c14.13	if c14.7 < = PA_taper_limit (£100,000)
c14.13 =  P_A (£10,600)
else 
c14.13 = zero     
end if 		

c14.14	Higher of c14.12 and c14.13 		copy to c4.64
 
Stage 15: Calculate age related married couples allowances (c15 boxes)
If any box in this stage is minus substitute zero, unless otherwise stated
£down – truncate pence to leave integer pounds

Calculate age related Married Couple’s Allowance due claimed by husband, spouse or civil partner with higher income (box MCA1 present)

If MCA1 present then
DOB for Married Couple’s Allowance = earliest date from box YPD1 or box MCA2 or box MCA5

c15.1	If DOB for Married Couple’s Allowance is Null or after 5 April 1935
 c15.1= zero
else
(DOB for Married Couple’s Allowance is before 6 April 1935)
c15.1 = H_MCA
end if 		H_MCA = £8,355

Adjusted Net Income
c15.2	from c4.63		

Income limit for age related allowances
c15.3	AA_limit 		AA_limit = £27,700
c15.4	c15.2 minus c15.3		
c15.5	c15.4 X AA_excess	£down	c15.4 x 50% 
c15.6	From c14.4 		   
c15.7 	From c14.6 		
c15.8	c15.6 minus c15.7 		
c15.9 	c15.5 minus c15.8 		
c15.10	c15.1 minus c15.9 		
c15.11 	if c15.1 is greater than zero 
c15.11 = Higher of c15.10 and MCA
   else 
c15.11 = 0 zero 
end if 		MCA = £3,220

Calculate Age related Married Couple's Allowance Due (claimed by wife (marriages up to 5 December 2005), or the spouse or civil partner with the lower income)

Calculate reduction for marriage in year
c15.12	If MCA9 present
 c15.12 = Select month from table A
else
 c15.12 = 0 (zero)
end if		
c15.13	c15.11 multiplied by c15.12		
c15.14	c15.13  divided by 12	£ down	
c15.15	c15.11 minus c15.14		
else
  c15.1 to c15.15 = 0
end if
 










Table A
	Date of marriage/civil ceremony from MCA9	Month	
	Not present, or before 6 May 2016	0	
	6 May 2016 to 5 June 2016	1	
	6 June 2016 to 5 July 2016	2	
	6 July 2016 to 5 August 2016	3	
	6 August 2016 to 5 September 2016	4	
	6 September 2016 to 5 October 2016	5	
	6 October 2016 to 5 November 2016	6	
	6 November 2016 to 5 December 2016	7	
	6 December 2016 to 5 January 2017	8	
	6 January 2017 to 5 February 2017	9	
	6 February 2017 to 5 March 2017	10	
	6 March 2017 to 5 April 2017	11	
	6 April 2017 or later	12	

Calculate age related Married Couple’s Allowance due to wife, or spouse / civil partner with the lower income

This can be either claimed by wife or lower income spouse / civil partner (boxes MCA6, or MCA7 = Y) or allocated to wife or lower income spouse / civil partner by husband or higher income spouse / civil partner (box MCA3 or box MCA4 = Y)

If (MCA3 or MCA4 or MCA6 or MCA7) = Y then
	c15.16	if (MCA3 or MCA6) = Y
c15.16 = MCA_2 (£1,610)
else
   c15.16 = MCA (£3,220) 
end if		MCA_2 = £1,610
MCA = £3,220

Calculate reduction for marriage in year
	c15.17	If MCA9 present
 c15.17 = Select month from table A
else
 c15.17 = zero
end if		
	c15.18	c15.16 multiplied by c15.17		
	c15.19	c15.18 divided by 12	£up	
	c15.20	c15.16 minus c15.19		If MCA8 present copy to c9.16  
else
 c15.16 to c15.20 =zero
end if

   	c15.21	c15.15 minus c15.20  		If MCA1 present copy to c9.16
 
Stage 16:  Calculate Class 4 NIC (c16 boxes)
If any box in this stage is minus substitute zero
£down – truncate pence to leave integer pounds
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
pdown – truncate to two decimal places (to leave pounds and pence)

For Class 2 you may find it more efficient to centralise and have one box rather than have multiple pseudo boxes for each self-employed, partnership and Lloyds page.

The Class 1 can also be centralised rather than have, for example, the pseudo boxes on the employment and minister of religion pages etc.

Where the Class 1 figure is supplied for pre-population it is one figure of “Total class 1 NICable earnings between the PT and UEL”. The xml can feed into one or both of the pseudo boxes on the Employment page. 

IF NIC Exception (Class 4 NIC Exempt: LUN64 = Y) or any instances of boxes (SSE37 = Y) or (FSE101 = Y) or (SPS26 = Y) or (FPS26 = Y)	[Class 4 NIC exempt]
or NRD1 = Y (calculation type = non-resident)	
Calculate c16.1 to c16.12	
Set c16.13 to c16.31 to 0 (zero)					
		Else						
		Calculate c16.1 to c16.19
If c16.13 = 0 (zero)					
				Set c16.20 to c16.30 to 0 (zero)
				Set c16.31 = c16.19					
				Else					
				Calculate c16.20 (API Call)		
					If c16.20 = 0 (zero)
						Set c16.21 to c16.30 to 0 (zero)	
						Set c16.31 = c16.19		
					Else					
						Calculate c16.21 to c16.30		
						Set c16.31 to lower of c16.19 and c16.30
	V5.12


Profits from Self Employment
	c16.1	Total all instances (SSE31)	£down for each SSE		
	c16.2	Total all instances (FSE76)	£down for each FSE		

Profits from Lloyds
	c16.3	from LUN52	£down	

Profits from partnerships
	c16.4	Total all instances (SPS20)	£down for each SPS	
	c16.5	Total all instances (FPS20)	£down for each FPS	

Total profits for NIC
	c16.6	c16.1 + c16.2 + c16.3 + c16.4 + c16.5 		

NIC Adjustments (use absolute value of Return boxes in boxes c16.7 to c16.10)
	c16.7	Total all instances of absolute value (FSE102)	£up for each FSE	
	c16.8	Absolute value  LUN65	£up 	
	c16.9	Total all instances absolute value (SPS27) 	£up for each SPS	
	c16.10	Total all instances absolute value (FPS27)	£up for each FPS	
	c16.11	c16.7 + c16.8 + c16.9 + c16.10		
 
Total profit less adjustments
Used for class 4 and class 2 
	c16.12	c16.6 minus c16.11		

Profits on which class 4 NIC due
	c16.13	c16.12 minus NIC_LEL		c16.12 minus £8,060

 
Maximum Class 4  NIC chargeable x 9% 
c16.14	max_NIC 	 	Max_NIC = £3,144.60 
 
	c16.15	lower of NIC_band and c16.13	 	lower of £34,940 and c16.13
	c16.16	Lower of (c16.15 x NIC_rate) or max_NIC	pdown	Lower of (c16.15 x 9%) or £3,144.60
	c16.17	c16.13 minus c16.15		
	c16.18	c16.17 x NIC_supp_rate	pdown	c16.17 x 2%
 
 
Calculation of Class 4 without reference to Class 2 and Class 1 
	c16.19	c16.16 + c16.18		


Reg 100 Calculation

	Enter Earnings liable to Class 1 Contributions from P60
	Col 1c from P60 (earnings from PT to UAP)
c16.20	Total all instances (EMPCL1c)		

	Col 1d from P60 (earnings from UAP to UEL )
c16.21	Total all instances (EMPCL1d)		
	
Total class 1 NICable earnings between the PT and UEL 
c16.20	Total all instances (EMPCL1) + (MORCL1)	£up (for each EMP + MOR)	

Class 1 NICS due at standard_rate
c16.21	c16.20 x NIC1_rate	pup	c16.20 x 12%

53 weeks of class2 at £2.80 per week
c16.22	NIC2_annual_limit		NIC2_annual_limit = £148.40
	
Total Max Class 4 NIC Charge x UPL_rate + Class 2 annual limit
c16.23	C16.14 + c16.22		

	Subtract Class 1 and Class 2
c16.24	c16.23 minus (c16.21 + c16.32)		

Divide the result of c16.26 by UPL rate
c16.25	c16.24 divided by NIC_rate	pdown	c16.24 divided by 9%

Subtract the LPL from the UPL, or the Actual profit figure (whichever is lowest)
c16.26	lower of (c16.12 or NIC_UEL ) minus NIC_LEL		lower of (c16.12 or £43,000)) minus £8,060
This box can be negative

Subtract the result of c16.25 from the result of c16.26
c16.27	c16.26 minus c16.25		

Multiply the result of 16.29 by LPL rate
c16.28	c16.27 x NIC_supp_rate	pdown	c16.27 x 2%

Actual profit figure minus UPL x UPL rate
c16.29	(c16.12 minus NIC_UEL) x NIC_supp_rate		(c16.12 minus £43,000 x 2%

Reg 100 Class 4 NIC due
c16.30	If c16.24 > 0 and c16.24 > (c16.21 + c16.32 + (c16.13 x NIC_rate))  
c16.30 = c16.24
else 
if c16.24 > 0 and c16.24 <= (c16.21 + c16.32 + (c16.13 x NIC_rate))
    c16.30 = c16.24 + c16.28 + c16.29
else
  if c16.23 minus (c16.21 + c16.32) < 0
       c16.30 = c16.24 + c16.28 + c16.29
else
          c16.30 = zero 0
       end if
    end if
end if		NIC_rate = 9%	V5.11

Total Class 4 NIC due
c16.31	If c16.20 > 0 (zero)
  c.16.31 = Lower of c.16.19 and c16.30
else 
  c16.31 = c16.19
end if		copy to c12.2
		End if
	End if
End if

Class 2
Where customer has multiple sources of income subject to Class 2 the Class 2 amount due should not be duplicated across the sources
The reference to box NICL2 in the calculation does not appear in the schema. This is for the calculation only and this figure is expected to be taken from the data sent in 1 (or more if you choose) of SSECL2, FSECL2, FPSCL2, SPSCL2 and LUNCL2 which are in the schema and would be sent in the xml. To support the rendering of NIC Class 2 Contributions you may want to render on one Self Employment, Partnership or Lloyds schedule and have the ability to choose the schedule that should be used.

Class 2 NIC due	
c16.32	if c16.12 >= NIC2_SPT (£5,965) and if (SSE36 = N and FSE100 = N and LUN63 = N and SPS25 = N and FPS25 = N) or,
if c16.12 < NIC2_SPT (£5,965) and if (SSE36 = Y or FSE100 = Y or LUN63 = Y or SPS25 = Y or FPS25 = Y)
c16.32 = box NICL2
else
c16.32 = 0 (zero)
end if
end if		

 
Stage 17: Calculate Top Slicing Relief (c17 boxes)
If any box in this stage is minus substitute zero
£down – truncate pence to leave integer pounds
pdown – truncate to two decimal places (to leave pounds and pence)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)

(When called from On-Line Functions Capture Return Details and Amend Return for a taxpayer with Chargeable Events the process will need to know if Top Slicing Relief is due before the calculation of liability is complete. The calling process may therefore need to call this common process twice, initially to determine if any relief is possible and secondly to undertake the complete calculation. 

When the process is called for the first time by either of these functions the signal RTN TOP SLICING CHECK REQD SIGNAL will be set to “Y”. If processing decides that Top Slicing Relief is due this signal is cleared and a second signal RTN TOP SLICING RELIEF DUE SIG set to “Y” to indicate to the calling process that the additional field ITF CEG INPUT AMOUNT should be displayed.)

The ITF CEG INPUT AMOUNT is required where FOR43 + AOI4 + AOI6 + AOI8 > 0, and either 
•	c17.20 > 0 or
•	boxes ((CGT6 + CGT17 + CGT26 + CGT34) minus (CGT7 + CGT19 + CGT27 + CGT35) + CGT9 + CGT52 is greater than zero) or
•	CGT51 is not zero or Null or (box CGT18 is not zero or null)
And 
(FOR43 >0 with FOR44 absent, or 
AOI4> 0 with AOI5 absent, or 
AOI6 > 0 with AOI7 absent, or 
AOI8> 0 with AOI9 absent)  

If (FOR43 + AOI4 + AOI6 + AOI8) is greater than zero.
Rework UK tax liability to exclude those items that do not figure in TSR calculation 

Total income
	c17.1	From c5.85 		

Remove lump sums and reverse premiums

Lump sum payments
	c17.2	from c1.58		

Premiums for the grant of a lease 
	c17.3	from PRO22	£down	
	c17.4	c17.2 + c17.3		
	c17.5	c17.1 minus c17.4		

Total Deductions and Allowances
	c17.6	from c4.70		

Gift of investments etc.
	c17.7	from c4.49		Gift of investments etc.,
	c17.8	c17.6 minus c17.7		
	c17.9	c17.5 minus c17.8		Taxable Income for TSR 

Calculate HR threshold for TSR 

Basic rate limit
	c17.10	HR_threshold		HR_theshold = £32,000

Pension payments
	c17.11	from c4.58		
	c17.12	c17.10 + c17.11 		extended basic rate band 

Calculate HR charge for TSR

	c17.13	c17.9 minus c17.12		

Tax due for TSR purposes

Band between Higher rate band & Basic rate band
	c17.14	HR_band		HR_band = £118,000
	c17.15 	Not Used		

Amount due at Higher Rate 
	c17.16	lower of c17.13 and c17.14 		
	c17.17	c17.16 x HR_rate	pup	c17.16 x 40%
 
Amount due at additional rate 
	c17.18	c17.13 minus c17.16 		
	c17.19	c17.18 x AHR_rate	pup	c17.18 x 45%
	c17.20 	c17.17 + c17.19 		
 
If box c17.20 = 0 (zero) and 
boxes ((CGT6 + CGT17 + CGT26 + CGT34) minus (CGT7 + CGT19 + CGT27 + CGT35) + CGT9 + CGT52 <= 0 (zero)) and 
(CGT51 = 0 (zero) or null)) and (box CGT18 = zero or null)) no Top Slicing relief is due

Set box c17.21 and box c17.22 to 1
Else

	c17.21	AOI4 + AOI6 + AOI8 + FOR43	£down	

Calculate appropriate fraction
	c17.22	If AOI4 is present AND AOI5 not present
or
AOI6 is present AND AOI7 not present
or
AOI8 is present AND AOI9 not present
or
FOR43 is present AND FOR44 not present
c17.22 = ITF CEG INPUT AMOUNT 
else
a)	If AOI4 is present, a = the higher of 1 or (AOI4/ AOI5), else a = zero
b)	If AOI6 is present, b = the higher of 1 or ( AOI6/AOI7), else b= zero
c)	If AOI8 is present, c = the higher of 1 or ( AOI8 /AOI9), else c=zero
d)	If FOR43 is present, d = the higher of 1 or (FOR43/FOR44), else d= zero
c17.22 = higher of 1 or ( a + b+ c + d )  
end if    	






† If AOI5 or AOI7 or AOI9 or FOR44 is present and 
less than 1 substitute 1.

if c17.22 is calculated at less than 1 substitute 1	£down
End if

If c17.20 = 0 (zero) 
set boxes c17.23 to c17.48 to zero 
Else 
Calculate c17.23 to c17.48 additional rate on full gains

Higher rates liability on full gain(s)

Additional Rates on full gain(s) 
	c17.23	lower of c17.18 and c17.21 		
	c17.24	c17.23 x AHR_rate 	pdown	c17.23 x 45% 

Remaining gain 
	c17.25	c17.21 minus c17.23 		

Higher Rate on full gain (s) 
	c17.26	lower of c17.16 and c17.25 		
	c17.27	c17.26 x HR_rate 	pdown	c17.26 x 40%

	c17.28	c17.24 + c17.27		
	c17.29 	c17.23 + c17.26 		
	c17.30 	c17.29 x BR_rate 	pdown	c17.29 x 20%

	c17.31	c17.28 minus c17.30 		

Higher rates due on sliced gain(s) 
	c17.32	c17.5 + c17.22 		
	c17.33	 c17.32 minus c17.21 		
	c17.34	 c17.33 minus c17.8 		

Income in Higher Rate bands 
	c17.35	 c17.34 minus c17.12 		

Sliced gain in HR bands 
	c17.36 	lower of c17.22 and c17.35 		
         
Other income in HR bands  
	c17.37 	c17.35 minus c17.36  		
          
Unused HR band
	c17.38 	c17.16 minus c17.37 		

If c17.38 is zero no Top Slicing Relief is due set c17.39 to c17.48 to zero 
 else calculate TSR (boxes c17.39 to c17.48)

	c17.39	lower of c17.36 and c17.38 		
	c17.40	c17.39 x HR_rate	pdown	c17.39  x 40%

	c17.41 	 c17.36 minus c17.39 		
	c17.42	 c17.41 x AHR_rate 	pdown	c17.41 x 45% 
             
If c17.41 = c17.22 no Top Slicing Relief is due
set c17.43 to c17.48 to zero
else

	c17.43	c17.40 + c17.42 		
	c17.44 	c17.36 x BR_rate 	pdown	c17.36 x 20%
	c17.45 	c17.43 minus c17.44 		For one year
	c17.46 	If c17.21 divided by c17.22 > 1 
c17.46 = c17.21 divided by c17.22 
else 
c17.46 = 1
end if 	Truncate to 4 decimal places 
down	
	c17.47 	c17.45 x c17.46 	pdown	For all years

Top Slicing Relief 
	c17.48	 c17.31 minus c17.47  		copy to c9.3 

end if 
   end if
end if 
else 
c17.1 to c17.48 = zero  
end if 

 
Stage 18: Calculate Capital Gains Tax due (c18 boxes)
If any box in this stage is minus substitute zero unless otherwise stated
£down – truncate pence to leave integer pounds
pdown – truncate to two decimal places (to leave pounds and pence)

If boxes ((CGT6 + CGT17 + CGT26 + CGT34) minus (CGT7 + CGT19 + CGT27 + CGT35) + CGT9 + CGT52 is greater than zero) 
or (box CGT51 is not zero or null) or (box CGT18 is not zero or null)
Calculate c18.1 to c18.58

Residential Property & Carried Interest 
Total Gains 
	c18.1	From CGT6	£down	
    
NRCGT
Total Gains 
	c18.2	if CGT9 greater than 0 (zero)
c18.2 = from CGT9
else
c18.2 = 0 (zero)
end if	£down 	
     
Other Gains
Total Gains 
	c18.3	(CGT17 minus CGT50) + CGT26 + CGT34	£down	

ER gains
Total Gains 
	c18.4 	from CGT50	£down	

Residential Property & Carried Interest
Losses brought forward and used in-year
	c18.5	From CGT45 	£up	

NRCGT
Losses brought forward and used in-year
	c18.6	c18.5 minus c18.1		

Other Gains
Losses brought forward and used in-year
	c18.7	c18.5 minus (c18.1 + c18.2)		

ER gains
Losses brought forward and used in-year
	c18.8	c18.5 minus (c18.1 + c18.2 + c18.3)		

Residential Property & Carried Interest
Gains after losses brought forward
	c18.9	c18.1 minus c18.5		

NRCGT
Gains after losses brought forward
	c18.10	c18.2 minus c18.6		

Other Gains
Gains after losses brought forward
	c18.11	c18.3 minus c18.7		

ER gains
Gains after losses brought forward
	c18.12	c18.4 minus  c18.8		

Losses in the year
	c18.13	if CGT9 less than 0 (zero)
c18.13 = CGT7 minus CGT9
else
c18.13 = from CGT7
end if	£up	

 Losses in the year 
	c18.14	CGT19 + CGT27 + (CGT35 minus (CGT41 + CGT43))	£up	
         
Income losses of 2016-17 set against gains
	c18.15 	From CGT46	£up 	

Total losses
	c18.16 	C18.13 + c18.14 + c18.15		

 Total losses
	c18.17	c18.16 minus (c18.9 + c18.10) 		

Total losses
	c18.18	c18.16 minus (c18.9 + c18.10 + c18.11)		

Gains after losses
	c18.19	(c18.9 + c18.10) minus c18.16		

Gains after losses
	c18.20 	c18.11 minus c18.17		

Gains after losses
	c18.21	c18.12 minus c18.18		

Attributed gains
	c18.22	From CGT18	£ down	
  
Total gains after losses
	c18.23	 c18.20 + c18.22		

Annual Exempt amount
Remittance Basis Claim
	c18.24	If (box_NRD28 = Y and box_NRD29 = N and box_NRD16 = N)
  c18.24 = 0 (zero)
    Else
      c18.24 = CG_exempt
End if		CG_exempt = £11,100

     
Annual Exempt amount
	c18.25 	c18.24 minus c18.19		

Annual Exempt amount
	c18.26 	c18.25 minus c18.23		
     
Total gains after AEA and losses
	c18.27 	c18.19 minus c18.24  		
        
Total gains after AEA and losses
	c18.28	c18.23 minus c18.25 		
       
Total gains after AEA and losses
	c18.29	c18.21 minus c18.26 		

Gains chargeable at 10%	
	c18.30	c18.29 x ER_CGT_rate	pdown	c18.29 x10%

Taxable Income 
	c18.31	If calculation type = non-resident
c18.31 = c91.28
Else
c18.31 = c5.86
End if 		

Annualised Gain
	c18.32	If (FOR43 + AOI4 + AOI6 + AOI8) > 0
c18.32 = c17.22
Else
c18.32 = 0 (zero)
End if 		

	c18.33	c18.31 + c18.32
 		
   
Chargeable Event Gains
c18.34	If (FOR43 + AOI4 + AOI6 + AOI8) > 0
c18.34 = c17.21
Else
c18.34 = 0 (zero)
End if 		

c18.35	 c18.33 minus c18.34		

Deficiency Relief 
c18.36	From c7.1		

c18.37	c18.35 minus c18.36		

Basic Rate Band
c18.38	BR_band + c4.59		£32,000 + c4.59

Basic Rate Band available to CG
c18.39	c18.38 minus c18.37		

Available unused Basic Rate Band
c18.40	C18.39 minus c18.29		

Gains chargeable at 18%
c18.41	Lower of c18.27 and c18.40		
c18.42	c18.41 x Lower_CGT_rate_RP_CI	pdown	c18.41 x 18%

Gains chargeable at 28%	
c18.43	c18.27 minus c18.41		
c18.44	c18.43 x Upper_CGT_rate_RP_CI 	pdown	c18.43 x 28%

Available Basic Rate Band after NRCGT
c18.45	c18.40 minus c18.27		

Gains chargeable at 10%
c18.46	Lower of c18.28 and c18.45		

c18.47	c18.46 x Lower_CGT_rate	pdown	c18.46 x 10%

Gains chargeable at 20%
c18.48	c18.28 minus c18.46		

c18.49	c18.48 x Upper_CGT_rate	pdown	c18.48 x 20%

Total CGT charged
c18.50	c18.30 + c18.42 + c18.44 + c18.47 + c18.49		

CGT adjustments
c18.51	From CGT51		This box can be negative

Revised CGT charge
c18.52	c18.50 + c18.51		

Foreign Tax Credit Relief
c18.53	From FOR39 	£up	

CGT minus FTCR
c18.54	c18.52 minus c18.53		

Additional liability from Trusts
c18.55	From CGT52	£down	

Tax on NRCGT Gains already charged
c18.56	From CGT10	£up	

Tax on RTT Gains already charged
c18.57	CGT12 + CGT22 + CGT30 + CGT38	£up	

Capital Gains Tax Due
c18.58	(c18.54  + c18.55) minus (c18.56 + c18.57)		Copy to box c9.29 and copy to box c12.17

Else
    c18.1 to c18.58 = 0 (zero)
  End if

 
Stage 19: Calculate nominated income for remittance basis charge (c19 boxes) 
If any box in this stage is minus substitute zero unless otherwise stated
£down – truncate pence to leave integer pounds
pdown – truncate to two decimal places (to leave pounds and pence)

Remittance basis charge for non-domiciles
c19.1	If (box_ NRD28 = Y, box_NRD29 = N and box_NRD33 = N)
and (NRD34 + NRD35 is greater than 0 (zero))
      If box_NRD30 = Y then c19.1 = RBC_Additional_ch
        else
          If box_NRD31 = Y then c19.1 = Res_non_dom_High_ch 
              else 
                 If box_NRD32 = Y then c19.1 = Res_non_dom_ch 
                  else
                      c19.1 = 0 (zero)
                       end if
                  end if
end if
        end if	 	RBC_Additional_ch = £90,000, Res_non_dom_High_ch =£60,000, Res_non_dom_ch = £30,000
Copy to c9.33 and to c12.11	V5.0
  





























 
Stage 21: Calculate notional tax and tax credits on Lloyds and Trusts dividends (c21 boxes)
If any box in this stage is minus substitute zero
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)

On Lloyd’s dividends

Income from personal funds at Lloyd’s UK dividends
c21.1	LUN6 + LUN7 + LUN8 	£down	

Foreign sources income from assets in personal funds at Lloyd’s
c21.2	LUN15 + LUN16 + LUN17	£down	

Amount received and tax taken off it that does not qualify for dividend credit
c21.3	From LUN19	£down	
c21.4	c21.2 minus c21.3		

Amount that qualifies for dividend tax credit
c21.5	c21.1 + c21.4		

Total taxable profits from Lloyd’s
c21.6	from LUN52	£down	

c21.7	lower of c21.5 and c21.6		

Notional Tax on Lloyds dividends
c21.8	From c5.76		

c21.9	lower of c21.7 and c21.8		

c21.10	lower of LUN7 and (c21.9 x Ldiv_rate)	pup	lower of LUN7 and (c21.9 x 10%)
Copy to box c9.24	V5.0

Notional tax and tax credits
c21.11	lower of c21.6 and c21.8		

c21.12	c21.11 minus c21.9		Copy to box c10.2

 
Stage 22: Calculate notional tax on Trust Income (c22 boxes)
If any box in this stage is minus substitute zero
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)

Discretionary income payment from a UK resident trust

Payments from settlor-interested trusts
c22.1	from c5.84			
c22.2	lower of c6.44 and c22.1			V5.4
c22.3	c22.2 x AHR_rate (45%)	pup	c22.2  x 45%	
c22.4	c22.1 minus c22.2			
c22.5	lower of c6.43 and c22.4 			V5.4
c22.6	c22.5 x HR_rate (40%)	pup	c22.5 x 40%	
c22.7	c22.4 minus c22.5			
c22.8 	c22.7 x BR_rate (20%)	pup	c22.7x 20%	


Income from United Kingdom (UK) estates

Non-savings income taxed at non-repayable basic rate
c22.9	from c5.83 		
c22.10 	c22.9 x BR_rate (20%)	pup	c22.9 x 20%

Income from foreign estates
Relief for UK tax already accounted for
c22.11	from TRU23 	pup	


c22.12	c22.3 + c22.6 + c22.8 + c22.10 + c22.11		copy to c9.25	V5.0

 

Stage 23: Calculate relief on qualifying distributions (c23 boxes)
If any box in this stage is minus substitute zero
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)

If box AOR9 = 0 (zero)
c23.1 to c23.11 = 0 (zero)
else

	c23.1	from c6.34		
	c23.2	( INC4 x divs_gross)  + AOI13	£up	(INC4 x 100/90) + AOI13 
	c23.3	lower of c23.1 and c23.2		
	c23.4	c23.3 x (AHdiv_rate minus Ldiv_rate)	pup	c23.3 x 27.5%

 calculate relief
	c23.5	from c6.33		
	c23.6	c23.2 minus c23.3 		
	c23.7	lower of c23.5 and c23.6 		
	c23.8 	c23.7 x ( Hdiv_rate minus Ldiv_rate)  	pdown	c23.7 x 22.5%
	c23.9 	from AOR9		
	c23.10	c23.4 + c23.8 		
	c23.11	lower of c23.9 and c23.10 		copy to c9.28 

End if

Stage 23: Calculate relief on qualifying distributions (c23 boxes)
If any box in this stage is minus substitute zero
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)

If box AOR9 = 0 (zero)
c23.1 to c23.11 = 0 (zero)
else

Dividend income in additional rate band
	c23.1	from c6.34			V5.4
	c23.2	INC4 + AOI13	£up	(INC4 x 100/90) + AOI13 	V5.0
	c23.3	lower of c23.1 and c23.2			V5.0
	c23.4	c23.3 x divAR_rate	pup	c23.3 x 38.1%	V5.0

Dividend income in higher rate band
	c23.5	from c6.33			V5.4
	c23.6	c23.2 minus c23.3 			V5.0
	c23.7	lower of c23.5 and c23.6 			V5.0
	c23.8 	c23.7 x divHR_rate	pdown	c23.7 x 32.5%	V5.0

calculate relief
	c23.9 	from AOR9			V5.0
	c23.10	c23.4 + c23.8 			V5.0
	c23.11	lower of c23.9 and c23.10 		copy to c9.26a	V5.0


End if

 
Stage 24: Calculate UK tax credit on foreign dividends (c24 boxes)
If any box in this stage is minus substitute zero
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
pup – multiply by 100, add .99, truncate decimals, then divide by 100. (e.g. 3.011 becomes 3.02)

Share options in charge to tax
	c24.1	c3.3 +c3.5		
	c24.2	lower of c24.1 and c5.12		
	c24.3	c24.2 x Ldiv_rate	pdown	c24.2 x 10%

	c24.4	c1.41 + c1.44		
	c24.5	lower of c24.4 and c6.1		
	c24.6	c24.5 x Ldiv_rate	pdown	c24.5 x 10%

	c24.7	c24.3 + c24.6		copy to c9.27
 
Stage 25: Calculate Pension Charges (c25 boxes)
If any box is minus substitute zero
£down – truncate pence to leave integer pounds
pdown – truncate to two decimal places (to leave pounds and pence)

Lifetime Allowance Charge
Excess taken as a lump sum
	c25.1	from AIL7	£down	
	c25.2	c25.1 x LTA_lump	pdown	c25.1 x 55%

Excess taken as a pension
	c25.3	from AIL8	£down	
	c25.4	c25.3  x LTA_pension	pdown	c25.3 x 25%

Calculate Lifetime Allowance Charge
	c25.5	c25.2 + c25.4		
	c25.6	from AIL9		
	c25.7	lower of c25.5 and c25.6		
	c25.8	c25.5 minus c25.7		

Annual allowance Charge
Amount in excess of Pen_AA_limit (£40,000)
Or Pen_MPAA_limit (£10,000) (lower allowance)

	c25.9	from AIL10	£down	

Basic rate band + relevant earnings adjustment
c25.10	BR_band + c4.59 		£32,000 + c4.59
c25.11	If calculation type =  non-resident 
c25.11 = c91.28 
Else 
c25.11 = c5.86 
End if		

Unused Basic Rate Band  
c25.12 	c25.10 minus c25.11 		
c25.13	lower of c25.9 and c25.12 		
c25.14	If pseudo box YPDTR = S, and
calculation type = Resident
c25.14 = c25.13 x SBR_rate
else
c25.14 = c25.13 x BR_rate
end if	pdown	SBR_rate = 20%
BR_rate = 20%
c25.15 	c25.11 minus c25.10  		
c25.16	c25.9 minus c25.13		

Higher Rate Band 
	c25.17	HR_band 		HR_band = £118,000

 Unused Higher Rate Band 
	c25.18	c25.17 minus c25.15 		
	c25.19 	lower of c25.16 and c25.18		
	c25.20 	If pseudo box YPDTR = S, and
calculation type = Resident
c25.20 = c25.19 x SHR_rate
else
c25.20 = c25.19 x HR_rate
end if	pdown	SHR = 40%
HR = 40%
	c25.21	c25.16 minus c25.19 		
	c25.22	If pseudo box YPDTR = S, and
calculation type = Resident
c25.22 = c25.21 x SAHR_rate
else
c25.22 = c25.21 x AHR_rate
end if	pdown	SAHR = 45%
AHR = 45%
	c25.23 	c25.14 + c25.20 + c25.22 		

Tax paid by pension scheme 
	c25.24	from AIL11		
	c25.25	lower of c25.23 and c25.24 		
	c25.26	c25.23 minus c25.25 		

Unauthorised payments
Not subject to Surcharge amount 
	c25.27	from AIL13 	£down 	
	c25.28	c25.27 x Pen_Upayts	pdown	c25.27 x 40%

Subject to Surcharge amount 
c25.29 	from AIL14	£down	
c25.30	c25.29 x Upayts_surcharge	pdown	c25.29 x 55%

Unauthorised payment charge and surcharge 
c25.31	c25.28 + c25.30		

Foreign Tax deducted 
c25.32 	from AIL15		
c25.33	lower of c25.31 and c25.32		

Unauthorised payment charge and surcharge due
c25.34	c25.31 minus c25.33		

(Overseas) short service refund charge
Taxable short service refund of contributions from an overseas pension scheme
	c25.35	from AIL16	£down	
	c25.36	SSR_lower_band		SSR_lower_band = £20,000
	c25.37	lower of c25.35 and c25.36		
	c25.38	c25.37 x SSR_lower_rate	pdown	c25.37 x 20%
	c25.39	c25.35 minus c25.37		
	c25.40	c25.39 x SSR_higher_rate	pdown	c25.39 x 50%
	c25.41	c25.38 + c25.40		

Overseas Special Charges
Taxable lump sum benefit payment (overseas pension schemes only)
	c25.42	From AIL17	£down	
	c25.43	c25.42 x SLSDB_rate	pdown	c25.42 x 45%

	c25.44	c25.41+ c25.43  		

Foreign tax deducted 
c25.45	From AIL18		
c25.46	Lower of c25.44 and c25.45		

Special lump sum death benefit charge due  
c25.47	c25.44 minus c25.46		

Total pension charges

Total pensions savings charges
	c25.48	c25.8 + c25.26 + c25.34 + c25.47		copy to c12.9

The following 2 boxes are used on SA302 only

Charges before tax
c25.49	c25.5 + c25.23 + c25.31 + c25.44 		

Tax treated as paid
c25.50	c25.7 + c25.25 + c25.33 + c25.46 		

Calculate if correct Pension Tax Relief at source received

Gross pension payments
c25.51	from c4.58 			V5.5

Basic rate tax relief at source
c25.52	c25.51 x BR_rate		c25.51 x 20%	V5.5

Basic rate tax relief at source due
c25.53	If pseudo box YPDTR = S, and
calculation type = Resident
c25.53 = c25.51 x SBR_rate
else
c25.53 = c25.51 x BR_rate
end if		SBR_rate = 20%
BR_rate = 20%
	V5.5

Basic rate additional tax due for pension payments
c25.54	c25.52 minus c25.53			V5.5

Basic rate additional tax relief due for pension payments
c25.55	c25.53 minus c25.52			V5.5
 
Stage 26: Calculate State Retirement Lump sum charge (c26 boxes)
If any box in this stage is minus substitute zero
£down – truncate pence to leave integer pounds
pdown – truncate to two decimal places (to leave pounds and pence)

National Insurance Retirement Pension paid as a lump sum

	c26.1	from INC9	£down	

If c26.1 = 0 (zero) or
c5.86 = 0 (zero)
Set c26.2 to c26.3 to 0 (zero)
Else

	c26.2	If pseudo box YPDTR = S, and Calculation type = Resident
            If c8.5 or c8.15 or c8.23 is greater than 0 (zero)
                            c26.2 = SAHR_rate 45%
                else
                        if c8.3 or c8.13 or c8.21 is greater than 0 (zero)
                                         c26.2 = SHR_rate 40%
                           else
                                         c26.2 = SBR_rate 20%
                           end if
                end if
else
(pseudo box YPDTR <> S, or Calculation type = NON-Resident)
                If c8.5 or c8.15 or c8.23 is greater than 0 (zero)
                           c26.2 = AHR_rate 45%
                else
                           if c8.3 or c8.13 or c8.21 is greater than 0 (zero)
                                           c26.2 = HR_rate 40%
                            else
                                           c26.2 = BR_rate 20%
                             end if
                end if
end if		SAHR_rate 45%
SHR_rate 40%
SBR_rate 20%
AHR_rate 45%
HR_rate 40%
BR_rate 20%
	c26.3	c26.1 multiplied by c26.2	pdown	copy to c12.10

    End if 
 
Stage 27: Calculate Student Loan repayment (c27 boxes)
If any box in this stage is minus substitute zero
£down – truncate pence to leave integer pounds
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)

If SLR1 = Y
 Calculate net SL repayment (c27.1 to c27.44) 

Total SL income from all employments

Complete a box c27.1c for each instance of the employment schedule
	c27.1a	(EMP1 + EMP3 + EMP12 + EMP16) 	£down	£ down for each employment
	c27.1b	(EMP17 + EMP18 + EMP19 + EMP20)	£up	£ up for each employment
	c27.1c	C27.1a minus C27.1b		

	c27.2	ASE1 + ASE3 +  ASE4 + ASE5	£down	
	c27.3	All instances C27.1c + C27.2		
	c27.4	ASE11 + ASE12 + ASE13	£up	
	c27.5	C27.3 minus C27.4		

Part-time teacher's excluded income

Complete c27.6c for each instance of employment where EMP8 = Y
	c27.6a	(EMP1 + EMP3 + EMP12 + EMP16) 	£down	£ down for each employment
	c27.6b	(EMP17 + EMP18 + EMP19 + EMP20)	£up	£ up for each employment
	c27.6c	C27.6a minus C27.6b	£down	


Calculate adjustment to total SL income from all employments
	c27.7	If pseudo box SLRPT = 01 and
  all instances c27.6c are greater than SL_limit1
    c27.7 = all instances c27.6c minus SL_limit1
else
      If pseudo box SLRPT = 02 and
        all instances c27.6c are greater than SL_limit2
          c27.7 = all instances c27.6c minus SL_limit2
else
            c27.7 = 0 (zero)
            end if
          end if		SL_limit1 = £17,495
SL_limit2 = £21,000


	c27.8	C27.5 minus C27.7		

Total SL earned income
Complete a box c27.9c for each instance of MOR schedule
	c27.9a	(MOR38 + MOR17)	£down
- each instance	Ministers of religion
	c27.9b	(MOR6 + MOR19)	£up – each instance	
	c27.9c	C27.9a minus c27.9b		
	c27.9	Total all instances of C27.9c		

	c27.10	Total all instances (SSE31)	£down
	For each SSE £ down
Short Self Employment
	c27.11	Total all instances (FSE76)	£down	For each FSE £ down Full Self Employment
	c27.12	from LUN52	£down	Lloyds
	c27.13	Total all instances (SPS20)	£down
- each instance	For each SSP £ down
Short Partnerships
	c27.14	Total all instances (FPS76)	£down
- each instance	For each FPS  £ down
Partnerships
	c27.15	all instances of PRO15 	£down	UK Property
	c27.16	INC8 + INC11 + INC16 	£down	Pensions and benefits
	c27.17	c27.8 + c27.9 + c27.10 + c27.11 + c27.12 + c27.13 + c27.14 + c27.15 + c27.16		total

Total SL unearned income
	c27.18	Total all instances (SPS28 + FPS35 + FPS70 + FPS73)	£down
- each instance	For each SPS and FPS £ down
partnerships
	c27.19	from PRO40	£down	UK Property
	c27.20	c1.35 + c1.37 + c1.44 + c2.9 + c3.5 + c3.16	£down	Foreign
	c27.21	c1.51 + c2.13 + c3.9 + c3.19		Trusts
	c27.22	c2.17 + c3.14		Savings and divs
	c27.23	From INC15	£down	Pensions
	c27.24	AOI4 + AOI6 + AOI8	£down	Gains
	c27.25	from c1.56		other income
	c27.26	 C27.18 + C27.19 + C27.20 + C27.21 + C27.22 + C27.23 + C27.24+ C27.25		total

Apply SL Unearned Income Threshold
	c27.27	SL_UIT		SL_UIT = £2000
	c27.28	If c27.26 is greater than c27.27
c27.28 = c27.26
else
c27.28 = zero
end if		

Total Income
	c27.29	c27.17 + c27.28		

Total SL deductions
	c27.30	Total all instances (SSE33) 	£up (each instance)	
	c27.31	Total all instances (FSE78)	£up (each instance)	
	c27.32	from LUN56	£up	
	c27.33	Total all instances (SPS22) 	£up (each instance)	
	c27.34	Total all instances (FPS22 + FPS39) 	£up (each instance)	
	c27.35	from PRO42	£up	
	c27.36	from FOR31	£up	

Post-cessation trade relief and certain other losses
c27.37	from AOR6	£up	
 
Total deductions 
c27.38	REL1 + REL2 + REL3 + REL4	£up	
c27.39	C27.30 + C27.31 + C27.32 + C27.33 + C27.34 + C27.35 + C27.36 + C27.37+ C27.38 		


Total income on which Student Loan Repayments Due
	c27.40	C27.29 minus C27.39		
	c27.41	If pseudo box SLRPT = 01
c27.41 = c27.40 minus SL_limit1 (£17,495)
else
If pseudo box SLRPT = 02
c27.41 = c27.40 minus SL_limit2 (£21,000)
end if
end if		SL_limit1 = £17,495
SL_limit2 = £21,000

Student Loan Repayment Due
	c27.42	C27.41 x SLoan_rate	£down	C27.41 x 9%

PAYE Student Loan repayments made
	C27.43	from SLR2	£up	

Net Student Loan Repayment Due Through Self Assessment 
	C27.44	c27.42 minus c27.43	pup	Copy to c12.7

else  
 c27.1 to c27.44 = 0 (zero)
end if  

 
Stage 28: Calculate Adjusted Net Income for Child Benefit Tax Charge (c28 boxes) 
If any box in this stage is minus substitute zero
£down – truncate pence to leave integer pounds
£up – add .99 and truncate pence to leave integer pounds (e.g. 3.01 becomes 4)
pdown – truncate to two decimal places (to leave pounds and pence)

Boxes c28.1 to c28.6 not used

 Adjusted Net Income for Child Benefit charge  
c28.7	from c4.63		
Income limit
c28.8	CBC_HR_threshold		CBC_HR_threshold = £50,000
 Adjusted net income in excess of child benefit 
c28.9	 c28.7 minus c28.8 		 

c28.10 	c28.9 x (CBC_taper)	£down	c28.9 x 1%

c28.11	From CBC1	£down	

c28.12	c28.11 x (CBC_taper)	pdown	c28.11x 1%

c28.13	c28.10 x c28.12 		

c28.14	lower of c28.11and c28.13  	£down	copy to c9.34 and c12.8	V5.0

 
Stage 29: Calculate non-residents excluded income (c91 boxes)
If any box in this stage is minus substitute zero
£down – truncate pence to leave integer pounds
pdown – truncate to two decimal places (to leave pounds and pence)

Complete boxes c91.1 to c91.35 below
Recalculate boxes c5.1 to c12.21 using the adjusted figures calculated below
Retain the lower of box c12.18 calculated using the original figures, or box c12.18 calculated using the adjusted figures

If NRD1 = N
Set boxes c91.1 to c91.39 to zero
else

Income
	c91.1	from c1.57		

Disregarded Income
	c91.2	INC8 + INC13 + INC15 + INC16	£down	
	c91.3	c1.46 + c1.47		(TRU1 + TRU10 x trust_gross (100/55)]
	c91.4	from c1.49		TRU20 x Gross_BY_22 (100/78)]

Chargeable income

Non savings Income
	c91.5	c91.2 + c91.3 + c91.4		
	c91.6	c91.1 minus c91.5		Copy to c5.35

Income
Lump sums
	c91.7	from c1.58		Copy to c5.4

Income
Savings income
	c91.8	from c2.19		

Excluded income
Savings income
	c91.9	from c2.14 		INC1 x 100/80
	c91.10	from INC2	£down	
	c91.11	from AOI3	£down	
	c91.12	from c2.10 		(TRU4 + TRU8 + TRU17) x 100/80
	c91.13	c91.9 + c91.10 + c91.11 + c91.12		

Chargeable income
Savings income
	c91.14	c91.8 minus c91.13		copy to c5.37

Income
Dividends etc: Foreign
	c91.15	from c3.5		
	c91.16	from c91.15		

Chargeable income
Dividends etc: Foreign
	c91.17	c91.15 minus c91.16		Copy to c5.10

Income
Dividends etc: Stock
	c91.18	c3.12 + c3.13	£down	

Excluded income
Dividends etc: Stock
c91.19	From c91.18		

Chargeable income
Dividends etc: Stock
	c91.20	c91.18 minus c91.19		Copy to c5.13

Income
Dividends etc: UK
	c91.21	c3.15 minus (c3.5 + c3.12 + c3.13)		

Excluded income
Dividends etc: UK
c91.22	c91.21 minus c3.1 	pdown	

Chargeable income
Dividends etc: UK
	c91.23	c91.21 minus c91.22		Copy to c5.40

Income
Gains on life policies with notional tax
	c91.24	from c3.18		Copy to c5.19

Income
Non savings income etc. with notional tax.
	c91.25	from c3.19		Copy to c5.22
	c91.26	from c3.20		Copy to c5.25

Total Disregarded Income
	c91.27	c91.5 + c91.13 + c91.16 + c91.19 + c91.22		

Total Chargeable Income 
	c91.28	c91.6 + c91.7 + c91.14 + c91.17 + c91.20 + c91.23 + c91.24 + c91.25 + c91.26		copy to c5.85

Tax deducted on disregarded income
	c91.29	from INC14	pup	
	c91.30	c91.3 x AHR _rate	pup	c91.3 x 45%

	c91.31	c91.4 x OLD_BR	pup	c91.4 x 22%

Savings tax deducted on disregarded income
	c91.32	from c11.27		
	c91.33	from AOI2	pup	
	c91.34	c91.12 x BR_rate	pdown	c91.12 x 20%
Dividend tax deducted on disregarded income
	c91.35	c91.19 x Ldiv_rate	pdown	c91.19 x 10 %
add to c9.20

	c91.36	c91.22 x Ldiv_rate	pdown	c91.22 x 10%
add to c10.18
	c91.37	lower of c3.9 and c91.22		
	c91.38 	c91.37 x (AHdiv_rate minus Ldiv_rate) 	pdown	c91.37 x 27.5%

Total tax deducted on excluded income
	c91.35	c91.29 + c91.30 + c91.31 + c91.32 + c91.33 + c91.34		Add to figure in box c8.21

end if
 
Annex A: Format SA302 style calculation
Data name	MTR Calculation box	Notes	
Pay-E	c1.4 + c1.58		
Benefits-E	c1.5		
Exps-E	c1.8		
income-E	c1.9 + c1.58		
income-Shares	c1.10		
income-D	c1.17 + c 1. 20		
income-D(PTR)	c1.27 + c2.3 + c3.1		
income-IFP	c1.34		
income-Foreign	c1.35 + c1.40 + c1.44 + c2.9 + c3.16		
Foreign-dividends	c3.5		
income-Trust	c1.51 + c2.13 + c3.9 + c3.19 + c3.20		
income-Case3	c2.17		
income-F	c3.14		
income-Pensions	c1.52		
income-CEG	c2.18 + c3.17		
income-Other	c1.56		
income-Total	c3.21		
dedn-RAR	c4.48		
dedn-Trust	c4.54		
ded-Loss	c4.39		
ded-loss-restricted	c4.47		
dedn-Annuity	c4.51		
dedn-Gift	c4.49		
Allce-PA	c4.64		
AllceOut-TPA	c4.68		
Allce-BPA	c4.65		
Allce-BPA-Spare	c4.66		
Income-Excluded	c4.71			
Allce-dedn-total	c4.72		
taxable-income	c5.86		
ppr-extender	c4.58		
gift-extender	c4.57		
extended-BR	From c5.2		V5.0
taxable-pay-BR	c8.1		
tax-on-pay-BR	c8.2		
taxable-pay-HR	c8.3		
tax-on-pay-HR	c8.4		
taxable-pay-AHR	c8.5		
tax-on-pay-AHR	c8.6		
taxable-int-SR	c8.7		
tax-on-int-SR	c8.8		
income-Savings-taxfree	c8.9		
taxable-int-BR	c8.11		
tax-on-int-BR	c8.12		
taxable-int-HR	c8.13		
tax-on-int-HR	c8.14		
taxable-int-AHR	c8.15		
tax-on-int-AHR	c8.16		
divs-taxfree	c8.17		
Data name	MTR Calculation 	Notes	
taxable-divs-BR	c8.19		
tax-on-divs-BR	c8.20		
taxable-divs-HR	c8.21		
tax-on-divs-HR	c8.22		
taxable-divs-AHR	c8.23		
tax-on-divs-AHR	c8.24		
tax-on-excluded-inc	c8.25		
tax-charged	c8.26		
deficiency relief 	c9.2		
TSR	c9.3		
VCT	c9.5		
EIS	c9.7		
SEIS relief	c9.9		
CITR	c9.11		
SITR	C9.13		
Alimony	c9.15 x 10%		
MCA-amount	c9.16		
MCA-relief	c9.16 x 10%		
spare-MCA-amount	c9.17		
spare-MCA-relief	c9.17 x 10%		
AllceIn-TPA	c9.20		
AllceIn-TPA-relief	c9.20 x 20%		
notional-CEG	c9.23		
notional-other	c9.26		
Tax-credits-on-FOR-divs	c9.27		
FTCR	c9.28		
relief-on-qual-distn	c9.26a		
IT-after-allces	c9.29		
Gift-aid-amount	c9.30		
Gift-aid-tax-due	c9.31		
total-CG-due	c12.17		
non-dom-charge-amount	c19.1		
Child-Benefit-tax-charge	c12.8		
Pens-tax-due	c25.54		
Gift-aid-tax-reduced	c9.36		
IT-after-gift-aid	c9.37		
annuity-amount	c9.38		
annuity-tax	c9.39		
div-tax-credits	c10.4		
IT-after-div-tax-credits	c12.1		
NIC-amount	c16.15		
NIC-charge	c16.16		
NIC-sup-amount	c16.17		
NIC-sup-charge	c16.18 		
NIC4-amount	c12.2		
NIC1-amount	c16.21		
NIC2-amount	c12.3		
NIC-total	c12.4		
unpaid-tax-in-code	c12.6		
Student-loan	c12.7		
Child-Benefit-tax-charge	c12.8		
Pension-charges-gross	c25.49		
Pension-charges-tax-paid	c25.50		
Pension-charges	c12.9		
Data name	MTR Calculation 	Notes	
Pension-lump-sum-amount	c26.1		
Pension-lump-sum-rate	c26.2		
Pension-lump-sum-tax	c12.10		
non-dom-charge-amount	c19.1		
pens-tax-rel-due	c25.55		
IT-plus-class4	c12.12		
tax-paid-E	c11.5		
debt-coded	c11.6		
debt-collected	c11.7		
SA-E-tax	c11.8		
tax-paid-D	c11.9 + c11.10 + c11.11		
tax-paid-D(PTR)	c11.12 + c11.13		
tax-paid-IFP	c11.14		
tax-paid-Foreign	c11.15		
tax-paid-Trust	c11.25		
tax-paid-Overseas	c11.26		
tax-paid-Case3	c11.27 + c11.28		
tax-paid-CEG	c11.29		
tax-paid-Other	c11.30		
coded-in-later-year	c12.14		
total-tax-paid	c12.15		
Total-IT-class4-due	c12.16 Absolute Value	Remove minus sign	
Taxable-CG	c18.27 + c18.28 + c18.29		
CG-at-ER-rate	c18.29		
ER-rate-CGT	c18.30		
CG-at-lower-rate	c18.46		
Lower-rate-CGT	c18.47		
CG-at-higher-rate	c18.48		
Higher-rate-CGT	c18.49		
CG-at-lower-rate-RP-CI	c18.41		
Lower-rate-CGT-RP-CI	c18.42		
CG-at-higher-rate-RP-CI	c18.43		
Higher-rate-CGT-RP-CI	c18.44		
CGT-adjustment	c18.51	can be minus	
Total-CGT-tax	c18.52		
CG-FTCR	c18.53		
CG-trust-tax	c18.55		
Tax-on-gains-already-charged	c18.56 + c18.57		
total-CG-due	c12.17		
Total-IT-CG-class4-due	c12.18 (Absolute value)	Remove minus sign	
tax-already-refunded	c12.19		
unpaid-tax-bf	c12.20		
AllceIn-TPA	c12.21		
AllceIn-TPA-relief	c12.22		
AllceIn-TPA	c12.21		
AllceIn-TPA-relief	c12.22		
AllceIn-TPA-relief-restricted	c12.24		
Total-tax-NIC-due	c12.21 (Absolute value)	Remove minus sign	
 
SA302 layout
The logical page layout of the SA302. 
		Tax Calculation for 2016-17(year ended 5 April 2017)				

L1		Income received (before tax taken off)				
L2									
L3		Pay from all employments	Pay-E				
L4		plus	Benefits and expenses received	Benefits-E			
L5		minus	Allowable expenses	Exps-E				
L6		Total from all employments		income-E			
or		Pay from all employments		income-E			
L7		Share schemes		income-Shares		
L8		Profit from self-employment		income-D			
L9		Profit from partnerships		income-D(PTR)		
L10		Profit from UK land and property		income-IFP			
L11		Foreign income		income-Foreign		
L11A		Dividends from foreign companies		Foreign-dividends			
L12		Trusts and estates		income-Trust			
L13		Interest from UK banks, building societies and securities etc	income-Case3		
L14		Dividends from UK companies 	income-F			
L15		UK pensions and state benefits		income-Pensions		
L16		Gains on life insurance policies etc.		income-CEG			
L17		Other income		income-Other			
L18		Total income received		income-Total		
L19									
L20		minus 						
L21									
L22		Payments into a retirement annuity contract etc			ded-RAR			
L23		Foreign tax on estates (tax credit relief not claimed)	dedn-Trust			
L25

or  		Income Tax relief

Income tax relief £ £ded-Loss reduced to maximum allowable		dedn-Loss

ded-loss-restricted			
L26		Annuities			dedn-Annuity			
L27		Gift of investments and property to charity	dedn-Gift			
L29		Personal Allowance		Allce-PA			
or		Age- Related Personal Allowance		Allce-PA			
or		Reduced  Personal Allowance		Allce-PA			
or		minus Personal Allowance			Allce-PA		
or		minus Age -related Personal 		Allce-PA		
or		minus Reduced Personal Allowance			Allce-PA		
L30

or		less Marriage Allowance transfer

less Marriage Allowance transfer    		

AllceOut-TPA                             	AllceOut-TPA		
L31		Blind Person's Allowance		Allce-BPA			
L32		Blind person's surplus allowance from spouse	Allce-BPA-Spare		
L33		Income excluded from this calculation		Income-Excluded		
L34		Total 				Allce-dedn-total		
L35									
L36		Total income on which tax is due	taxable-income		
or		Total income 	taxable-income		
L37									
L38		How  I have worked out your Income Tax				
L39		Your basic rate limit has been increased by £ppr-extender and £gift-extender to £extended-BR for pension
or		Your basic rate limit has been increased by £ppr-extender to £extended-BR for pension payments etc.
or		Your basic rate limit has been increased by £gift-extender to £extended-BR for Gift Aid payments.	
L40		payments etc. and Gift Aid payments. This reduces the amount of income charged to higher rates of tax.
or		 This reduces the amount of income charged to higher rates of tax.		
L41									
L42		Pay, pensions, profit etc. (UK rate for England, Wales and Northern Ireland).			
or		Pay, pensions, profit etc. (Scottish income tax rate).			
or		Pay, pensions, profit etc.			
L43				Basic rate	taxable-pay-BR	x 20% =	tax-on-pay-BR
or				Basic rate	taxable-pay-BR	x 20% =	tax-on-pay-BR
L44					Higher rate	taxable-pay-HR	x 40% =	tax-on-pay-HR
or					Higher rate	taxable-pay-HR	x 40% =	tax-on-pay-HR
L44a				Additional rate	 taxable- pay-AHR	x 45% =	tax-on-pay AHR
or				Additional rate	 taxable- pay-AHR	x 45% =	tax-on-pay AHR
L45									
L46		Savings interest from banks or building societies, securities etc.			
or		Savings interest from banks or building societies, securities and gains on life policies			
or		Gains on life policies			
L46a		 Starting rate	taxable-int-SR	x 0% =	tax-on-int-SR
L46b			Nil rate	Income-savings-taxfree	x 0%=	£0.00
L47				Basic rate	taxable-int-BR	x 20% =	tax-on-int-BR
L48				Higher rate	taxable-int-HR	x 40% =	tax-on-int-HR
L48a				Additional rate	taxable-int-AHR	x 45% =	tax-on-int-AHR
L49									
L50				 Dividends from companies etc.			
L50a				Nil rate	Divs-taxfree	x 0% =	£0.00
L50b				Basic rate	Taxable-divs-BR	x 7.5% =	Tax-on-divs BR
L51				Higher rate	Taxable-divs-HR	x 32.5% =	Tax-on-divs HR
L52				Additional rate	Taxable-divs-AHR	x 38.1% =	Tax-on-divs AHR
L53		Total income on which tax has been charged		taxable-income	
L54									
L55		plus	Tax on income excluded from this calculation			tax-on-excluded-inc
L56		Income Tax charged					tax-charged
or		Income Tax charged			(A)		tax-charged
or		Income Tax due					tax-charged
or		Income Tax due			(A)		tax-charged
L57									
L57a		minus	Deficiency relief 						deficiency-relief
L58		minus	Top Slicing Relief					TSR
L59		minus	Venture Capital Trust relief				VCT
L60		minus	Enterprise Investment Scheme relief				EIS
L60a		minus	Seed Enterprise Investment Scheme relief				SEIS relief
L61		minus	Community Investment Tax Relief				CITR
L62		minus	Social Investment Tax Relief				SITR
L63		minus	Maintenance and alimony paid				Alimony
L64		minus	Married Couple's Allowance	MCA-amount	x 10% =	MCA-relief
L65		minus	Surplus Married Couple's Allowance from spouse	spare-MCA-amount	x 10% =	spare-MCA-relief
L66		minus	Marriage Allowance Transfer	AllceIn-TPA	x 20% =	AllceIn-TPA-relief
L68		minus	Notional tax from gains on life policies etc.			notional-CEG
L69		minus	Notional tax from stock dividends and other income			notional-other
L70		minus	10% tax credits on foreign dividends (not repayable)			Tax-credits-on-FOR-divs
L72		minus	Foreign Tax Credit Relief					FTCR
L74		minus	Relief claimed on a qualifying distribution			relief-on-qual-distn
L76		Income Tax due after allowances and reliefs			IT-after-allces
or		Income Tax due after allowances and reliefs 	(A)		IT-after-allces
L77									
L78		Tax due on Gift Aid payments		(B)	Gift-aid-amount	x 20% =	Gift-aid-tax-due
or		Tax due on Gift Aid payments		Gift-aid-amount	x 20% =	Gift-aid-tax-due	
L79			minus	Capital Gains Tax due			total-CG-due	
L79a			minus	Remittance basis charge for non-domiciles	non-dom-charge-amount	
L79b			minus	High Income Child Benefit Charge 	Child-Benefit-tax-charge	
L79c			minus	Additional tax due on pension payments	pens-tax-due	
L80							(B)	Gift-aid-tax-reduced
L81		Income Tax due after Gift Aid	Higher of A or B		IT-after-gift-aid
L82									
L83		plus	Tax due on annuity and royalty payments	annuity-amount	x 20% =	annuity-tax
L84		minus	10% tax credits on dividends from UK companies (not repayable) 			div-tax-credits
L85		Income Tax due after dividend tax credits		IT-after-div-tax-credits
or		Income Tax due				IT-after-div-tax-credits
L86									
L87		plus	Class 4 National Insurance contributions		NIC-amount	x 9% =	NIC-charge
or		plus	Class 4 National Insurance contributions	NIC-sup-amount	x 2% =	NIC-sup-charge
or		plus	Class 4 National Insurance contributions				
L88						NIC-amount	x 9% =	NIC-charge	
L89						NIC-sup-amount	x 2% =	NIC-sup-charge
L89a		Plus	Class 4 National Insurance Contributions		NIC4-amount	
L89b			Your Class 4 has been adjusted for Class 2 due and NIC1-amount primary Class 1 contributions			
L89c		Plus	Class 2 National Insurance Contributions		NIC2-amount	
L90			Total Class 4 National Insurance contributions due			NIC-total
or 			Total Class 2 National Insurance contributions due                                                                                                        			NIC-total
or			Total Class 2 and Class 4 National Insurance contributions due			NIC-total
L91									
L92		plus	Underpaid tax for earlier years in your tax code for 2016-17			unpaid-tax-in-code
L93		plus	Student Loan repayments (plan 01)					Student-loan
or		plus	Student Loan repayments (plan 02)					Student-loan
L93a		plus	High Income Child Benefit Charge					Child-Benefit-tax-charge
L93b		plus	Total pension savings charges (£Pension_charges_gross minus tax treated as paid £Pension_charges_tax_paid)	Pension-charges
L93c		plus	State Pension lump sum payment	Pension-lump-sum-amount	x xx%=	Pension-lump-sum-tax
L93d		plus	Remittance basis charge for non-domiciles		non-dom-charge-amount
L93e		plus	Additional tax due on pension payments		pens-tax-due
L93f		plus	Additional tax relief due on pension payments		pens-tax-rel-due
L94
Or
Or
		Income Tax and Class 4 National Insurance contributions due
Income Tax and Class 2 National Insurance contributions due
Income Tax, Class 2 and Class 4 National Insurance contributions due		IT-plus-class4
IT-plus-class4
IT-plus-class4
or		Income Tax due					IT-plus-class4
L95									
L96		minus	Tax deducted					
L97 

or		

	From all employments, UK pensions and state benefits
From all employments, UK pensions and state benefits		


tax- paid-E 	tax-paid-E	
L97a			 minus Outstanding Debt Collected through PAYE		Debt_ collected		
L97b			Balance of PAYE tax			SA-E-tax	
L98			CIS and trading income			tax-paid-D	
L99			Partnerships			tax-paid-D(PTR)	
L100			UK land and property			tax-paid-IFP	
L101			Foreign income			tax-paid-Foreign	
L102			Trusts and estates				tax-paid-Trust	
L103			Overseas income			tax-paid-Overseas	
L104			Interest received from UK banks and building societies	tax-paid-Case3	
L106			Void ISAs				tax-paid-CEG	
L107			Other income			tax-paid-Other	
L108			Underpaid tax for 2016-17 included in your tax code for 2017-18	coded-in-later-year	
L109			Total tax deducted					total-tax-paid
L110									
L111

		Income Tax and Class 4 National Insurance contributions due 
Income Tax and Class 2 National Insurance contributions due
Income Tax, Class 2 and Class 4 National Insurance contributions due	Total-IT-class4-due
Total-IT-class4-due
Total-IT-class4-due
or		Total Income Tax due				Total-IT-class4-due
or		Income Tax overpaid				Total-IT-class4-due
L112									
L113		plus 	Capital Gains Tax					
L113a			Taxable capital gains	Taxable-CG		
L114			Gains that qualify for Entrepreneurs’ relief	CG-at-ER-rate	x 10%=	ER-rate-CGT	
L115			Residential property and carried interest basic rate	CG-at-lower-rate-RP-CI	x 18%=	Lower-rate-CGT-RP-CI	
L115a			Residential property and carried interest	CG-at-higher-rate-RP-CI	x 28%=	Higher-rate-CGT-RP-CI	
L116			Other gains basic rate	CG-at-lower-rate	x 10%=	Lower-rate-CGT	
L116a			Other gains	CG-at-higher-rate	x 20%=	Higher-rate-CGT	
L117a			Capital Gains Tax adjustment 			CGT_adjustment	
L117b		
				Total-CGT-tax	
L118			minus	Foreign Tax Credit Relief on capital gains			CG-FTCR	
L119			plus 	Liability from off-shore trusts			CG-trust-tax	
L120			minus	Tax on gains already charged			tax-on-gains-already-charged	
L120a			Capital Gains Tax due					total-CG-due
L120b						
L121

		Income Tax, Capital Gains Tax, and Class 4 National Insurance contributions due 
Income Tax, Capital Gains Tax, and Class 2 National Insurance contributions due
Income Tax, Capital Gains Tax, Class 2 and Class4 National Insurance contributions due	Total-IT-CG-class4-due
Total-IT-CG-class4-due
Total-IT-CG-class4-due
or		Income and Capital Gains Tax due				Total-IT-CG-class4-due
or		Income Tax overpaid				Total-IT-CG-class4-due
L122									
L123		plus	Tax already refunded in the year			tax-already-refunded
or		minus	Tax already refunded in the year			tax-already-refunded
L124		plus	Unpaid tax calculated by reference to earlier years				unpaid-tax-bf
or		minus   Unpaid tax calculated by reference to earlier years	unpaid-tax-bf
L125a		minus	Marriage Allowance transfer				AllceIn-TPA-relief
L125b		minus	Marriage Allowance transfer £AllceIn-TPA x 20% = AllceIn-TPA-relief reduced to maximum of				AllceIn-TPA-relief-restricted
L126		Total tax and National Insurance contributions due	Total-tax-NIC-due
or		Total tax due 				Total-tax-NIC-due
or		Income Tax overpaid				Total-tax-NIC-due

Note L29: If Allce_PA > P_A ‘Age Allowance’, If Allce_PA < P_A ‘Reduced Personal Allowance, If Allce_PA = P_A  ‘Personal Allowance’.

Note. L93b: the xx in " x xx%=" is c26.2 x 100, embedded in text " x " "% =". e.g. if c26.2 = .2 text will be " x 20% ="


 
Notes for printing conditions

Most lines only print if the associated data item is greater than zero, other conditions are:

Line L6: If Pay-E > 0 and (Benefits-E + Exps-E > 0) then print 'Total from all employments' 
else if Pay-E > 0 print 'Pay from all employments'

L25 : If ded-Loss > ded-loss-restricted then print
Income tax relief £ded-Loss reduced to maximum allowable £ded-loss-restricted 
Else
Income tax relief £ded-Loss

Line L29: If Allce-PA = Allce-dedn-total then do not print lines L20 and L34.
Print " minus Personal allowance					Allce-PA"

Line L30: if AllceOut-TPA > 0
if Allce_PA<>Allce_dedn_total and if Allce_PA >0
Print “ less Marriage Allowance transfer 				AllceOut-TPA"
else if AllceOut-TPA > 0, and if Allce_PA=Allce_dedn_total and if Allce_PA >0 
Print " less Marriage Allowance transfer					AllceOut-TPA"

Line L36: If taxable-income>0
Print "Total income on which tax is due"
else
Print "Total income")


Line L42: Do not print if taxable-pay-BR + taxable-pay-HR + taxable-pay-AHR) = 0
Else if tax calculation = non-resident then print “Pay, pensions, profit etc.”
Else if pseudo box YPDTR = S then print “Pay, pensions, profit etc. (Scottish income tax rate)”
else print "Pay, pensions, profit etc. (UK rate for England, Wales and Northern Ireland)''

Line L43: Do not print if taxable-pay-BR + taxable-pay-HR + taxable-pay-AHR) = 0
Else if pseudo box YPDTR = S then print  “Basic rate”   taxable-pay-BR	   SBR-rate tax-on-pay-BR
else print 				"Basic rate”   taxable-pay-BR	   BR-rate   tax-on-pay-BR

Line L44: Do not print if taxable-pay-BR + taxable-pay-HR + taxable-pay-AHR) = 0
Else if pseudo box YPDTR = S then print  “Higher rate”   taxable-pay-HR	   SHR-rate tax-on-pay-HR
else print 				"Higher rate”   taxable-pay-HR	   HR-rate   tax-on-pay-HR

Line L44a: Do not print if taxable-pay-BR + taxable-pay-HR + taxable-pay-AHR) = 0
Else if pseudo box YPDTR = S then print “Additional rate”  taxable-pay-AHR SAHR-rate tax-on-pay-AHR
else print 				"Additional rate” taxable-pay-AHR AHR-rate   tax-on-pay-AHR

Line L47: Do not print if taxable-int-BR + taxable-int-HR = 0
else if income-CEG > 0 then print "and gains on life policies.''

Line L46: Do not print if income-Savings-taxfree = 0 and taxable-int-SR + taxable-int-BR + taxable-int-HR + taxable-int-AHR = 0 and income-CEG = 0
Else if income-Savings-taxfree > 0 and taxable-int-SR + taxable-int-BR + taxable-int-HR + taxable-int-AHR > 0 and income-CEG > 0"Savings interest from banks or building societies, securities and gains on life policies"
Else if income-CEG > 0 then print "Gains on life policies",
else print " Savings interest from banks or building societies, securities etc.''

Line L56: If (tax-charged = Total-tax-NIC-due) and (tax-charged = IT-after-allces) and (IT-after-gift-aid > IT-after-allces) then print “Income Tax due    (A)”
else If (tax-charged = Total-tax-NIC-due) print "Income Tax due"
else if (tax-charged <> Total-tax-NIC-due) and (tax-charged = IT-after-allces) and (IT-after-gift-aid > IT-after-allces) and (deficiency-relief + TSR + VCT + EIS + SEIS-Relief + CITR + SITR + Alimony + MCA-relief + spare-MCA-relief + AllceIn-TPA-relief + notional-CEG + notional-other + FTCR > tax-charged) then print “Income Tax charged    (A)”
else If (tax-charged <> Total-tax-NIC-due) print "Income Tax due"

Line 60A Do not print  If (SEIS relief = 0 )  


Line L76: Do not print if (tax-charged = IT-after-allces) 
else if (IT-after-gift-aid > IT-after-allces) then print “(A)”

Lines L77: Do not print if IT-after-gift-aid = IT-after-allces
else Line L78: If (IT-after-gift-aid > IT-after-allces) and (CGT=0) and (non-dom-charge-amount = 0) and (Child Benefit tax-charge =0) then print “(B)” and do not print lines L79 & L79a & L79b & L79c and L80. 

: 
Line L85: Do not print if annuity-amount = 0
else If div-tax-credits > 0 then print ''Income Tax due after dividend tax credits'' 
else print ''Income Tax due''.

Line L87: Do not print lines L87, L88, L89, L89A, L89B, L89C and L90 if NIC-total = 0.
Do not print lines L87, L88 and L89 if NIC1-amount >0
If NIC-charge > 0 and NIC-sup-charge = 0, do not print lines L88, L89
print " plus Class 4 National Insurance contributions 	NIC-amount x 9% = NIC-charge".
If NIC-charge = 0 and NIC-sup-charge > 0, do not print lines L88, L89
print " plus Class 4 National Insurance contributions 	NIC-sup-amount x 2% = NIC-sup-charge".
If NIC-charge > 0 and NIC-sup-charge > 0, print " plus Class 4 National Insurance contributions" followed by print
Line L88, Line L89.

Line L89A: Do not print lines L89A and L89B if NIC1-amount = 0
Else Line L89A print “ plus Class 4 National Insurance contributions 			NIC4-amount”
Else Line L89B print “ Your Class 4 has been adjusted for Class 2 due and NIC1-amount primary Class 1 contributions paid”

Line L89C: Do not print line L89C, if NIC2-amount = 0
Else Line L89C print “ plus Class 2 National Insurance contributions 			NIC2-amoun”t

Line L90: If NIC2-amount > 0 and NIC2-amount = NIC-total
print " Total Class 2 National Insurance contributions due".
else If NIC2-amount > 0
print " Total Class 2 and Class 4 National Insurance contributions due ".
else print " Total Class 4 National Insurance contributions due”

Line L93: Do not print if Student-loan = 0
If Student-loan> 0 and pseudo box SLRPT = 01
Print "plus Student Loan repayments (plan 01)''
Else 
If Student-loan> 0 and pseudo box SLRPT = 02
Print "plus Student Loan repayments (plan 02)''

Line L94: Do not print if (NIC-total + unpaid-tax-in-code + Student-loan + Child Benefit tax charge + Pension charges + Pension Lump Sum tax + non-dom-charge-amount  ) = 0
If NIC-total > 0 and NIC2-amount > 0 and NIC2-amount = NIC-total 
print ''Income Tax and Class 2 National Insurance contributions due" 
else If NIC-total > 0 and If NIC2-amount = 0
print ''Income Tax and Class 4 National Insurance contributions due" 
else If NIC2-amount > 0
print ''Income Tax, Class 2 and Class 4 National Insurance contributions due" 
else print "Income Tax due"

Line L96: Print if (total-tax-paid + debt-coded) > 0

Line 97: Print If tax paid E > 0 or debt coded > 0 print “From all employments, UK pensions and state benefits “

Line 97A: Print if debt coded > 0, print minus “Outstanding Debt collected through PAYE “

Line97B:  Print if debt coded > 0 print “Balance of PAYE tax”   


Line 109   Print if (total-tax-paid + debt-collected) > 0 

Line L111: Do not print if (If (total-tax-paid + debt-coded) = 0
else If total-tax-paid > IT-plus-class4 then print ''Income Tax overpaid''
else if NIC-total> 0 and NIC2-amount > 0 and NIC2-amount = NIC-total then print ''Income Tax and Class 2 National Insurance contributions due ''
else if NIC-total> 0 and NIC2-amount = 0 then print ''Income Tax and Class 4 National Insurance contributions due ''
else if NIC-total> 0 and NIC2-amount > 0 then print ''Income Tax, Class 2 and Class 4 National Insurance contributions due ''
else ''Total Income Tax due''

Line L113: Do not print if total-CG-due = 0.

Line L121: Do not print if total-CG-due = 0.
If total-tax-paid > (IT-plus-class4 + total-CG-due) then print "Income Tax overpaid''
else if NIC-total> 0 and NIC2-amount > 0 and NIC2-amount = NIC-total then print ''Income Tax, Capital Gains Tax, and Class 2 National Insurance contributions due''
else if NIC-total> 0 and NIC2-amount = 0 then print ''Income Tax, Capital Gains Tax, and Class 4 National Insurance contributions due''
else if NIC-total> 0 and if NIC2-amount >0 then print ''Income Tax, Capital Gains Tax, Class 2 and Class 4 National Insurance contributions due''
else print "Income and Capital Gains Tax due''

Line L123: If tax-already-refunded > 0
If total-tax-paid > (IT-plus-class4 + total-CG-due) then print "minus Tax already refunded in the year"
else print "plus Tax already refunded in the year"

Line L124: If unpaid-tax-bf > 0
If total-tax-paid > (IT-plus-class4 + total-CG-due) then print "minus Unpaid tax calculated by reference to earlier years "
else print "plus Unpaid tax calculated by reference to earlier years "

Line L125a: Do not print Lines L125a and L125b if AllceIn-TPA = 0
If AllceIn-TPA-relief=AllceIn-TPA-relief-restricted then print "minus Marriage Allowance transfer "
else print 
Line L125b: " minus Marriage Allowance transfer £AllceIn-TPA x 20% = AllceIn-TPA-relief reduced to maximum allowable			AllceIn-TPA-relief-restricted"

Line L126: Do not print if (unpaid-tax-bf + tax-already-refunded + AllceIn-TPA-relief) = 0.
If total-tax-paid > (IT-plus-class4 + total-CG-due + tax-already-refunded + unpaid-tax-bf) minus AllceIn-TPA-relief-restricted)) then print "Income Tax overpaid''
else if NIC-total> 0 then print ''Total tax and National Insurance contributions due
else print “ Total tax due”
 
Annex B – How to Calculate ITF-CEG-INPUT-AMOUNT
As a result of there being non-identical gains from more than one policy there is at least one of the corresponding years’ box absent …

An entry in ITF-CEG-INPUT-AMOUNT (Box 1A) will be required where: 
Chargeable Event Gains are present (return box AOI4, return box AOI6, return box AOI8 or return box FOR43) > 0 and either 

•	Top Slicing Relief may be due i.e. taxpayer liable at Higher rate (Calculation box c17.20 > 0) or
•	Capital Gains are present (any of boxes ((CGT6 + CGT17 + CGT26 + CGT34) minus (CGT7 + CGT19 + CGT27 + CGT35) + CGT9 + CGT52> 0) or CGT51 not zero or Null) or (box CGT18 is not zero or null)

and 
As a result of there being non-identical gains from more than one policy there is at least one of the corresponding years box absent (i.e. AOI4 present and AOI5 absent, or AOI6 present and AOI7 absent, or AOI8 present and AOI9 absent, or FOR43 present and FOR44 absent).


How to calculate BOX 1A     

A= gain arising from each policy relevant to AOI4, AOI6, AOI8 or FOR43 
B= years each policy held or years since last gain whichever is the lesser 

For each separate instance divide A by B

Add together the result of each instance of A divided by B  
 Enter the total in c17.22 (box 1A)      

Note- 
If AOI5, AOI7, AOI9 or FOR44 less than 1 substitute 1    
if box 1A amount is calculated at less than 1 please substitute1   
  







